<!DOCTYPE>
    <html>
    <head>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<base href="http://localhost:5000/" />
<link href="https://fonts.googleapis.com/css2?family=Geo&display=swap" rel="stylesheet">
        <style>
            html,body {
                height: 100%;
                margin: 0;
                background: white;
            }

            canvas {
                border: solid;
                width: 50%;
                height: 50%;
                background: white;
            }

            a {
                position: absolute;
                bottom: 2%;
                right: 2%;
            }

            textarea {
                position: absolute;
                top: 0;
                right: 0;
                width: 300px;
                height: 150px;
                background: rgba(255,255,255,0.5);
            }
        </style>
    </head>
    <body>
        <canvas></canvas>
        <a href="" download="">Download</a>
        <textarea></textarea>
    </body>
    <script type="module">
    /* Program to be used in addition to textures.js to draw textures using canvas commands. Data such as vertices and such are then generated by extracting data form a TextureData object. */
    
        import {
            draw
        } from "/src/scripts/lib.js";
        import {
            BULLETSHELL,
            MONEY, 
            BUGGY, 
            TOOL_ICON, 
            PHONE_ICON, 
            BAG_ICON, 
            GEAR_ICON, 
            MAIN_AVATAR_DEFAULT,
            CANDY_BAR, 
            NOSS_7, 
            STUBBY_SHOTGUN,
            STUBBY_SHOTGUN_TOP_2,  
            MAIN_AVATAR_DRAW_STUBBYSHOTGUN_1,
            MAIN_AVATAR_DRAW_STUBBYSHOTGUN_2, 
            ROBBER_SHOTGUN, 
            MAIN_AVATAR_DRAW_ROBBERSHOTGUN_1,
            MAIN_AVATAR_DRAW_ROBBERSHOTGUN_2, 
            CLASSIC_SHOTGUN,
            MAIN_AVATAR_DRAW_CLASSICSHOTGUN_1,
            MAIN_AVATAR_DRAW_CLASSICSHOTGUN_2,
            GLOCK_20, 
            M4_DSS, 
            HEAVY_SHOTGUN, 
            HEAVY_SHOTGUN_TOP, 
            MAIN_AVATAR_DRAW_HEAVYSHOTGUN_1,
            MAIN_AVATAR_DRAW_HEAVYSHOTGUN_2,
            FIVE_9,
            MAG,
            MAIN_AVATAR_DOUBLE_KC357_1,
            MAIN_AVATAR_DOUBLE_KC357_2,
            MAIN_AVATAR_DOUBLE_X691_1,
            MAIN_AVATAR_DOUBLE_X691_2,
            MAIN_AVATAR_DOUBLE_USP45_1,
            MAIN_AVATAR_DOUBLE_USP45_2,
            MAIN_AVATAR_DOUBLE_DX9_1,
            MAIN_AVATAR_DOUBLE_DX9_2,
            MAIN_AVATAR_DOUBLE_NOSS7_1,
            MAIN_AVATAR_DOUBLE_NOSS7_2,
            MAIN_AVATAR_DOUBLE_FURS55_1,
            MAIN_AVATAR_DOUBLE_FURS55_2,
            MAIN_AVATAR_DOUBLE_NXR44MAG_1,
            MAIN_AVATAR_DOUBLE_NXR44MAG_2,
            MAIN_AVATAR_DOUBLE_GLOCK20_1,
            MAIN_AVATAR_DOUBLE_GLOCK20_2,
            MAIN_AVATAR_DOUBLE_GPK100_1,
            MAIN_AVATAR_DOUBLE_GPK100_2,
            GUS,
            MAIN_AVATAR_DRAW_GUS_1,
            MAIN_AVATAR_DRAW_GUS_2,
            MAIN_AVATAR_DOUBLE_GUS_1,
            MAIN_AVATAR_DOUBLE_GUS_2,
            BS_6,
            MAIN_AVATAR_DRAW_BS6_1,
            MAIN_AVATAR_DRAW_BS6_2,
            HUSH_19,
            MAIN_AVATAR_DRAW_HUSH19_1,
            MAIN_AVATAR_DRAW_HUSH19_2,
            K9,
            MAIN_AVATAR_DRAW_K9_1,
            MAIN_AVATAR_DRAW_K9_2,
            NEXT
        } from "/src/scripts/models.js";

        // Import texture for editing and downloading...

        const canvas = document.querySelector("canvas");
        canvas.style.background = "white";
        const ctx = canvas.getContext("2d");
        const link = document.querySelector("a");
        const text = document.querySelector("textarea");
       

        function resize(width, height) {
            canvas.width = width;
            canvas.height = height;
            canvas.style.width = `${width}px`;
            canvas.style.height = `${height}px`;
        }
 
        function setSource(name) {
            canvas.toBlob(blob => {
                link.href = URL.createObjectURL(blob);
                link.download = name;
            });
        }

        function log(data,cnsl) {
            if (cnsl) {
                console.log(`vertices: ${data.vertices}, verticeCount: ${data.verticeCount}, width: ${data.width}, height: ${data.height}, bounds: ${data.bounds}`);
            } else {
                  text.innerHTML = `vertices: ${data.vertices}, verticeCount: ${data.verticeCount}, width: ${data.width}, height: ${data.height}, bounds: ${data.bounds}`;
            }
        }

        //GENERIC_APARTMENT(0, 0, 0.1, "314");
        //SUPERMARKET(0, 0, 0.1);
        //CAFE(100, 100, 0.1);
        //MAIN_AVATAR_DEFAULT(-5, -5, 1);
        //KC_357(5, -150, 1);
        //GLOCK_20(-45, -100, 1);
        //GP_K100(-45, -100, 1);
        //USP_45(-45, -25, 1);
        //NXR_44_MAG(-14, -35, 1);
        //GENERIC_APARTMENT(-98, -338, 0.2, "314");
        //SUPERMARKET(-98, -338, 0.2);
        //CAFE(-18, -18, 0.2);
        //MAIN_AVATAR_DEFAULT(-5, -5, 0.2);

        resize(2000, 2000);

        // export function draw(a, w, h, iw, ih, s, lw, attribs=[],canvas) {
        let texture = NEXT;
//new Sheet([ROAD_RAIL,ROAD_SIGN,URBAN_FENCE_HALF,URBAN_FENCE,URBAN_FENCE_VERTICAL], 1024, 1024);
        //ACTION_BUTTON_TEXTURE.render(ctx);
        //URBAN_FENCE.render(ctx);
        //PICNIC_TABLE.render(ctx);
         //KC_357.render(ctx);
         //BLACK_BACKPACK_ACC.render(ctx);
       //  WHITEBOARD.render(ctx);
         //TABLE.render(ctx);
         //MULTI_AMMO_BOX.render(ctx);
         //REMOTE_EXPLOSIVE.render(ctx);
         texture.render(ctx);
         //MAIN_AVATAR_DEFAULT.render(ctx);
         //AMMO_BOX.render(ctx);
         //MED_KIT.render(ctx);
         //BLACK_BACKPACK_ACC.render(ctx);
         //POLICE_HAT_ACC.render(ctx);
         //TOOL_ICON.render(ctx);
         //LAPTOP.render(ctx);
        // CONVENIENCE_STORE.render(ctx);
       //  GAZEBO.render(ctx);
         //GLOCK_20.render(ctx); 
        // NXR_44_MAG.render(ctx);
         //GP_K100_TOP_2.render(ctx,-90);
        //GLOCK_20_TOP.render(ctx,-90); 
       // log(texture.getData());
          log(texture.getData());
          console.log(texture.textureDimensions);
          setSource(`MAIN_AVATAR_DRAW_K9_2.png`);
    </script>
</html>
