<!DOCTYPE>
    <html>
    <head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Neonderthaw&display=swap" rel="stylesheet">
        <style>
            html,body {
                height: 100%;
                margin: 0;
                background: white;
            }

            canvas {
                border: solid;
                width: 50%;
                height: 50%;
                background: white;
            }

            a {
                position: absolute;
                bottom: 2%;
                right: 2%;
            }

            textarea {
                position: absolute;
                top: 0;
                right: 0;
                width: 300px;
                height: 150px;
                background: rgba(255,255,255,0.5);
            }
        </style>
    </head>
    <body>
        <canvas></canvas>
        <a href="" download="">Download</a>
        <textarea></textarea>
    </body>
    <script type="module">
    /* Program to be used in addition to textures.js to draw textures using canvas commands. Data such as vertices and such are then generated by extracting data form a TextureData object. */
    
        import {
            draw
        } from "./lib.js";
        import {
            KC_357,
            GLOCK_20,
            NXR_44_MAG,
            GP_K100,
            USP_45,
            JOYSTICK_DISC_TEXTURE,
            GENERIC_APARTMENT,
            SUPERMARKET,
            CAFE,
            MAIN_AVATAR_DEFAULT,
            MAIN_AVATAR_BLINKING,
            MAIN_AVATAR_WALKING_1,
            MAIN_AVATAR_WALKING_2,
            TABLE,
            TABLE_VERTICAL,
            BOOK_1,
            BOOK_2,
            KITCHEN_KNIFE,
            ASSASSINS_KNIFE,
            COMBAT_KNIFE
        } from "./textures.js";

        // Import texture for editing and downloading...

        const canvas = document.querySelector("canvas");
        const ctx = canvas.getContext("2d");
        const link = document.querySelector("a");
        const text = document.querySelector("textarea");

        function resize(width, height) {
            canvas.width = width;
            canvas.height = height;
            canvas.style.width = `${width}px`;
            canvas.style.height = `${height}px`;
        }

        function setSource(name) {
            canvas.toBlob(blob => {
                link.href = URL.createObjectURL(blob);
                link.download = name;
            });
        }

        function log(data,cnsl) {
            if (cnsl) {
                console.log(`vertices: ${data.vertices}, verticeCount: ${data.verticeCount}, width: ${data.width}, height: ${data.height}, bounds: ${data.bounds}`);
            } else {
                  text.innerHTML = `vertices: ${data.vertices}, verticeCount: ${data.verticeCount}, width: ${data.width}, height: ${data.height}, bounds: ${data.bounds}`;
            }
        }

        //GENERIC_APARTMENT(0, 0, 0.1, "314");
        //SUPERMARKET(0, 0, 0.1);
        //CAFE(100, 100, 0.1);
        //MAIN_AVATAR_DEFAULT(-5, -5, 1);
        //KC_357(5, -150, 1);
        //GLOCK_20(-45, -100, 1);
        //GP_K100(-45, -100, 1);
        //USP_45(-45, -25, 1);
        //NXR_44_MAG(-14, -35, 1);
        //GENERIC_APARTMENT(-98, -338, 0.2, "314");
        //SUPERMARKET(-98, -338, 0.2);
        //CAFE(-18, -18, 0.2);
        //MAIN_AVATAR_DEFAULT(-5, -5, 0.2);
  
        resize(1000, 1000);
        
        let texture = MAIN_AVATAR_DEFAULT;
        GLOCK_20.render(ctx);
        ASSASSINS_KNIFE(150,200,0.2,ctx);
        KITCHEN_KNIFE(200,200,0.2,ctx);
        COMBAT_KNIFE(250,250,0.2,ctx);
        BOOK_1(300,200,0.2,ctx);
        BOOK_2(400,200,0.2,ctx);
        TABLE(500,200,0.2,ctx);
        //texture.render(ctx);
        log(texture.getData());
        console.log(texture.textureDimensions);
        setSource(`MAIN_AVATAR_BLINKING`); 
    </script>
</html>