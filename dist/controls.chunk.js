"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkWTRW"] = self["webpackChunkWTRW"] || []).push([["controls.chunk"],{

/***/ "./src/scripts/controls.js":
/*!*********************************!*\
  !*** ./src/scripts/controls.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/scripts/lib.js */ \"./src/scripts/lib.js\");\n/* harmony import */ var _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/scripts/dialogue.js */ \"./src/scripts/dialogue.js\");\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n\nvar _await$import = await __webpack_require__.e(/*! import() */ \"objects.chunk\").then(__webpack_require__.bind(__webpack_require__, /*! ../../../src/scripts/objects.js */ \"./src/scripts/objects.js\")),\n  _Map_ = _await$import._Map_,\n  Avatar = _await$import.Avatar,\n  House1 = _await$import.House1,\n  UrbanFence = _await$import.UrbanFence,\n  UrbanFenceHalf = _await$import.UrbanFenceHalf,\n  UrbanFenceVertical = _await$import.UrbanFenceVertical,\n  RoadRail = _await$import.RoadRail,\n  RoadRailVertical = _await$import.RoadRailVertical,\n  PicnicTable = _await$import.PicnicTable,\n  StreetLight = _await$import.StreetLight,\n  Chair = _await$import.Chair,\n  Table = _await$import.Table,\n  GLOCK_20 = _await$import.GLOCK_20,\n  Text = _await$import.Text,\n  VisibleBarrier = _await$import.VisibleBarrier,\n  DownwardLight = _await$import.DownwardLight,\n  Barrier = _await$import.Barrier,\n  Laptop = _await$import.Laptop,\n  BlackBook = _await$import.BlackBook,\n  WhiteBook = _await$import.WhiteBook,\n  NXR_44_MAG = _await$import.NXR_44_MAG,\n  GP_K100 = _await$import.GP_K100,\n  KC_357 = _await$import.KC_357,\n  USP_45 = _await$import.USP_45,\n  Grass = _await$import.Grass,\n  Grass2 = _await$import.Grass2,\n  Bench = _await$import.Bench,\n  Rocks1 = _await$import.Rocks1,\n  Rocks2 = _await$import.Rocks2,\n  BulletShell = _await$import.BulletShell,\n  Plus100 = _await$import.Plus100,\n  KitchenKnife = _await$import.KitchenKnife,\n  AssassinsKnife = _await$import.AssassinsKnife,\n  Bot = _await$import.Bot,\n  Bush = _await$import.Bush,\n  ConvenienceStore = _await$import.ConvenienceStore,\n  LightBush = _await$import.LightBush,\n  MixedBush = _await$import.MixedBush,\n  Stopper = _await$import.Stopper,\n  MetalFence = _await$import.MetalFence,\n  MetalFenceVertical = _await$import.MetalFenceVertical,\n  Atm = _await$import.Atm,\n  Gazebo = _await$import.Gazebo,\n  Floor = _await$import.Floor,\n  Shed = _await$import.Shed,\n  Tile = _await$import.Tile,\n  Syringe = _await$import.Syringe,\n  Vendor1 = _await$import.Vendor1,\n  _Joystick_ = _await$import._Joystick_,\n  _Button_ = _await$import._Button_,\n  House2 = _await$import.House2,\n  GunStore = _await$import.GunStore,\n  GreyBackpack = _await$import.GreyBackpack,\n  WhiteBackpack = _await$import.WhiteBackpack,\n  BlackBackpack = _await$import.BlackBackpack,\n  Whiteboard = _await$import.Whiteboard,\n  Pinboard = _await$import.Pinboard,\n  SmallTable = _await$import.SmallTable,\n  MedKit = _await$import.MedKit,\n  AmmoBox = _await$import.AmmoBox,\n  MultiAmmoBox = _await$import.MultiAmmoBox,\n  BasicArmour = _await$import.BasicArmour,\n  MercenaryArmour = _await$import.MercenaryArmour,\n  SwatArmour = _await$import.SwatArmour,\n  SteakAndFries = _await$import.SteakAndFries,\n  DX_9 = _await$import.DX_9,\n  FURS_55 = _await$import.FURS_55,\n  NOSS_7 = _await$import.NOSS_7,\n  X6_91 = _await$import.X6_91,\n  RemoteExplosive = _await$import.RemoteExplosive,\n  RemoteDetonator = _await$import.RemoteDetonator,\n  ProximityExplosive = _await$import.ProximityExplosive,\n  CombatKnife = _await$import.CombatKnife,\n  Money = _await$import.Money,\n  Door = _await$import.Door,\n  LightSwitch = _await$import.LightSwitch,\n  SmallPlant = _await$import.SmallPlant,\n  CandyBar = _await$import.CandyBar,\n  StubbyShotgun = _await$import.StubbyShotgun;\n\n\n/* LOGIC FOR INTERACTION BUTTONS */\n\nvar grabButton = document.querySelector(\".grab-button\");\nvar actionButton = document.querySelector(\".action-button\");\nfunction toggleGrab(e) {\n  e.preventDefault();\n  if ($AVATAR.grab()) {\n    grabButton.style.opacity = \"0.5\";\n  } else {\n    $AVATAR.drop();\n    grabButton.style.opacity = \"1\";\n  }\n}\nfunction runAction(e) {\n  if (!$CURRENT_MAP.currentInteractable || $CURRENT_MAP.currentInteractable === $AVATAR.state.pickup.current) return;\n  var i = $CURRENT_MAP.interactables[$CURRENT_MAP.currentInteractable.id];\n  if (i) i.action();\n  $CURRENT_MAP.updateInteractable();\n}\ngrabButton.ontouchstart = toggleGrab;\ngrabButton.onclick = toggleGrab;\nif (!$IS_MOBILE) {\n  window.addEventListener(\"keydown\", function (e) {\n    if (e.code === \"KeyE\") runAction(e);\n  });\n}\nactionButton.onclick = runAction;\n\n/* LOGIC FOR DIALOG CONTROLS AND PROCESS */\n\nvar subtitles = document.querySelector(\".subtitles\");\nvar optionsContainer = document.querySelector(\".bottom-panel__options\");\nvar dialogueOption1 = document.querySelector(\".option-1\");\nvar dialogueOption2 = document.querySelector(\".option-2\");\nvar optionNavUp = document.querySelector(\".nav-up\");\nvar optionNavDown = document.querySelector(\".nav-down\");\nvar speakButton = document.querySelector(\".speak-button\");\nvar selectedModule = 0;\nvar selectedOption = 0;\nvar currentOptions = [0, 1];\nvar optionSelect = true;\noptionNavUp.onmousedown = function () {\n  if (selectedOption > 0 && optionSelect) {\n    selectedOption--;\n    updateNav();\n    if (selectedOption < currentOptions[0] && selectedOption < currentOptions[1]) {\n      currentOptions = [selectedOption, selectedOption + 1];\n    }\n    dialogueOption1.style.color = _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[currentOptions[0]].enabled ? \"white\" : \"darkgray\";\n    dialogueOption2.style.color = _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[currentOptions[1]].enabled ? \"white\" : \"darkgray\";\n    dialogueOption1.innerText = _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[currentOptions[0]].label || _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[currentOptions[0]].getContent();\n    dialogueOption2.innerText = _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[currentOptions[1]].label || _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[currentOptions[1]].getContent();\n    if (selectedOption === currentOptions[0]) {\n      dialogueOption1.style.backgroundColor = \"#444444\";\n      dialogueOption2.style.backgroundColor = \"#222222\";\n      return;\n    }\n    dialogueOption2.style.backgroundColor = \"#444444\";\n    dialogueOption1.style.backgroundColor = \"#222222\";\n  }\n};\noptionNavDown.onmousedown = function () {\n  if (selectedOption < _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options.length - 1 && optionSelect) {\n    selectedOption++;\n    updateNav();\n    if (selectedOption > currentOptions[0] && selectedOption > currentOptions[1]) {\n      currentOptions = [selectedOption - 1, selectedOption];\n    }\n    dialogueOption1.style.color = _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[currentOptions[0]].enabled ? \"white\" : \"darkgray\";\n    dialogueOption2.style.color = _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[currentOptions[1]].enabled ? \"white\" : \"darkgray\";\n    dialogueOption1.innerText = _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[currentOptions[0]].label || _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[currentOptions[0]].getContent();\n    dialogueOption2.innerText = _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[currentOptions[1]].label || _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[currentOptions[1]].getContent();\n    if (selectedOption === currentOptions[0]) {\n      dialogueOption1.style.backgroundColor = \"#444444\";\n      dialogueOption2.style.backgroundColor = \"#222222\";\n      return;\n    }\n    dialogueOption2.style.backgroundColor = \"#444444\";\n    dialogueOption1.style.backgroundColor = \"#222222\";\n  }\n};\nfunction updateOptions() {\n  if (_src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][0]) {\n    if (optionSelect) {\n      dialogueOption1.innerText = _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[selectedOption].label || _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[selectedOption].getContent();\n      dialogueOption2.innerText = _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[selectedOption + 1].label || _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[selectedOption + 1].getContent();\n    } else {\n      dialogueOption1.innerText = \"...\";\n      dialogueOption2.innerText = \"...\";\n    }\n    updateNav();\n    if (selectedOption === currentOptions[0]) {\n      dialogueOption1.style.backgroundColor = \"#444444\";\n      dialogueOption2.style.backgroundColor = \"#222222\";\n      return;\n    }\n    dialogueOption2.style.backgroundColor = \"#444444\";\n    dialogueOption1.style.backgroundColor = \"#222222\";\n  }\n}\nfunction updateNav() {\n  document.querySelector(\".nav-up div\").style.opacity = selectedOption - 1 < 0 ? \"0.5\" : \"1\";\n  document.querySelector(\".nav-down div\").style.opacity = selectedOption + 1 > _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options.length - 1 ? \"0.5\" : \"1\";\n}\nfunction updateSubtitles(content, callback) {\n  var characterName = optionSelect ? $AVATAR.character : $ACTIVE_DIALOGUE_PARTY.character;\n  subtitles.innerHTML = \"<strong>\".concat(characterName, \":</strong> ...\");\n  setTimeout(function () {\n    var interval,\n      pos = 0,\n      str = content;\n    interval = setInterval(function () {\n      subtitles.innerHTML = \"<strong>\".concat(characterName, \":</strong> \") + str.slice(0, pos);\n      pos++;\n      if (pos > str.length) {\n        clearInterval(interval);\n        if (callback) callback();\n      }\n    }, 50);\n  }, 1000);\n}\nfunction processResponse() {\n  updateSubtitles(_src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[selectedOption].getContent(), function () {\n    if (_src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[selectedOption].action) _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[selectedOption].action();\n    if (_src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[selectedOption].getDestination()) {\n      setTimeout(function () {\n        var _dialogues$selectedMo = _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[selectedOption].getDestination(),\n          _dialogues$selectedMo2 = _slicedToArray(_dialogues$selectedMo, 2),\n          mod = _dialogues$selectedMo2[0],\n          op = _dialogues$selectedMo2[1];\n        updateSubtitles(_src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][mod].responses[op].getContent(), function () {\n          if (_src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][mod].responses[op].action) _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][mod].responses[op].action();\n          if (_src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][mod].responses[op].getDestination()) {\n            selectedModule = _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][mod].responses[op].getDestination()[0];\n            selectedOption = 0;\n            currentOptions = [0, 1];\n            optionSelect = true;\n            updateOptions();\n          }\n        });\n      }, 1000);\n    }\n  });\n  optionSelect = false;\n  updateOptions();\n}\noptionsContainer.onclick = function () {\n  if (optionSelect && $ACTIVE_DIALOGUE_PARTY && _src_scripts_dialogue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][selectedModule].options[selectedOption].enabled) {\n    processResponse();\n  }\n};\nfunction startDialogue(e) {\n  //toggleNote(\"Sorry, we're working on that! Dialogue will be included in newer versions.\");\n  //return;\n\n  e.preventDefault();\n  var res = undefined,\n    dist = Infinity;\n  for (var avatar in $CURRENT_MAP.avatars) {\n    avatar = $CURRENT_MAP.avatars[avatar];\n    if (avatar === $AVATAR || avatar.state.target.engaged) continue;\n    var d = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(0, 0, avatar.trans.offsetX, avatar.trans.offsetY);\n    if ((d < dist || res === undefined) && d < 30) {\n      res = avatar;\n      dist = d;\n    }\n  }\n  if (!res) return;\n  $ACTIVE_DIALOGUE_PARTY = res;\n  var _res$character$split = res.character.split(\" \"),\n    _res$character$split2 = _slicedToArray(_res$character$split, 2),\n    firstName = _res$character$split2[0],\n    lastName = _res$character$split2[1];\n  $ACTIVE_DIALOGUE_PARTY.firstName = firstName;\n  $ACTIVE_DIALOGUE_PARTY.lastName = lastName;\n  res.stopWander();\n  res.stopSitting();\n  if (res.state.path.engaged) res.disengagePath();\n  res.state.rotationTarget = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.normalizeRotation)(Math.atan2(0 - res.map.centerY - (res.trans.offsetY - res.map.centerY), 0 - res.map.centerX - (res.trans.offsetX - res.map.centerX)) * 180 / Math.PI - 90);\n  requestTransition(function () {\n    document.querySelector(\"#mainControls\").style.display = \"none\";\n    document.querySelector(\"#dialogue\").style.display = \"block\";\n    subtitles.innerHTML = \"<strong>\".concat($AVATAR.character, \":</strong> ...\");\n    selectedModule = 0;\n    selectedOption = 0;\n    optionSelect = true;\n    updateOptions();\n  }, 10);\n}\nwindow.endDialogue = function (e) {\n  if ($ACTIVE_DIALOGUE_PARTY) {\n    $ACTIVE_DIALOGUE_PARTY.wander();\n    $ACTIVE_DIALOGUE_PARTY = undefined;\n    requestTransition(function () {\n      document.querySelector(\"#mainControls\").style.display = \"block\";\n      document.querySelector(\"#dialogue\").style.display = \"none\";\n      $CURRENT_MAP.move = true;\n    }, 10);\n  }\n};\nwindow.addEventListener(\"keydown\", function (_ref) {\n  var key = _ref.key;\n  if (key === \"Escape\" && $ACTIVE_DIALOGUE_PARTY) {\n    endDialogue();\n  }\n});\nspeakButton.ontouchstart = startDialogue;\nspeakButton.onclick = startDialogue;\nupdateOptions();\n\n/* CRAFTING */\n\nvar openCraftingButton = document.querySelectorAll(\".controls-container__button\").item(2);\nopenCraftingButton.addEventListener(\"click\", function () {\n  toggleNote(\"Sorry, we're working on that! Crafting will be included in newer versions.\");\n});\n\n/* MAP CONTROLS AND MINIMAP RENDERING */\n\nvar mapContainer = document.querySelector(\"#map\");\nvar closeMapButton = document.querySelector(\"#map-close\");\nvar openMapButton = document.querySelectorAll(\".controls-container__button\").item(1);\nvar setWaypointButton = document.querySelector(\"#set-waypoint\");\nsetWaypointButton.ontouchstart = toggleWaypoint;\nsetWaypointButton.onclick = toggleWaypoint;\ncloseMapButton.ontouchstart = hideMap;\ncloseMapButton.onclick = hideMap;\nopenMapButton.ontouchstart = showMap;\nopenMapButton.onclick = showMap;\nfunction showMap(e) {\n  e.preventDefault();\n  updateMapData();\n  $MAP_DISPLAY.useInteractiveDisplay = true;\n  updateCoordinates($CURRENT_MAP.centerX + $MAP_DISPLAY.displayOffset.x, $CURRENT_MAP.centerY - $MAP_DISPLAY.displayOffset.y);\n  mapContainer.style.display = \"grid\";\n  updateDisplayViewport();\n}\nfunction hideMap(e) {\n  e.preventDefault();\n  $MAP_DISPLAY.useInteractiveDisplay = false;\n  $MAP_DISPLAY.useWorldMap = false;\n  $MAP_DISPLAY.displayOffset.x = 0;\n  $MAP_DISPLAY.displayOffset.y = 0;\n  mapContainer.style.display = \"none\";\n}\nvar mapDisplay = document.querySelector(\"#mapDisplay\");\nvar mdContext1 = mapDisplay.getContext(\"webgl\");\nmapDisplay.width = 1000;\nmapDisplay.height = 1000;\nvar interactiveMap = document.querySelector(\"#interactive-map\");\nvar mdContext2 = interactiveMap.getContext(\"webgl\");\ninteractiveMap.width = 1000;\ninteractiveMap.height = 1000;\nvar offsetAnchor = {\n    x: 0,\n    y: 0\n  },\n  move = false;\nfunction startDisplayMovement(e) {\n  e.preventDefault();\n  move = true;\n  if (!$MAP_DISPLAY.useWorldMap) {\n    offsetAnchor.x = (e.touches ? e.touches[0].clientX : e.clientX) + $MAP_DISPLAY.displayOffset.x;\n    offsetAnchor.y = (e.touches ? e.touches[0].clientY : e.clientY) + $MAP_DISPLAY.displayOffset.y;\n  } else {\n    offsetAnchor.x = (e.touches ? e.touches[0].clientX : e.clientX) + $MAP_DISPLAY.worldMapOffset.x;\n    offsetAnchor.y = (e.touches ? e.touches[0].clientY : e.clientY) + $MAP_DISPLAY.worldMapOffset.y;\n  }\n}\nfunction moveDisplay(e) {\n  e.preventDefault();\n  if (move) {\n    if (!$MAP_DISPLAY.useWorldMap) {\n      $MAP_DISPLAY.displayOffset.x = offsetAnchor.x - (e.touches ? e.touches[0].clientX : e.clientX);\n      $MAP_DISPLAY.displayOffset.y = offsetAnchor.y - (e.touches ? e.touches[0].clientY : e.clientY);\n      updateCoordinates($CURRENT_MAP.centerX + $MAP_DISPLAY.displayOffset.x, $CURRENT_MAP.centerY - $MAP_DISPLAY.displayOffset.y);\n    } else {\n      $MAP_DISPLAY.worldMapOffset.x = offsetAnchor.x - (e.touches ? e.touches[0].clientX : e.clientX);\n      $MAP_DISPLAY.worldMapOffset.y = offsetAnchor.y - (e.touches ? e.touches[0].clientY : e.clientY);\n      updateCoordinates($MAP_DISPLAY.worldMapOffset.x, $MAP_DISPLAY.worldMapOffset.y);\n    }\n  }\n}\nfunction stopDisplayMovement(e) {\n  e.preventDefault();\n  move = false;\n  offsetAnchor = {\n    x: 0,\n    y: 0\n  };\n}\nfunction updateCoordinates(x, y) {\n  document.querySelector(\".map__coordinates\").innerText = \"x:\".concat(Math.round(x), \", y:\").concat(Math.round(y));\n}\ninteractiveMap.ontouchstart = startDisplayMovement;\ninteractiveMap.ontouchend = stopDisplayMovement;\ninteractiveMap.ontouchmove = moveDisplay;\ninteractiveMap.onmousedown = startDisplayMovement;\ninteractiveMap.onmouseup = stopDisplayMovement;\ninteractiveMap.onmousemove = moveDisplay;\nvar vShaderSrc = \"\\n        #version 100\\n\\n        precision highp float;\\n\\n        attribute vec3 coords;\\n        attribute float color;\\n        attribute vec2 point;\\n        attribute vec2 tcoords;\\n\\n        varying float colorCode;\\n        varying vec2 textrCoord;\\n\\n        uniform float worldUnitX;\\n        uniform float worldUnitY;\\n\\n        float x;\\n        float y;\\n\\n        uniform vec2 translation;\\n        uniform float scale;\\n \\n        void main() {\\n         float offsetX = translation.x; \\n         float offsetY = translation.y;\\n         float size = scale;\\n\\n         if (point[0] != 0.01) {\\n          offsetX = (point[0] + translation.x) / scale;\\n          offsetY = (point[1] + translation.y) / scale;\\n          size = 1.0;\\n         }\\n\\n         x = (coords.x + offsetX)*worldUnitX;\\n         y = (coords.y + offsetY)*worldUnitY;\\n \\n         gl_Position = vec4(x,y,1,size);\\n         textrCoord = vec2(tcoords[0],tcoords[1]);\\n         colorCode = color;\\n        }\\n  \";\nvar fShaderSrc = \"\\n        #version 100\\n\\n        precision highp float;\\n\\n        varying float colorCode;\\n        varying vec2 textrCoord;\\n\\n        uniform vec4 color1; \\n        uniform vec4 color2;\\n        uniform vec4 color3;\\n        uniform vec4 color4;\\n        uniform vec4 color5;\\n        uniform vec4 color6;\\n        uniform sampler2D texture;\\n        uniform sampler2D texture2;\\n        \\n        void main() {\\n         vec4 color = texture2D(texture,textrCoord);\\n        \\n          if (colorCode == 1.0) {\\n           color = color1;\\n          } else if (colorCode == 2.0) {\\n           color = color2;\\n          } else if (colorCode == 3.0) {\\n           color = color3;\\n          } else if (colorCode == 4.0) {\\n           color = color4;\\n          } else if (colorCode == 5.0) {\\n           color = color5;\\n          } else if (colorCode == 6.0) {\\n           color = color6;\\n          } else if (colorCode == 0.5) {\\n           color = texture2D(texture2,textrCoord);\\n           if (color[3] < 0.4) {\\n            color[0] = 0.0;\\n            color[1] = 0.0;\\n            color[2] = 0.0;\\n            color[3] = 0.0;\\n           }\\n          } else if (color[3] > 0.0) {\\n           color[0] = 0.7;\\n           color[1] = 0.7;\\n           color[2] = 0.7;\\n           color[3] = 1.0;\\n          }\\n     \\n         gl_FragColor = color;\\n        }\\n        \";\nfunction setDisplayContext(mdgl) {\n  var mdglExt = mdgl.getExtension(\"OES_vertex_array_object\");\n  if (mdgl === mdContext1) {\n    mdgl.viewport(0, 0, mapDisplay.width, mapDisplay.height);\n  } else {\n    mdgl.viewport(0, 0, interactiveMap.width, interactiveMap.height);\n  }\n  mdgl.enable(mdgl.BLEND);\n  mdgl.blendFunc(mdgl.ONE, mdgl.ONE_MINUS_SRC_ALPHA);\n  var mdVShader = mdgl.createShader(mdgl.VERTEX_SHADER);\n  mdgl.shaderSource(mdVShader, vShaderSrc);\n  mdgl.compileShader(mdVShader);\n  var vsLog = mdgl.getShaderInfoLog(mdVShader);\n  if (vsLog.length > 0) console.log(vsLog);\n  var mdFShader = mdgl.createShader(mdgl.FRAGMENT_SHADER);\n  mdgl.shaderSource(mdFShader, fShaderSrc);\n  mdgl.compileShader(mdFShader);\n  var fsLog = mdgl.getShaderInfoLog(mdFShader);\n  if (fsLog.length > 0) console.log(fsLog);\n  var mdProgram = mdgl.createProgram();\n  mdgl.attachShader(mdProgram, mdVShader);\n  mdgl.attachShader(mdProgram, mdFShader);\n  mdgl.linkProgram(mdProgram);\n  mdgl.useProgram(mdProgram);\n  var mdLocations = {\n    translation: mdgl.getUniformLocation(mdProgram, \"translation\"),\n    scale: mdgl.getUniformLocation(mdProgram, \"scale\"),\n    worldUnitX: mdgl.getUniformLocation(mdProgram, \"worldUnitX\"),\n    worldUnitY: mdgl.getUniformLocation(mdProgram, \"worldUnitY\"),\n    color1: mdgl.getUniformLocation(mdProgram, \"color1\"),\n    color2: mdgl.getUniformLocation(mdProgram, \"color2\"),\n    color3: mdgl.getUniformLocation(mdProgram, \"color3\"),\n    color4: mdgl.getUniformLocation(mdProgram, \"color4\"),\n    color5: mdgl.getUniformLocation(mdProgram, \"color5\"),\n    color6: mdgl.getUniformLocation(mdProgram, \"color6\"),\n    coords: mdgl.getAttribLocation(mdProgram, \"coords\"),\n    tcoords: mdgl.getAttribLocation(mdProgram, \"tcoords\"),\n    point: mdgl.getAttribLocation(mdProgram, \"point\"),\n    color: mdgl.getAttribLocation(mdProgram, \"color\"),\n    texture: mdgl.getUniformLocation(mdProgram, \"texture\"),\n    texture2: mdgl.getUniformLocation(mdProgram, \"texture2\")\n  };\n  mdgl.uniform1i(mdLocations.texture, 0);\n  mdgl.uniform1i(mdLocations.texture2, 1);\n  mdgl.uniform1f(mdLocations.scale, 1);\n  mdgl.uniform2fv(mdLocations.translation, [0, 0]);\n  mdgl.uniform4fv(mdLocations.color1, [0.39, 0.39, 0.39, 1]);\n  mdgl.uniform4fv(mdLocations.color2, (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.fromRGB)([44, 143, 219, 1]));\n  mdgl.uniform4fv(mdLocations.color3, (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.fromRGB)([219, 44, 44, 1]));\n  mdgl.uniform4fv(mdLocations.color4, [0.7, 0.7, 0.7, 1]);\n  mdgl.uniform4fv(mdLocations.color5, [1, 1, 1, 1]);\n  mdgl.uniform4fv(mdLocations.color6, (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.fromRGB)([204, 44, 219, 1]));\n  mdgl.uniform1f(mdLocations.worldUnitX, worldUnitX / 4 + worldUnitY / 4);\n  mdgl.uniform1f(mdLocations.worldUnitY, worldUnitX / 4 + worldUnitY / 4);\n  mdgl.vertexAttrib2fv(mdLocations.point, [0.01, 0.01]);\n  var t = mdgl.createTexture();\n  mdgl.bindTexture(mdgl.TEXTURE_2D, t);\n  mdgl.texImage2D(mdgl.TEXTURE_2D, 0, mdgl.RGBA, mdgl.RGBA, mdgl.UNSIGNED_BYTE, document.querySelector(\"#world-map\"));\n  mdgl.texParameteri(mdgl.TEXTURE_2D, mdgl.TEXTURE_MAG_FILTER, mdgl.LINEAR);\n  mdgl.texParameteri(mdgl.TEXTURE_2D, mdgl.TEXTURE_MIN_FILTER, mdgl.LINEAR);\n  mdgl.texParameteri(mdgl.TEXTURE_2D, mdgl.TEXTURE_WRAP_S, mdgl.CLAMP_TO_EDGE);\n  mdgl.texParameteri(mdgl.TEXTURE_2D, mdgl.TEXTURE_WRAP_T, mdgl.CLAMP_TO_EDGE);\n  var t2 = mdgl.createTexture();\n  mdgl.bindTexture(mdgl.TEXTURE_2D, t2);\n  mdgl.texImage2D(mdgl.TEXTURE_2D, 0, mdgl.RGBA, mdgl.RGBA, mdgl.UNSIGNED_BYTE, document.querySelector(\"#pinpoint\"));\n  mdgl.texParameteri(mdgl.TEXTURE_2D, mdgl.TEXTURE_MAG_FILTER, mdgl.LINEAR);\n  mdgl.texParameteri(mdgl.TEXTURE_2D, mdgl.TEXTURE_MIN_FILTER, mdgl.LINEAR);\n  mdgl.texParameteri(mdgl.TEXTURE_2D, mdgl.TEXTURE_WRAP_S, mdgl.CLAMP_TO_EDGE);\n  mdgl.texParameteri(mdgl.TEXTURE_2D, mdgl.TEXTURE_WRAP_T, mdgl.CLAMP_TO_EDGE);\n  return {\n    buffer: mdgl.createBuffer(),\n    vao: mdglExt.createVertexArrayOES(),\n    ext: mdglExt,\n    locations: mdLocations,\n    texture: t,\n    texture2: t2\n  };\n}\nfunction renderDisplayContext(ctx, props) {\n  ctx.clear(ctx.COLOR_BUFFER_BIT);\n  props.ext.bindVertexArrayOES(props.vao);\n  ctx.uniform1f(props.locations.scale, $MAP_DISPLAY.useInteractiveDisplay ? !$MAP_DISPLAY.useWorldMap ? $MAP_DISPLAY.interactiveScale : $MAP_DISPLAY.worldMapScale : $MAP_DISPLAY.scale);\n  ctx.uniform2fv(props.locations.translation, [$MAP_DISPLAY.useWorldMap ? -$MAP_DISPLAY.worldMapOffset.x : -$CURRENT_MAP.centerX - $MAP_DISPLAY.displayOffset.x, $MAP_DISPLAY.useWorldMap ? $MAP_DISPLAY.worldMapOffset.y : -$CURRENT_MAP.centerY + $MAP_DISPLAY.displayOffset.y]);\n  ctx.activeTexture(ctx.TEXTURE0);\n  ctx.bindTexture(ctx.TEXTURE_2D, props.texture);\n  ctx.activeTexture(ctx.TEXTURE1);\n  ctx.bindTexture(ctx.TEXTURE_2D, props.texture2);\n  var bufferData = [].concat(_toConsumableArray($MAP_DISPLAY.objectsVertices), _toConsumableArray($MAP_DISPLAY.avatarsVertices));\n  if ($MAP_DISPLAY.useWorldMap) bufferData = _toConsumableArray($MAP_DISPLAY.mapVertices);\n  ctx.bindBuffer(ctx.ARRAY_BUFFER, props.buffer);\n  ctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(bufferData), ctx.DYNAMIC_DRAW);\n  ctx.vertexAttribPointer(props.locations.coords, 3, ctx.FLOAT, false, 32, 0);\n  ctx.vertexAttribPointer(props.locations.color, 1, ctx.FLOAT, false, 32, 12);\n  ctx.vertexAttribPointer(props.locations.point, 2, ctx.FLOAT, false, 32, 16);\n  ctx.vertexAttribPointer(props.locations.tcoords, 2, ctx.FLOAT, false, 32, 24);\n  ctx.enableVertexAttribArray(0);\n  ctx.enableVertexAttribArray(1);\n  ctx.enableVertexAttribArray(2);\n  ctx.enableVertexAttribArray(3);\n  if (!$MAP_DISPLAY.useWorldMap) {\n    ctx.disableVertexAttribArray(2);\n    ctx.disableVertexAttribArray(3);\n  }\n  ctx.drawArrays(ctx.TRIANGLES, 0, bufferData.length / 8);\n  if ($MAP_DISPLAY.useWorldMap) {\n    bufferData = _toConsumableArray($MAP_DISPLAY.pinpointVertices);\n    ctx.bindBuffer(ctx.ARRAY_BUFFER, props.buffer);\n    ctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(bufferData), ctx.DYNAMIC_DRAW);\n    ctx.drawArrays(ctx.TRIANGLES, 0, bufferData.length / 8);\n  }\n  if ($MAP_DISPLAY.waypoint.set && $CURRENT_MAP.id === $MAP_DISPLAY.waypoint.map && !$MAP_DISPLAY.useWorldMap) {\n    if ((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)($CURRENT_MAP.centerX, $CURRENT_MAP.centerY, $MAP_DISPLAY.waypoint.x, $MAP_DISPLAY.waypoint.y) < 30) {\n      toggleWaypoint();\n      return;\n    }\n    ctx.bindBuffer(ctx.ARRAY_BUFFER, props.buffer);\n    ctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(_toConsumableArray($MAP_DISPLAY.waypointVertices)), ctx.DYNAMIC_DRAW);\n    ctx.vertexAttribPointer(props.locations.coords, 3, ctx.FLOAT, false, 16, 0);\n    ctx.vertexAttribPointer(props.locations.color, 1, ctx.FLOAT, false, 16, 12);\n    ctx.enableVertexAttribArray(0);\n    ctx.enableVertexAttribArray(1);\n    ctx.drawArrays(ctx.TRIANGLE_STRIP, 0, $MAP_DISPLAY.waypointVertices.length / 4);\n  }\n}\n$MAP_DISPLAY = {\n  scale: 2,\n  interactiveScale: 7,\n  worldMapScale: 7,\n  useInteractiveDisplay: false,\n  useWorldMap: false,\n  displayOffset: {\n    x: 0,\n    y: 0\n  },\n  worldMapOffset: {\n    x: 0,\n    y: 0\n  },\n  objectsVertices: [],\n  avatarsVertices: [],\n  waypointVertices: [],\n  pinpointVertices: [],\n  mapVertices: [-600, 300, 1, 0, 0.01, 0.01, 0, 0, 600, 300, 1, 0, 0.01, 0.01, 1, 0, -600, -300, 1, 0, 0.01, 0.01, 0, 1, 600, 300, 1, 0, 0.01, 0.01, 1, 0, -600, -300, 1, 0, 0.01, 0.01, 0, 1, 600, -300, 1, 0, 0.01, 0.01, 1, 1],\n  waypoint: {\n    x: 0,\n    y: 0,\n    set: false,\n    map: undefined\n  },\n  colorCodes: {\n    \"door\": 5,\n    \"building\": 5,\n    \"visible barrier\": 4\n  },\n  updateWaypoint: function updateWaypoint(x1, y1, x2, y2) {\n    $MAP_DISPLAY.waypointVertices = [x1, y1, 1, 6, x1, y1 + 5, 1, 6, x2, y2, 1, 6, x2, y2 + 5, 1, 6, x1 + 5, y1, 1, 6, x1, y1, 1, 6, x2, y2, 1, 6, x2 + 5, y2, 1, 6];\n  },\n  addObject: function addObject(obj) {\n    var _obj$trans = obj.trans,\n      offsetX = _obj$trans.offsetX,\n      offsetY = _obj$trans.offsetY,\n      color = this.colorCodes[obj.name] || this.colorCodes[obj.type] || 1;\n    this.objectsVertices = this.objectsVertices.concat((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.cut)([[-obj.width / 2 + offsetX + $CURRENT_MAP.centerX, -obj.height / 2 + offsetY + $CURRENT_MAP.centerY, obj.width, obj.height]], false, [1, color, 0, 0, 0, 0], true));\n  },\n  update: function update(renderAvatars) {\n    if (renderAvatars) {\n      this.avatarsVertices = [];\n    } else {\n      this.objectsVertices = [];\n    }\n    for (var o in $CURRENT_MAP.obstacles) {\n      var obj = $CURRENT_MAP.obstacles[o];\n      if (obj.type === \"avatar\" && !renderAvatars || obj.type !== \"avatar\" && renderAvatars || obj.hideFromMap) continue;\n      var _obj$trans2 = obj.trans,\n        offsetX = _obj$trans2.offsetX,\n        offsetY = _obj$trans2.offsetY,\n        color = this.colorCodes[obj.name] || this.colorCodes[obj.type] || 1;\n      if (renderAvatars) {\n        this.avatarsVertices = this.avatarsVertices.concat((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.cut)([[-obj.width / 2 + offsetX + $CURRENT_MAP.centerX, -obj.height / 2 + offsetY + $CURRENT_MAP.centerY, obj.width, obj.height]], false, [1, obj.state.hostile ? 3 : 2, 0, 0, 0, 0], true));\n        continue;\n      }\n      this.objectsVertices = this.objectsVertices.concat((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.cut)([[-obj.width / 2 + offsetX + $CURRENT_MAP.centerX, -obj.height / 2 + offsetY + $CURRENT_MAP.centerY, obj.width, obj.height]], false, [1, color, 0, 0, 0, 0], true));\n    }\n    if (this.waypoint.set) this.updateWaypoint($CURRENT_MAP.centerX, $CURRENT_MAP.centerY, this.waypoint.x, this.waypoint.y);\n  },\n  addPinpoint: function addPinpoint(x, y) {\n    this.pinpointVertices.push(-8, 16, 1, 0.5, x, y, 0, 0, 8, 16, 1, 0.5, x, y, 1, 0, -8, -16, 1, 0.5, x, y, 0, 1, 8, 16, 1, 0.5, x, y, 1, 0, -8, -16, 1, 0.5, x, y, 0, 1, 8, -16, 1, 0.5, x, y, 1, 1);\n  },\n  render: function render() {\n    if (this.useInteractiveDisplay) {\n      renderDisplayContext(mdContext2, mdContextProperties2);\n      return;\n    }\n    renderDisplayContext(mdContext1, mdContextProperties1);\n  }\n};\n$MAP_DISPLAY.addPinpoint(0, 0);\n$MAP_DISPLAY.addPinpoint(-377, 80);\n$MAP_DISPLAY.addPinpoint(-190, 240);\n$MAP_DISPLAY.addPinpoint(-159, 220);\n$MAP_DISPLAY.addPinpoint(61, 172);\n$MAP_DISPLAY.addPinpoint(-412, 55);\n$MAP_DISPLAY.addPinpoint(-313, 39);\n$MAP_DISPLAY.addPinpoint(-297, 8);\n$MAP_DISPLAY.addPinpoint(-268, 75);\n$MAP_DISPLAY.addPinpoint(-292, -51);\n$MAP_DISPLAY.addPinpoint(-327, -19);\n$MAP_DISPLAY.addPinpoint(-544, -184);\n$MAP_DISPLAY.addPinpoint(-480, 136);\n$MAP_DISPLAY.addPinpoint(-416, 170);\n$MAP_DISPLAY.addPinpoint(-304, 177);\n$MAP_DISPLAY.addPinpoint(-340, 192);\n$MAP_DISPLAY.addPinpoint(-409, 114);\n$MAP_DISPLAY.addPinpoint(-253, -192);\n$MAP_DISPLAY.addPinpoint(-220, -178);\n$MAP_DISPLAY.addPinpoint(-49, 54);\n$MAP_DISPLAY.addPinpoint(338, 144);\n$MAP_DISPLAY.addPinpoint(408, 86);\n$MAP_DISPLAY.addPinpoint(398, -151);\n$MAP_DISPLAY.addPinpoint(451, -172);\n$MAP_DISPLAY.addPinpoint(543, 167);\nvar mdContextProperties1 = setDisplayContext(mdContext1);\nvar mdContextProperties2 = setDisplayContext(mdContext2);\nwindow.updateDisplayViewport = function () {\n  var _interactiveMap$getBo = interactiveMap.getBoundingClientRect(),\n    width = _interactiveMap$getBo.width,\n    height = _interactiveMap$getBo.height;\n  var maxVi = Math.max(width, height),\n    minVi = Math.min(width, height);\n  var viRatio = maxVi / minVi;\n  var viUnitX = maxVi === width ? 0.01 + 0.01 / viRatio : 0.01 + 0.01 * viRatio;\n  var viUnitY = maxVi === width ? 0.01 + 0.01 * viRatio : 0.01 + 0.01 / viRatio;\n  mdContext2.uniform1f(mdContextProperties2.locations.worldUnitX, viUnitX);\n  mdContext2.uniform1f(mdContextProperties2.locations.worldUnitY, viUnitY);\n  interactiveMap.width = width * 2;\n  interactiveMap.height = height * 2;\n  mdContext2.viewport(0, 0, width * 2, height * 2);\n};\nfunction toggleWaypoint(e) {\n  if (e) e.preventDefault();\n  if ($MAP_DISPLAY.useWorldMap) return;\n  if (!$MAP_DISPLAY.waypoint.set) {\n    $MAP_DISPLAY.waypoint.x = $CURRENT_MAP.centerX + $MAP_DISPLAY.displayOffset.x;\n    $MAP_DISPLAY.waypoint.y = $CURRENT_MAP.centerY - $MAP_DISPLAY.displayOffset.y;\n    $MAP_DISPLAY.waypoint.map = $CURRENT_MAP.id;\n    $MAP_DISPLAY.waypoint.set = true;\n    setWaypointButton.innerText = \"Unset Waypoint\";\n  } else {\n    $MAP_DISPLAY.waypoint.set = false;\n    $MAP_DISPLAY.waypoint.map = undefined;\n    setWaypointButton.innerText = \"Set Waypoint\";\n  }\n}\nfunction updateMapData() {\n  document.querySelector(\"#map-name\").innerText = $CURRENT_MAP.name;\n  document.querySelector(\"#map-dimensions\").innerText = \"\".concat($CURRENT_MAP.width, \"x\").concat($CURRENT_MAP.height);\n  document.querySelector(\"#map-population\").innerText = $CURRENT_MAP.avatarCount;\n  document.querySelector(\"#map-rooms\").innerText = $CURRENT_MAP.SUB_MAP_COUNT;\n  document.querySelector(\"#map-pickups\").innerText = Object.keys($CURRENT_MAP.pickups).length;\n  document.querySelector(\"#map-objects\").innerText = $CURRENT_MAP.objectCount;\n}\nvar mapZoomInButton = document.querySelector(\"#map-zoom-in\");\nvar mapZoomOutButton = document.querySelector(\"#map-zoom-out\");\nfunction mapZoomIn(e) {\n  e.preventDefault();\n  if (!$MAP_DISPLAY.useWorldMap) {\n    if ($MAP_DISPLAY.interactiveScale - 0.5 > 1) $MAP_DISPLAY.interactiveScale -= 0.5;\n  } else {\n    if ($MAP_DISPLAY.worldMapScale - 0.5 > 1) $MAP_DISPLAY.worldMapScale -= 0.5;\n  }\n}\nfunction mapZoomOut(e) {\n  e.preventDefault();\n  if (!$MAP_DISPLAY.useWorldMap) {\n    if ($MAP_DISPLAY.interactiveScale + 0.5 < 15) $MAP_DISPLAY.interactiveScale += 0.5;\n  } else {\n    if ($MAP_DISPLAY.worldMapScale + 0.5 < 15) $MAP_DISPLAY.worldMapScale += 0.5;\n  }\n}\nmapZoomInButton.ontouchstart = mapZoomIn;\nmapZoomInButton.onmousedown = mapZoomIn;\nmapZoomOutButton.ontouchstart = mapZoomOut;\nmapZoomOutButton.onmousedown = mapZoomOut;\n\n/* HUNGER DISPLAY */\n\nwindow.updateHungerDisplay = function () {\n  document.querySelector(\"#hunger\").innerText = $AVATAR.state.vitals.hunger;\n  document.querySelector(\"#hunger\").style.color = $AVATAR.state.vitals.hunger ? \"white\" : \"#e30f00\";\n};\n\n/* MONEY DISPLAY */\n\nvar moneyDisplay = document.querySelector(\"#money\");\nmoneyDisplay.innerText = Math.round(localStorage.getItem(\"player-cash\")) || 0;\nwindow.updateMoneyDisplay = function () {\n  moneyDisplay.innerText = Math.round($AVATAR.inventory.cash);\n  localStorage.setItem(\"player-cash\", $AVATAR.inventory.cash.toString());\n};\n\n/* AMMO BUTTON AND RELOAD FUNCTIONALITY */\n\nvar ammoDisplay = document.querySelector(\"#ammo-display\");\nammoDisplay.onmousedown = function () {\n  $AVATAR.reload();\n};\nammoDisplay.ontouchstart = function () {\n  $AVATAR.reload();\n};\nwindow.showAmmoDisplay = function () {\n  ammoDisplay.style.display = \"flex\";\n};\nwindow.hideAmmoDisplay = function () {\n  ammoDisplay.style.display = \"none\";\n};\nwindow.disableReloadDisplay = function () {\n  document.querySelector(\"#ammo-display img\").style.display = \"none\";\n  document.querySelector(\"#ammo-display div\").style.display = \"flex\";\n};\nwindow.enableReloadDisplay = function () {\n  document.querySelector(\"#ammo-display div\").style.display = \"none\";\n  document.querySelector(\"#ammo-display img\").style.display = \"block\";\n};\nwindow.updateAmmoDisplay = function () {\n  var gun = $AVATAR.state.equippedItems.mainTool;\n  ammoDisplay.querySelector(\"p\").style.color = gun.constructor._properties.capacity === gun.reloadProgress ? \"#e30f00\" : \"white\";\n  ammoDisplay.querySelector(\"p\").innerText = \"\".concat(Math.min(gun.constructor._properties.capacity - gun.reloadProgress, $AVATAR.inventory.weapons[gun.name].ammo), \"/\").concat($AVATAR.inventory.weapons[gun.name].ammo);\n};\n\n/* ARMOUR DISPLAY FUNCTIONALITY */\n\nvar armourDisplay = document.querySelector(\"#armour-display\");\nwindow.showArmourDisplay = function () {\n  armourDisplay.style.display = \"flex\";\n};\nwindow.hideArmourDisplay = function () {\n  armourDisplay.style.display = \"none\";\n};\nwindow.updateArmourDisplay = function () {\n  armourDisplay.querySelector(\"p\").innerText = \"\".concat($AVATAR.state.armour);\n};\n\n/* HEALTH BAR DISPLAY */\n\n$HEALTH_BAR = document.querySelector(\"#healthbar\");\nwindow.updateHealthBar = function () {\n  $HEALTH_BAR.style.width = \"\".concat(Math.round((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.aisofb)($AVATAR.state.vitals.health, 100)), \"%\");\n};\n\n/* JOYSTICK AND BUTTON CONTROLS LOGIC */\n\n$JOYSTICK_L = new _Joystick_(true, joystickSizes.left, fixedJoysticks, joystickPositions.left);\nif ($IS_MOBILE) {\n  var moveJoystick = function moveJoystick(e) {\n    var m = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    e.preventDefault();\n    var coords0 = e.touches[0],\n      coords1 = e.touches[1];\n    if ($JOYSTICK_L.base.anchored) {\n      configure($JOYSTICK_L);\n    } else if (m) {\n      for (var i = 0; i < 2; i++) {\n        var _e$touches$i, _e$touches$i2;\n        if (((_e$touches$i = e.touches[i]) === null || _e$touches$i === void 0 ? void 0 : _e$touches$i.clientX) < window.innerWidth / 2 && ((_e$touches$i2 = e.touches[i]) === null || _e$touches$i2 === void 0 ? void 0 : _e$touches$i2.identifier) !== $JOYSTICK_R.id) {\n          $JOYSTICK_L.id = e.touches[i].identifier;\n          configure($JOYSTICK_L);\n          break;\n        }\n      }\n    }\n    if ($JOYSTICK_R.base.anchored) {\n      configure($JOYSTICK_R);\n    } else if (m) {\n      for (var _i = 0; _i < 2; _i++) {\n        var _e$touches$_i, _e$touches$_i2;\n        if (((_e$touches$_i = e.touches[_i]) === null || _e$touches$_i === void 0 ? void 0 : _e$touches$_i.clientX) > window.innerWidth / 2 && ((_e$touches$_i2 = e.touches[_i]) === null || _e$touches$_i2 === void 0 ? void 0 : _e$touches$_i2.identifier) !== $JOYSTICK_L.id) {\n          $JOYSTICK_R.id = e.touches[_i].identifier;\n          configure($JOYSTICK_R);\n          break;\n        }\n      }\n    }\n    function configure(stick) {\n      var touch;\n      for (var _i2 = 0; _i2 < 2; _i2++) {\n        var _e$touches$_i3;\n        if (((_e$touches$_i3 = e.touches[_i2]) === null || _e$touches$_i3 === void 0 ? void 0 : _e$touches$_i3.identifier) === stick.id) {\n          touch = e.touches[_i2];\n          break;\n        }\n      }\n      if (!touch) return;\n      var pageX = touch.clientX;\n      var pageY = touch.clientY;\n      var pX = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.aofb)((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.aisofb)(pageX, window.innerWidth), worldWidth) - worldWidth / 2;\n      var pY = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.aofb)(100 - (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.aisofb)(pageY, window.innerHeight), worldHeight) - worldHeight / 2;\n      var _stick$base = stick.base,\n        width = _stick$base.width,\n        height = _stick$base.height,\n        x = _stick$base.x,\n        y = _stick$base.y,\n        radius = _stick$base.radius;\n      var d = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(x, y, pX, pY),\n        t = radius / d;\n      if (stick.base.anchored) {\n        if (d > radius) {\n          pX = (1 - t) * x + t * pX;\n          pY = (1 - t) * y + t * pY;\n        }\n      }\n      if (d < radius || stick.base.anchored || !stick.fixed) stick.translate(pX, pY);\n    }\n  };\n  $JOYSTICK_R = new _Joystick_(false, joystickSizes.right, fixedJoysticks, joystickPositions.right);\n  $RELOAD_BUTTON = new _Button_(textures.controls.reloadbutton, textures.controls.reloadbuttonactive, worldWidth / 2 - 38, -(worldHeight / 2) + 20, function (pX, pY) {\n    if (this.enabled) {\n      $AVATAR.reload();\n      this.enabled = false;\n    }\n  }, 8.5, 1.4, false, [-6, 6, 1, 0, 0, 6, 6, 1, 0.9375, 0, -6, -6, 1, 0, 0.9375, 6, 6, 1, 0.9375, 0, -6, -6, 1, 0, 0.9375, 6, -6, 1, 0.9375, 0.9375]);\n  $RELOAD_BUTTON.hidden = true;\n  $AVATAR_MODE_BUTTON = new _Button_(textures.controls.avatarmode2, textures.controls.avatarmode1, worldWidth / 2 - 10, worldHeight / 2 - 15, function (pX, pY) {\n    this.on = !this.on;\n    $AVATAR.state.hostile = !$AVATAR.state.hostile;\n  }, 9, 1.5, true, [-4.5, 4.5, 1, 0, 0, 4.5, 4.5, 1, 0.703125, 0, -4.5, -4.5, 1, 0, 0.703125, 4.5, 4.5, 1, 0.703125, 0, -4.5, -4.5, 1, 0, 0.703125, 4.5, -4.5, 1, 0.703125, 0.703125]);\n  $AVATAR_MODE_BUTTON.hidden = true;\n  $DROP_ITEM_BUTTON = new _Button_(textures.controls.dropitem1, textures.controls.dropitem2, worldWidth / 2 - 35, -(worldHeight / 2) + 30, function (pX, pY) {\n    $AVATAR.drop();\n  }, 8.5, 1.4, false, [-6, 6, 1, 0, 0, 6, 6, 1, 0.9375, 0, -6, -6, 1, 0, 0.9375, 6, 6, 1, 0.9375, 0, -6, -6, 1, 0, 0.9375, 6, -6, 1, 0.9375, 0.9375]);\n  $DROP_ITEM_BUTTON.hidden = true;\n  canvas.addEventListener(\"touchstart\", function (e) {\n    e.preventDefault();\n    var touch = e.touches[e.touches.length - 1];\n    var pageX = touch.clientX;\n    var pageY = touch.clientY;\n    var pX = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.aofb)((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.aisofb)(pageX, window.innerWidth), worldWidth) - worldWidth / 2;\n    var pY = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.aofb)(100 - (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.aisofb)(pageY, window.innerHeight), worldHeight) - worldHeight / 2;\n    var buttonPress = false;\n    var _iterator = _createForOfIteratorHelper($CONTROLS),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var i = _step.value;\n        if (i instanceof _Button_ && !i.hidden && i.enabled && (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(pX, pY, i.trans.offsetX, i.trans.offsetY) < i.radius) {\n          i.active = true;\n          i.touch = touch.identifier;\n          i.action(pX, pY);\n          buttonPress = true;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    if (!buttonPress && !$ACTIVE_DIALOGUE_PARTY) moveJoystick(e);\n  });\n  canvas.addEventListener(\"touchmove\", function (e) {\n    moveJoystick(e, false);\n  });\n  canvas.addEventListener(\"touchend\", function (e) {\n    e.preventDefault();\n    var ids = Object.values(e.touches).reduce(function (a, v) {\n      a.push(v.identifier);\n    }, []);\n    var _iterator2 = _createForOfIteratorHelper($CONTROLS),\n      _step2;\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _i3 = _step2.value;\n        if (_i3 instanceof _Button_ && _i3.active && !_i3.hidden && !(ids !== null && ids !== void 0 && ids.includes(_i3.touch))) {\n          _i3.active = false;\n          if (_i3.postAction) _i3.postAction();\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n    var uL = false,\n      uR = false;\n    for (var i = 0; i < 2; i++) {\n      var _e$touches$i3, _e$touches$i4;\n      if (((_e$touches$i3 = e.touches[i]) === null || _e$touches$i3 === void 0 ? void 0 : _e$touches$i3.identifier) === $JOYSTICK_L.id) {\n        uL = true;\n      }\n      if (((_e$touches$i4 = e.touches[i]) === null || _e$touches$i4 === void 0 ? void 0 : _e$touches$i4.identifier) === $JOYSTICK_R.id) {\n        uR = true;\n      }\n    }\n    if (!uL) {\n      $AVATAR.state.walking = false;\n      $JOYSTICK_L.unanchor();\n      $JOYSTICK_L.fix();\n      $JOYSTICK_L.id = undefined;\n    }\n    if (!uR) {\n      if ($CURRENT_MAP.move) $AVATAR.holsterWeapon();\n      $JOYSTICK_R.unanchor();\n      $JOYSTICK_R.fix();\n      $JOYSTICK_R.id = undefined;\n    }\n  });\n  window.addEventListener(\"contextmenu\", function (e) {\n    e.preventDefault();\n  });\n}\n\n/* INVENTORY CONTROLS AND MANAGMENT LOGIC */\n\nvar inventoryButton = document.querySelectorAll(\".controls-container__button\").item(0);\nvar inventoryCloseButton = document.querySelector(\".main-inventory__close\");\nvar inventoryWindow = document.querySelector(\"#main-inventory\");\nvar inventoryItemsContainer = document.querySelector(\"#main-items-container\");\nwindow.onerror = function (message, source, lineNumber, colNumber) {\n  sendSystemMessage(\"\".concat(message, \" (\").concat(source, \")(\").concat(lineNumber, \":\").concat(colNumber, \")\"));\n};\nfunction closeInventory(e) {\n  e.preventDefault();\n  inventoryWindow.style.display = \"none\";\n}\nfunction openInventory(e) {\n  e.preventDefault();\n  inventoryWindow.style.display = \"grid\";\n  updateDescription();\n}\ninventoryCloseButton.onmousedown = closeInventory;\ninventoryButton.onmousedown = openInventory;\ninventoryCloseButton.ontouchstart = closeInventory;\ninventoryButton.ontouchstart = openInventory;\n\n/* CONSOLE CONTROLS AND COMMAND LOGIC */\n\nvar consoleContainer = document.querySelector(\"#console\");\nvar consoleButton = document.querySelector(\"#console-button\");\nvar consoleCloseButton = document.querySelector(\"#console-close\");\nvar consoleSendButton = document.querySelector(\"#console-send\");\nvar consoleInput = document.querySelector(\"#console-input\");\nvar consoleMessages = document.querySelector(\".console__messages\");\nvar consoleMessageTemplate = document.querySelector(\"#message-template\");\nfunction openConsole(e) {\n  e.preventDefault();\n  consoleContainer.style.display = \"grid\";\n}\nfunction closeConsole(e) {\n  e.preventDefault();\n  consoleContainer.style.display = \"none\";\n}\nvar holdEnter = false;\nconsoleInput.onkeydown = function (e) {\n  if (e.key === \"Enter\" && !holdEnter) {\n    sendMessage(e);\n  } else if (e.key === \"Shift\") {\n    holdEnter = true;\n  }\n};\nconsoleInput.onkeyup = function (e) {\n  if (e.key === \"Shift\") holdEnter = false;\n};\nvar itemPlacementQueue = [];\nvar placeItemButton = document.querySelector(\"#place-item\");\nplaceItemButton.onmousedown = placeItem;\nplaceItemButton.ontouchstart = placeItem;\nfunction placeItem(e) {\n  e.preventDefault();\n  if (itemPlacementQueue.length) {\n    var item = itemPlacementQueue.pop();\n    item.translate($MAP_DISPLAY.displayOffset.x, -$MAP_DISPLAY.displayOffset.y);\n    $CURRENT_MAP.link(item);\n    if (!itemPlacementQueue.length) placeItemButton.style.display = \"none\";\n  }\n}\nfunction sendSystemMessage() {\n  var content = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"Script ran sucessfully.\";\n  var msg = consoleMessageTemplate.content.cloneNode(true);\n  if (content.length < 1) return;\n  msg.querySelector(\"div\").setAttribute(\"class\", \"console__message--system\");\n  msg.querySelector(\"strong\").innerHTML = \"WTRW@System: \";\n  msg.querySelector(\"i\").innerText = content;\n  consoleMessages.appendChild(msg);\n}\nfunction evalCommand(cmd) {\n  var command = cmd.replace(\"cmd\", \"\").trim(),\n    result = \"command not found!\",\n    prefix = command.split(\" \")[0];\n  command = command.replace(prefix, \"\").trim();\n  switch (prefix) {\n    case \"maximize\":\n      {\n        document.body.requestFullscreen();\n      }\n      ;\n      break;\n    case \"run\":\n      {\n        try {\n          result = eval(command);\n        } catch (err) {\n          result = \"Couldn't run that script! Error: \".concat(err);\n        }\n      }\n      ;\n      break;\n    case \"carry\":\n      {\n        $CURRENT_MAP.CARRY = $CURRENT_MAP.locateObject(command) || undefined;\n        result = \"Carrying \".concat(command || \"nothing\", \"...\");\n        $MAP_DISPLAY.update();\n      }\n      ;\n      break;\n    case \"add\":\n      {\n        try {\n          $CURRENT_MAP.link(eval(\"new \" + command.replace(\"add\", \"\").trim()));\n          result = command + \" added.\";\n        } catch (err) {\n          result = \"Object not found!\";\n        }\n      }\n      ;\n      break;\n    case \"place\":\n      {\n        try {\n          itemPlacementQueue.unshift(eval(\"new \" + command.replace(\"add\", \"\").trim()));\n          placeItemButton.style.display = \"inline-block\";\n          result = command + \" added to placement queue. Use '+' on the selected map coordinates.\";\n        } catch (err) {\n          result = \"Object not found!\";\n        }\n      }\n      ;\n      break;\n    case \"delete\":\n      {\n        try {\n          var obj = $CURRENT_MAP.locateObject(command);\n          obj[\"delete\"]();\n          result = \"\".concat(command, \" (\").concat(obj.id, \") deleted.\");\n        } catch (err) {\n          result = \"Object not found!\";\n        }\n      }\n      ;\n      break;\n    case \"godmode\":\n      {\n        $AVATAR.state.invinsible = !$AVATAR.state.invinsible;\n        result = \"God mode \" + ($AVATAR.state.invinsible ? \"activated.\" : \"deactivated.\");\n      }\n      ;\n      break;\n    case \"printlayout\":\n      {\n        result = $MAP.printLayoutScript();\n      }\n      ;\n      break;\n    case \"noclip\":\n      {\n        noclip = !noclip;\n        result = \"No clip \" + (noclip ? \"activated.\" : \"deactivated.\");\n      }\n      ;\n      break;\n    case \"day\":\n      {\n        $MAP.darkness = 1;\n        $MAP.lighting = false;\n        result = \"Daytime active.\";\n      }\n      ;\n      break;\n    case \"evening\":\n      {\n        $MAP.darkness = 2;\n        $MAP.lighting = false;\n        result = \"Evening active.\";\n      }\n      ;\n      break;\n    case \"night\":\n      {\n        $MAP.darkness = 5;\n        $MAP.lighting = true;\n        result = \"Nighttime active.\";\n      }\n  }\n  return result;\n}\nfunction sendMessage(e) {\n  e.preventDefault();\n  var content = consoleInput.value;\n  var msg = consoleMessageTemplate.content.cloneNode(true);\n  msg.querySelector(\"div\").addEventListener(\"dblclick\", function (e) {\n    consoleInput.value = content;\n  });\n  if (content.length < 1) return;\n  msg.querySelector(\"strong\").innerHTML = $AVATAR.character + \"@User: \";\n  msg.querySelector(\"i\").innerText = content;\n  consoleMessages.appendChild(msg);\n  if (content.trim().startsWith(\"cmd\")) {\n    setTimeout(function () {\n      sendSystemMessage(evalCommand(content));\n    }, 500);\n  }\n  consoleInput.value = \"\";\n}\nconsoleCloseButton.onmousedown = closeConsole;\nconsoleButton.onmousedown = openConsole;\nconsoleCloseButton.ontouchstart = closeConsole;\nconsoleButton.ontouchstart = openConsole;\nconsoleSendButton.ontouchstart = sendMessage;\nconsoleSendButton.onmousedown = sendMessage;\n\n/* DATA BINDING FOR INVENTORY */\n\nvar itemDescriptions = {\n  \"default\": \"<strong>Pro tip:</strong> Click an item to select it and see a full description of its properties and usage.</br></br>Oh wait, what items? You're a noob lol.\",\n  \"glock 20\": \"<h3><u>GLOCK 20</u></h3>A simple, compact and lightweight handgun built for self defense and petty crime. Careful, there's no saftey!\",\n  \"usp 45\": \"<h3><u>USP 45</u></h3>Powerful high powered scilenced pistol. The most elegible option for a slick assassin.\",\n  \"nxr 44 mag\": \"<h3><u>NXR_44_MAG</u></h3>High powered, large revolver. Go play sheriff with this I guess. This town ain't big enough for...nevermind.\",\n  \"gp k100\": \"<h3><u>GP K100</u></h3>This quick and reliable handgun features good capacity, and a basic scilencer and is perfect for a good ol' gun-fight.\",\n  \"kc 357\": \"<h3><u>KC 357</u></h3> Need a reliable side arm? Try this lightweight revolver with good durability and a long lasting build. Sensetive trigger so, watch it bro. Don't really have anything funny to say here.\",\n  \"kitchen knife\": \"<h3><u>Kitchen Knife</u></h3>Your run-of-the-mill, single edged cooking knife. Go use this to slice some veggies...or somthing else.\",\n  \"assassins knife\": \"<h3><u>Assassin's Knife</u></h3>One of the sharpest of blades with a fine edge built for the hand of a professional. This top-of-the-line knife can make quick work of any enemy with minimal armour.\",\n  \"syringe\": \"<h3><u>Syringe</u></h3>Basic medicine for rapid health regain and quick injection.\",\n  \"med kit\": \"<h3><u>Med Kit</u></h3>A fully equipped medical store, good for thorough treatment of injuries and heavy health regain. A couple of these on hand will keep your medicinal needs covered. And I know what you're thinking..the answer is no. You can't drink rubbing alcohol.\",\n  \"grey backpack\": \"<h3><u>Grey Backpack</u></h3>A light backpack. Essential for collecting useful items to ensure survival.\",\n  \"white backpack\": \"<h3><u>White Backpack</u></h3>Intermediate backpack with high capacity. A preference for many tacticians.\",\n  \"black backpack\": \"<h3><u>Black Backpack</u></h3>This heavy-duty, military-grade backpack is the clear choice for professionals of all expertises. Never again will you have to decide between what to keep, and what to drop.\",\n  \"ammo box\": \"<h3><u>Ammo Box</u></h3>Best for a quick bullet refill in the middle of intense battel. Use this to increase the bullet count for the currently equipped weapon by a given factor.\",\n  \"multi ammo box\": \"<h3><u>Multi Ammo Box</u></h3>An army grade ammunition store, with a variety of calibers for all types of arms. Use this to increase the bullet count for all weapons in your inventory by a given factor.\",\n  \"basic armour\": \"<h3><u>Basic Armour</u></h3>Lightweight armour built for protection from close calls and bullet scathes. I mean, I wouldn't go looking for trouble or anything with this on though. Then again, pfft, do whatever you want lol.\",\n  \"mercenary armour\": \"<h3><u>Mercenary Armour</u></h3>Top quality armour made to withstand large blows. Used by soldiers, mercenaries, S.W.A.T and now you. You're in the big leagues now son.\",\n  \"swat armour\": \"<h3><u>S.W.A.T Armour</u></h3>Ok, I now I know I used S.W.A.T. in the description for the mercenary armour but, hear me out...I ran out of soldier names. Look just, point is, this is some decent armour. not the best, but decent. Shut up and wear it.\",\n  \"dx 9\": \"<h3><u>DX 9</u></h3> High end handgun built to be light and reliable, and features a light trigger which alows for no hesitation. High capacity, quick fire and decent damage. You can't beat it!\",\n  \"x6 91\": \"<h3><u>X6 91</u></h3> A powerful firearm made for battling multiple foes with heavy armour. Moderate capacity, sky-high damage. Try this one on for size.\",\n  \"noss 7\": \"<h3><u>NOSS 7</u></h3> This scilenced pistol puts most others to shame by taking speed to the next level. It features an extended magazine allowing for a split-second mag dump of epic proportions. Not very accurate though.\",\n  \"furs 55\": \"<h3><u>FURS 55</u></h3> Try on this oldschool revolver pulled right out of a Clint Eastwood film. Good capacity and acceptable damage. Take of that what you will.\",\n  \"remote detonator\": \"<h3><u>Remote Detonator</u></h3> Use <i>\\\"Equip\\\"</i> on this object to detonate all currently armed explosives. </br></br>Don't lose this, because you'll only ever need one.\",\n  \"remote explosive\": \"<h3><u>Remote Explosive</u></h3> A powerful nitroglycerin based explosive, used for building traps and taking out a large number of enemies.</br></br> Use <i>\\\"Equip\\\"</i> to arm and place the explosive. You'll need a <i>Remote Detonator</i> to detonate it.</br></br>Careful, you'll want to stand way back.\",\n  \"proximity explosive\": \"<h3><u>Proximity Explosive</u></h3> A powerful C-4 based explosive rigged to a motion sensor.</br></br> Use <i>\\\"Equip\\\"</i> to arm and place the explosive. Any enemy within close proximity will cause the explosive to detonate, no remote needed. </br></br>The sensor will be active 3 seconds after being armed.\",\n  \"combat knife\": \"<h3><u>Combat Knife</u></h3> A common choice of melee used by hunters to mercy-kill deer, and by soldiers to get the job done. Features good durabilty, and good damage.\",\n  \"money\": \"<h3><u>Money</u></h3> It's money. If you need me to explain any further you probably shouldn't have it. Use <i>\\\"Equip\\\"</i> to add the specified amount into your cash balance.\",\n  \"candy bar\": \"<h3><u>Candy Bar</u></h3> A milk-chocolate bar..pretty self explanitory I feel. If you get feel the need to use this description, you honestly have brain-rot. Eat the candy bar and shut up.\",\n  \"stubby shotgun\": \"<h3><u>Stubby Shotgun</u></h3> High powered shotgun with reliable aim and minimal recoil. A common and effective weapon for defending against intruders in homes and small-businesses.\"\n};\nvar equippedIndex = Infinity,\n  selectedIndex = undefined,\n  lastIndex = undefined,\n  switchMode = false;\nfunction equipSlot(i, markSlot) {\n  if (!markSlot && !$AVATAR.equipItem(i)) return;\n  if ($IS_MOBILE && $AVATAR.state.equippedItems.mainTool && $AVATAR.state.equippedItems.mainTool.type === \"gun\") {\n    $AVATAR.drawWeapon();\n  }\n  if (equippedIndex < 5) {\n    quickAccessItems.item(equippedIndex).classList.remove(\"controls-container__item--equipped\");\n  }\n  inventoryItems.item(equippedIndex).style.borderBottom = \"none\";\n  if (equippedIndex !== i) {\n    if (i < 5) {\n      quickAccessItems.item(i).classList.add(\"controls-container__item--equipped\");\n    }\n    inventoryItems.item(i).style.borderBottom = \"3px solid white\";\n    equippedIndex = i;\n  } else {\n    $AVATAR.unequipItem(i);\n    equippedIndex = Infinity;\n  }\n  updateDescription();\n}\nvar quickAccessItems = document.querySelectorAll(\".controls-container__item\");\nvar inventoryItems = document.querySelectorAll(\".main-inventory__item\");\nvar controlButtonsContainer = document.querySelector(\".main-inventory__buttons\");\nvar itemDescription = document.querySelector(\".main-inventory__description-content\");\nvar descriptionImage = document.querySelector(\".description__image\");\nvar controlSwitchButton;\nwindow.updateDescription = function (getDescription, itemData) {\n  var item = itemData || $AVATAR.inventory.items[lastIndex];\n  var itemName = item === null || item === void 0 ? void 0 : item.name;\n  var d = itemDescriptions[itemName] || itemDescriptions[\"default\"];\n  if (item && d) {\n    if (item.type === \"cash\") {\n      d = d + \"</br></br><strong>Amount _____ \".concat(item.amount, \"$</strong>\");\n    } else if (item.type === \"armour\") {\n      var integrity = item.constructor._properties.integrity;\n      d = d + \"</br></br><strong>Strength _____ \".concat(item.constructor._properties.strength, \"</strong>\");\n      if (getDescription) return d;\n      d = d.concat(item === $AVATAR.state.equippedItems.armour ? \"<br><br><i>Equipped</i>\" : \"<br><br><i>Not Equipped</i>\");\n      d = d.concat(\"</br><i>Integrity \".concat(Math.round((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.aisofb)(item.integrity, item.constructor._properties.strength)), \"%</i>\"));\n    } else if (item.type === \"ammo\") {\n      var increase = item.constructor._properties.increase;\n      d = d + \"</br></br><strong>Increase _____ capacity x\".concat(increase, \"</strong>\");\n      if (getDescription) return d;\n      d = d.concat(item.used ? \"<br><br><i>Empty</i>\" : \"<br><br><i>Full</i>\");\n    } else if (item.type === \"medicine\") {\n      var regain = item.constructor._properties.regain;\n      d = d + \"</br></br><strong>Regain _____ \".concat(regain, \"</strong>\");\n      if (getDescription) return d;\n      d = d.concat(item.used ? \"<br><br><i>Used</i>\" : \"<br><br><i>New</i>\");\n    } else if (item.type === \"backpack\") {\n      var capacity = item.constructor._properties.capacity;\n      d = d + \"</br></br><strong>Capacity _____ \".concat(capacity, \"</strong>\");\n      if (getDescription) return d;\n      d = d.concat(item === $AVATAR.state.equippedItems.mainTool || item === $AVATAR.state.equippedItems.accessory1 ? \"<br><br><i>Equipped</i>\" : \"<br><br><i>Not Equipped</i>\");\n    } else if (item.type === \"knife\") {\n      var _item$constructor$_pr = item.constructor._properties,\n        damage = _item$constructor$_pr.damage,\n        durability = _item$constructor$_pr.durability;\n      d = d + \"</br></br><strong>Damage _____ \".concat(damage, \"</strong></br><strong>Durability _____ \").concat(durability, \"</strong>\");\n      if (getDescription) return d;\n      d = d.concat(item === $AVATAR.state.equippedItems.mainTool || item === $AVATAR.state.equippedItems.accessory1 ? \"<br><br><i>Equipped</i>\" : \"</br></br><i>Not Equipped</i>\");\n      d = d.concat(\"</br><i>Integrity \".concat(item.integrity, \"%</i>\"));\n    } else if (item.type === \"gun\") {\n      var _item$constructor$_pr2 = item.constructor._properties,\n        _damage = _item$constructor$_pr2.damage,\n        fireRate = _item$constructor$_pr2.fireRate,\n        accuracy = _item$constructor$_pr2.accuracy,\n        _capacity = _item$constructor$_pr2.capacity;\n      d = d + \"</br></br><strong>Damage _____ \".concat(item.shotgun ? _damage * item.constructor._properties.bulletCombo : _damage, \"</strong></br><strong>Fire Rate _____ \").concat(fireRate, \"</strong></br><strong>Accuracy _____ \").concat(accuracy, \"</strong></br><strong>Capacity _____ \").concat(_capacity, \"</strong>\");\n      if (getDescription) return d;\n      d = d.concat(item === $AVATAR.state.equippedItems.mainTool || item === $AVATAR.state.equippedItems.accessory1 ? \"<br><br><i>Equipped</i>\" : \"<br><br><i>Not Equipped</i>\");\n    } else if (item.type === \"food\") {\n      d = d + \"</br></br><strong>Nutrition _____ \".concat(item.nutrition, \"</strong></br><strong>Regain _____ \").concat(item.regain, \"</strong>\");\n      if (getDescription) return d;\n    }\n  }\n  if (getDescription) return d;\n  itemDescription.innerHTML = d;\n  descriptionImage.src = itemName ? \"/public/images/icons/\".concat(itemName.replaceAll(\" \", \"_\"), \"_icon.png\") : \"/public/images/logo1.png\";\n  showDescription();\n};\nfunction selectSlot(i) {\n  if (!$AVATAR.inventory.items[i] && !switchMode || selectedIndex === i) return;\n  controlButtonsContainer.style.opacity = 1;\n  inventoryItems.item(selectedIndex).style.backgroundColor = \"rgba(0,0,0,0.2)\";\n  inventoryItems.item(i).style.backgroundColor = \"rgba(0,0,0,0.4)\";\n  if (switchMode) {\n    var _$AVATAR$inventory$it, _$AVATAR$inventory$it2;\n    $AVATAR.inventory.swapItems(selectedIndex, i);\n    updateInventoryItem(selectedIndex, (_$AVATAR$inventory$it = $AVATAR.inventory.items[selectedIndex]) === null || _$AVATAR$inventory$it === void 0 ? void 0 : _$AVATAR$inventory$it.name);\n    updateInventoryItem(i, (_$AVATAR$inventory$it2 = $AVATAR.inventory.items[i]) === null || _$AVATAR$inventory$it2 === void 0 ? void 0 : _$AVATAR$inventory$it2.name);\n    if (equippedIndex === i) {\n      equipSlot(selectedIndex, true);\n    } else if (equippedIndex === selectedIndex) {\n      equipSlot(i, true);\n    }\n    controlSwitchButton.style.opacity = 1;\n    switchMode = false;\n  }\n  selectedIndex = i;\n  lastIndex = i;\n  updateDescription();\n}\nwindow.setInventoryCapacity = function (n) {\n  if (n > $AVATAR.inventory.slots) {\n    var _loop = function _loop(i) {\n      var slot = document.createElement(\"div\");\n      slot.setAttribute(\"id\", \"inv-item-\".concat(i));\n      slot.setAttribute(\"class\", \"main-inventory__item\");\n      slot.onclick = function () {\n        selectSlot(i - 1);\n      };\n      inventoryItemsContainer.appendChild(slot);\n    };\n    for (var i = $AVATAR.inventory.slots + 1; i <= n; i++) {\n      _loop(i);\n    }\n  } else if (n < $AVATAR.inventory.slots) {\n    for (var _i4 = n; _i4 < $AVATAR.inventory.slots; _i4++) {\n      inventoryItems.item(_i4).remove();\n    }\n  }\n  inventoryItems = document.querySelectorAll(\".main-inventory__item\");\n  $AVATAR.inventory.slots = n;\n  if (selectedIndex > 14) selectedIndex = 0;\n};\nvar _loop2 = function _loop2(i) {\n  quickAccessItems.item(i).ontouchstart = function (e) {\n    e.preventDefault();\n    equipSlot(i);\n  };\n  quickAccessItems.item(i).onclick = function (e) {\n    e.preventDefault();\n    equipSlot(i);\n  };\n};\nfor (var i = 0; i < quickAccessItems.length; i++) {\n  _loop2(i);\n}\nvar _loop3 = function _loop3(_i5) {\n  inventoryItems.item(_i5).onclick = function () {\n    selectSlot(_i5);\n  };\n};\nfor (var _i5 = 0; _i5 < inventoryItems.length; _i5++) {\n  _loop3(_i5);\n}\nwindow.updateInventoryItem = function (slot, name, drop) {\n  if (!drop) {\n    if (name) {\n      if (slot < 5) quickAccessItems.item(slot).style.backgroundImage = \"url(\\\"/public/images/icons/\".concat(name.replaceAll(\" \", \"_\"), \"_icon.png\\\")\");\n      inventoryItems.item(slot).style.backgroundImage = \"url(\\\"/public/images/icons/\".concat(name.replaceAll(\" \", \"_\"), \"_icon.png\\\")\");\n    } else {\n      if (slot < 5) quickAccessItems.item(slot).style.backgroundImage = \"none\";\n      inventoryItems.item(slot).style.backgroundImage = \"none\";\n    }\n    return;\n  }\n  controlButtonsContainer.style.opacity = 0.5;\n  inventoryItems.item(slot).style.backgroundImage = \"none\";\n  inventoryItems.item(slot).style.borderBottom = \"none\";\n  inventoryItems.item(slot).style.backgroundColor = \"rgba(0,0,0,0.2)\";\n  if (slot < 5) {\n    quickAccessItems.item(slot).classList.remove(\"controls-container__item--equipped\");\n    quickAccessItems.item(slot).style.backgroundImage = \"none\";\n  }\n  selectedIndex = undefined;\n};\nvar controlEquipButton = document.querySelector(\".main-inventory__controls-equip\");\ncontrolEquipButton.onclick = function () {\n  equipSlot(selectedIndex);\n};\nvar helpContainer = document.querySelector(\".main-inventory__help\");\nvar statsContainer = document.querySelector(\".main-inventory__stats\");\nvar descriptionContainer = document.querySelector(\".main-inventory__description\");\nvar viewStatsButton = document.querySelector(\".main-inventory__view-stats\");\nfunction showHelp() {\n  descriptionContainer.style.display = \"none\";\n  statsContainer.style.display = \"none\";\n  helpContainer.style.display = \"block\";\n}\nfunction showDescription() {\n  descriptionContainer.style.display = \"block\";\n  helpContainer.style.display = \"none\";\n  statsContainer.style.display = \"none\";\n  viewStatsButton.innerText = \"View Stats\";\n}\nfunction showStats() {\n  descriptionContainer.style.display = \"none\";\n  helpContainer.style.display = \"none\";\n  statsContainer.style.display = \"block\";\n  viewStatsButton.innerText = \"View Desc\";\n}\nviewStatsButton.onclick = function () {\n  if (statsContainer.style.display !== \"block\") {\n    showStats();\n    return;\n  }\n  showDescription();\n};\nvar controlHelpButton = document.querySelector(\".main-inventory__controls-help\");\ncontrolHelpButton.onclick = function () {\n  if (helpContainer.style.display !== \"block\") {\n    showHelp();\n    return;\n  }\n  showDescription();\n};\nvar controlDropButton = document.querySelector(\".main-inventory__controls-drop\");\ncontrolDropButton.onclick = function () {\n  controlSwitchButton.style.opacity = 1;\n  switchMode = false;\n  if (equippedIndex === selectedIndex) equippedIndex = Infinity;\n  $AVATAR.dropItem(selectedIndex);\n  lastIndex = undefined;\n  updateDescription();\n};\ncontrolSwitchButton = document.querySelector(\".main-inventory__controls-switch\");\ncontrolSwitchButton.onclick = function () {\n  if (selectedIndex === undefined) return;\n  if (!switchMode) {\n    switchMode = true;\n    controlSwitchButton.style.opacity = 0.5;\n    return;\n  }\n  controlSwitchButton.style.opacity = 1;\n  switchMode = false;\n};\nvar switchMap = document.querySelector(\"#switch-map\");\nvar goTo = document.querySelector(\"#goto\");\nswitchMap.onclick = function () {\n  if (!$MAP_DISPLAY.useWorldMap) {\n    $MAP_DISPLAY.useWorldMap = true;\n    goTo.style.opacity = 1;\n    setWaypointButton.style.opacity = 0.5;\n    switchMap.innerText = \"Local Map\";\n    updateCoordinates($MAP_DISPLAY.worldMapOffset.x, $MAP_DISPLAY.worldMapOffset.y);\n    return;\n  }\n  $MAP_DISPLAY.useWorldMap = false;\n  goTo.style.opacity = 0.5;\n  setWaypointButton.style.opacity = 1;\n  switchMap.innerText = \"World Map\";\n  updateCoordinates($MAP_DISPLAY.displayOffset.x, $MAP_DISPLAY.displayOffset.y);\n};\n\n// Store controls\n\nvar storeContainer = document.querySelector(\"#store\");\nvar closeStoreButton = document.querySelector(\"#store-close\");\nvar storeItemsContainer = document.querySelector(\".store__items\");\nvar storeItemTemplate = document.querySelector(\"#store-item-template\");\nvar currentStoreItem = undefined;\nvar highlightedItem = undefined;\ncloseStoreButton.onclick = function () {\n  toggleStore();\n};\nwindow.toggleStore = function (s) {\n  if (storeContainer.style.display !== \"grid\") {\n    document.querySelector(\"#store-cash\").innerHTML = \"$\" + Math.round($AVATAR.inventory.cash);\n    document.querySelector(\"#store-bank\").innerHTML = \"$\" + Math.round($AVATAR.inventory.bank);\n    storeContainer.style.display = \"grid\";\n    return;\n  }\n  storeContainer.style.display = \"none\";\n};\nfunction updateStore(s) {\n  var items = storeItemsContainer.querySelectorAll(\".store__item\");\n  currentStoreItem = s[0];\n  items.forEach(function (item) {\n    item.remove();\n  });\n  var _iterator3 = _createForOfIteratorHelper(s),\n    _step3;\n  try {\n    var _loop4 = function _loop4() {\n      var i = _step3.value;\n      var content = storeItemTemplate.content.cloneNode(true);\n      var storeItem = content.querySelector(\".store__item\");\n      if (i === s[0]) {\n        highlightedItem = storeItem;\n        highlightedItem.style.background = \"#555555\";\n      }\n      storeItem.addEventListener(\"click\", function () {\n        updateCheckout(i);\n        highlightedItem.style.background = \"rgba(0,0,0,0.2)\";\n        highlightedItem = storeItem;\n        highlightedItem.style.background = \"#555555\";\n      });\n      content.querySelector(\".item__icon\").setAttribute(\"src\", \"/public/images/icons/\".concat(i.name.replaceAll(\" \", \"_\"), \"_icon.png\"));\n      content.querySelector(\".item__name\").innerText = i.title;\n      storeItemsContainer.appendChild(content);\n    };\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      _loop4();\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n  updateCheckout(currentStoreItem);\n}\nvar itemTitle = document.querySelector(\".item__title u\");\nvar itemPrice = document.querySelector(\".item__price\");\nvar itemIcon = document.querySelector(\".info-box__icon\");\nvar itemTotal = document.querySelector(\"#item-total\");\nvar infoDescription = document.querySelector(\".info-box__description p\");\nvar itemQuantity = document.querySelector(\"#item-quantity\");\nvar purchaseButton = document.querySelector(\"#item-purchase\");\nfunction updateCheckout(storeItem) {\n  var name = storeItem.name,\n    title = storeItem.title,\n    price = storeItem.price,\n    type = storeItem.type;\n  itemTitle.innerText = title;\n  itemPrice.innerText = \"Price: $\" + price;\n  itemIcon.src = \"/public/images/icons/\".concat(name.replaceAll(\" \", \"_\"), \"_icon.png\");\n  itemTotal.innerText = \"$\" + price;\n  infoDescription.innerHTML = updateDescription(true, {\n    name: name,\n    type: type,\n    constructor: type === \"gun\" ? eval(title.replaceAll(\" \", \"_\")) : eval(title.replaceAll(\" \", \"\"))\n  });\n  itemQuantity.value = 1;\n  currentStoreItem = storeItem;\n}\npurchaseButton.onclick = function () {\n  var total = currentStoreItem.price * itemQuantity.value;\n  if (itemQuantity.value > $AVATAR.inventory.slots - $AVATAR.inventory.count) {\n    toggleNote(\"Sorry, we couldn't make this purchase! You dont have enough space in your inventory to hold these items. Try dropping a few things you dont need.\");\n    return;\n  } else if (total > $AVATAR.inventory.cash) {\n    toggleNote(\"You dont have enough money to make this purchase! Try getting a job you bum.\");\n    return;\n  }\n  for (var _i6 = 0; _i6 < itemQuantity.value; _i6++) {\n    $AVATAR.addItem(eval(\"new \".concat(currentStoreItem.title.replaceAll(\" \", \"\"))));\n  }\n  $AVATAR.inventory.cash -= total;\n  updateMoneyDisplay();\n  toggleNote(\"Purchase successful! \".concat(itemQuantity.value, \" \").concat(currentStoreItem.name + (itemQuantity.value > 1 ? \"s were\" : \" was\"), \" added to your inventory.\"));\n};\nfunction updatePurchaseTotal() {\n  itemTotal.innerText = \"$\" + Math.round(itemQuantity.value * currentStoreItem.price);\n}\nitemQuantity.addEventListener(\"change\", updatePurchaseTotal);\nitemQuantity.addEventListener(\"keydown\", updatePurchaseTotal);\nupdateStore([{\n  name: \"glock 20\",\n  title: \"GLOCK_20\",\n  price: 50.00,\n  type: \"gun\"\n}, {\n  name: \"kc 357\",\n  title: \"KC_357\",\n  price: 45.50,\n  type: \"gun\"\n}, {\n  name: \"gp k100\",\n  title: \"GP_K100\",\n  price: 130.15,\n  type: \"gun\"\n}, {\n  name: \"nxr 44 mag\",\n  title: \"NXR_44_MAG\",\n  price: 233.50,\n  type: \"gun\"\n}, {\n  name: \"usp 45\",\n  title: \"USP_45\",\n  price: 543.50,\n  type: \"gun\"\n}, {\n  name: \"dx 9\",\n  title: \"DX_9\",\n  price: 385.00,\n  type: \"gun\"\n}, {\n  name: \"noss 7\",\n  title: \"NOSS_7\",\n  price: 880.50,\n  type: \"gun\"\n}, {\n  name: \"x6 91\",\n  title: \"X6_91\",\n  price: 742.30,\n  type: \"gun\"\n}, {\n  name: \"furs 55\",\n  title: \"FURS_55\",\n  price: 190.00,\n  type: \"gun\"\n}, {\n  name: \"x6 91\",\n  title: \"X6_91\",\n  price: 742.30,\n  type: \"gun\"\n}, {\n  name: \"kitchen knife\",\n  title: \"KitchenKnife\",\n  price: 30.50,\n  type: \"knife\"\n}, {\n  name: \"combat knife\",\n  title: \"CombatKnife\",\n  price: 95.00,\n  type: \"knife\"\n}, {\n  name: \"assassins knife\",\n  title: \"AssassinsKnife\",\n  price: 420.90,\n  type: \"knife\"\n}, {\n  name: \"remote explosive\",\n  title: \"RemoteExplosive\",\n  price: 120.00,\n  type: \"explosive\"\n}, {\n  name: \"proximity explosive\",\n  title: \"ProximityExplosive\",\n  price: 185.00,\n  type: \"explosive\"\n}, {\n  name: \"remote detonator\",\n  title: \"RemoteDetonator\",\n  price: 342.00,\n  type: \"detonator\"\n}, {\n  name: \"basic armour\",\n  title: \"BasicArmour\",\n  price: 480.50,\n  type: \"armour\"\n}, {\n  name: \"swat armour\",\n  title: \"SwatArmour\",\n  price: 620.00,\n  type: \"armour\"\n}, {\n  name: \"mercenary armour\",\n  title: \"MercenaryArmour\",\n  price: 852.50,\n  type: \"armour\"\n}, {\n  name: \"grey backpack\",\n  title: \"GreyBackpack\",\n  price: 240.00,\n  type: \"backpack\"\n}, {\n  name: \"white backpack\",\n  title: \"WhiteBackpack\",\n  price: 380.40,\n  type: \"backpack\"\n}, {\n  name: \"black backpack\",\n  title: \"BlackBackpack\",\n  price: 520.00,\n  type: \"backpack\"\n}, {\n  name: \"syringe\",\n  title: \"Syringe\",\n  price: 42.00,\n  type: \"medicine\"\n}, {\n  name: \"med kit\",\n  title: \"MedKit\",\n  price: 120.00,\n  type: \"medicine\"\n}]);\n\n// note logic \n\nvar noteContainer = document.querySelector(\".note-wrapper\");\nvar closeNoteButton = document.querySelector(\"#note-close\");\nvar noteContent = document.querySelector(\".note__content p\");\nvar noteTitle = document.querySelector(\".note__content-title\");\nvar noteImage = document.querySelector(\".note__image\");\nvar noteCallback;\nwindow.toggleNote = function (content, callback, title, image) {\n  noteContent.innerText = content;\n  noteContainer.style.display = \"flex\";\n  noteCallback = callback;\n  if (title) {\n    noteTitle.style.display = \"block\";\n    noteTitle.innerText = title;\n  } else {\n    noteTitle.style.display = \"none\";\n  }\n  if (image) {\n    noteImage.style.display = \"block\";\n    noteImage.src = image;\n  } else {\n    noteImage.style.display = \"none\";\n  }\n};\ncloseNoteButton.addEventListener(\"click\", function () {\n  noteContainer.style.display = \"none\";\n  if (noteCallback) noteCallback();\n});\n\n// desktop controls \nif (!$IS_MOBILE) {\n  var desktopMovementFactor = 1;\n  var movementX = 0,\n    movementY = 0;\n  var wKeyDown = false,\n    aKeyDown = false,\n    sKeyDown = false,\n    dKeyDown = false,\n    position = {\n      x: $JOYSTICK_L.position.x,\n      y: $JOYSTICK_L.position.y\n    };\n  $JOYSTICK_L.desktopMovementCallback = function () {\n    if ($ACTIVE_DIALOGUE_PARTY) return;\n    if (wKeyDown && position.y) {\n      position.y += desktopMovementFactor;\n    }\n    if (aKeyDown) {\n      position.x -= desktopMovementFactor;\n    }\n    if (sKeyDown) {\n      position.y -= desktopMovementFactor;\n    }\n    if (dKeyDown) {\n      position.x += desktopMovementFactor;\n    }\n    var _$JOYSTICK_L$base = $JOYSTICK_L.base,\n      width = _$JOYSTICK_L$base.width,\n      height = _$JOYSTICK_L$base.height,\n      x = _$JOYSTICK_L$base.x,\n      y = _$JOYSTICK_L$base.y,\n      radius = _$JOYSTICK_L$base.radius;\n    var d = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(x, y, position.x, position.y),\n      t = radius / d;\n    if ($JOYSTICK_L.base.anchored) {\n      if (d > radius) {\n        position.x = (1 - t) * x + t * position.x;\n        position.y = (1 - t) * y + t * position.y;\n      }\n    }\n    if (d < radius || $JOYSTICK_L.base.anchored || $JOYSTICK_L.fixed) $JOYSTICK_L.translate(position.x, position.y);\n  };\n  var controlKeys = [\"w\", \"a\", \"s\", \"d\"];\n  var mouseDown = false;\n  window.addEventListener(\"keydown\", function (e) {\n    if (consoleContainer.style.display === \"grid\") return;\n    if (e.code === \"KeyR\" && $AVATAR.state.equippedItems.mainTool) {\n      $AVATAR.reload();\n    }\n    if (e.code === \"KeyQ\") {\n      toggleGrab(e);\n    }\n    if (e.code === \"KeyP\") {\n      $PAUSED = !$PAUSED;\n    }\n    if ($AVATAR.state.equippedItems.mainTool && e.code === \"KeyX\") {\n      $AVATAR.dropItem($AVATAR.state.equippedItems.mainTool.slot);\n    }\n    if (/\\d/.test(e.key.toLowerCase())) {\n      equipSlot(Number(e.key) ? Number(e.key - 1) : 9);\n    }\n    if (!controlKeys.includes(e.key.toLowerCase())) return;\n    eval(\"\".concat(e.key.toLowerCase(), \"KeyDown = \", true));\n    $JOYSTICK_L.desktopMovementAnimation.active = true;\n  });\n  window.addEventListener(\"keyup\", function (e) {\n    if (!controlKeys.includes(e.key.toLowerCase())) return;\n    eval(\"\".concat(e.key.toLowerCase(), \"KeyDown = \", false));\n    if (!wKeyDown && !aKeyDown && !sKeyDown && !dKeyDown) {\n      $AVATAR.state.walking = false;\n      $JOYSTICK_L.desktopMovementAnimation.active = false;\n      $JOYSTICK_L.unanchor();\n      $JOYSTICK_L.fix();\n      position = {\n        x: $JOYSTICK_L.position.x,\n        y: $JOYSTICK_L.position.y\n      };\n    }\n  });\n  canvas.addEventListener(\"mousemove\", function (e) {\n    if ($AVATAR.state.equippedItems.mainTool || $AVATAR.state.punching || $AVATAR.state.sitting || mouseDown) $AVATAR.trans.rotation = Math.atan2(e.pageX - window.innerWidth / 2, e.pageY - window.innerHeight / 2) + 3.14159;\n  });\n  canvas.addEventListener(\"mousedown\", function () {\n    mouseDown = true;\n    if (!$AVATAR.state.pickup.current) {\n      if ($AVATAR.state.armed) {\n        $AVATAR.state.fire = true;\n      } else if ($AVATAR.state.melee) {\n        $AVATAR.state.stabbing = true;\n      } else {\n        $AVATAR.state.punching = true;\n      }\n    } else {\n      $AVATAR.state.fire = false;\n      $AVATAR.state.punching = false;\n      $AVATAR.state.stabbing = false;\n    }\n  });\n  canvas.addEventListener(\"mouseup\", function () {\n    mouseDown = false;\n    $AVATAR.state.fire = false;\n    $AVATAR.state.punching = false;\n    $AVATAR.state.stabbing = false;\n  });\n}\nwindow.updateCoordsDisplay = function () {\n  document.querySelector(\"#coords\").innerText = \"x:\".concat(Math.round($CURRENT_MAP.centerX), \", y:\").concat(Math.round($CURRENT_MAP.centerY));\n};\nvar settings = document.querySelector(\"#settings\");\nvar openSettingsButton = document.querySelectorAll(\".controls-container__button\").item(3);\nvar closeSettingsButton = document.querySelector(\"#settings-close\");\nfunction openSettings() {\n  settings.style.display = \"grid\";\n}\nfunction closeSettings() {\n  settings.style.display = \"none\";\n}\nopenSettingsButton.onclick = openSettings;\ncloseSettingsButton.onclick = closeSettings;\nvar onscreenMapStyleSetting = document.querySelector(\"#onscreen-map-style-setting\");\nvar zoomSetting = document.querySelector(\"#zoom-setting\");\nvar graphicsQualitySetting = document.querySelector(\"#graphics-quality-setting\");\nvar musicSetting = document.querySelector(\"#music-setting\");\nvar volumeSetting = document.querySelector(\"#volume-setting\");\nvar joysticksSetting = document.querySelector(\"#joysticks-setting\");\nvar fullscreenSetting = document.querySelector(\"#fullscreen-setting\");\nvar pauseSetting = document.querySelector(\"#pause-setting\");\nfullscreenSetting.onchange = function () {\n  if (fullscreenSetting.checked) {\n    document.body.requestFullscreen();\n    return;\n  }\n  document.exitFullscreen();\n};\npauseSetting.onchange = function () {\n  $PAUSED = pauseSetting.checked;\n};\nonscreenMapStyleSetting.selectedIndex = $SETTINGS.onscreenMapStyle;\nzoomSetting.value = $SETTINGS.zoom;\ngraphicsQualitySetting.selectedIndex = $SETTINGS.graphicsQuality;\nmusicSetting.selectedIndex = $SETTINGS.music;\nvolumeSetting.value = $SETTINGS.volume * 10;\njoysticksSetting.selectedIndex = $SETTINGS.joysticks;\nonscreenMapStyleSetting.onchange = function () {\n  $SETTINGS.onscreenMapStyle = onscreenMapStyleSetting.selectedIndex;\n  updateOnscreenMapStyle();\n  saveSettings();\n};\nmusicSetting.onchange = function () {\n  $SETTINGS.music = musicSetting.selectedIndex;\n  if ($SETTINGS.music) {\n    currentTrack.pause();\n  } else {\n    playNextTrack();\n  }\n  saveSettings();\n};\nzoomSetting.onchange = function () {\n  $SETTINGS.zoom = zoomSetting.value;\n  updateZoom();\n  saveSettings();\n};\nvolumeSetting.onchange = function () {\n  $SETTINGS.volume = volumeSetting.value / 10;\n  currentTrack.volume = $SETTINGS.volume;\n  saveSettings();\n};\ngraphicsQualitySetting.onchange = function () {\n  $SETTINGS.graphicsQuality = graphicsQualitySetting.selectedIndex;\n  saveSettings();\n};\njoysticksSetting.onchange = function () {\n  $SETTINGS.joysticks = joysticksSetting.selectedIndex;\n  saveSettings();\n};\nfunction saveSettings() {\n  localStorage.setItem(\"game-settings\", JSON.stringify($SETTINGS));\n}\nfunction updateOnscreenMapStyle() {\n  document.querySelector(\"#mapInfo\").style.background = [\"none\", \"red\", \"#00ff15\", \"#00fffb\", \"#ff8800\"][$SETTINGS.onscreenMapStyle];\n}\nfunction updateZoom() {\n  scale = zoomSetting.value;\n}\nfunction applySettings() {\n  updateOnscreenMapStyle();\n}\napplySettings();\n\n// title card\n\nvar titleCard = document.querySelector(\".title-card-wrapper\");\nvar titlePlayButton = document.querySelector(\".play__button\");\nvar usernameInput = document.querySelector(\".play__username\");\nusernameInput.value = $PLAYER_NAME || \"\";\nvar scoreDisplay = document.querySelector(\".content__score\");\nvar highscoreDisplay = document.querySelector(\".content__highscore\");\nhighscoreDisplay.innerText = \"Your current highscore: \".concat($HIGHSCORE);\ntitlePlayButton.onclick = function () {\n  if ($CONTENT_LOADED && !$TRANSITIONING) {\n    titleCard.style.display = \"none\";\n    localStorage.setItem(\"player-name\", usernameInput.value);\n    $AVATAR.nameObj.update(usernameInput.value);\n    $AVATAR.character = usernameInput.value;\n    $AVATAR.respawn();\n  }\n};\nvar titleSettingsButton = document.querySelector(\".buttons__settings\");\ntitleSettingsButton.onclick = openSettings;\nvar titleHelpButton = document.querySelector(\".buttons__help\");\ntitleHelpButton.onclick = function () {\n  toggleNote(\"Use 'E' on desktop or the 'A' button to interact with an object. The 'A' button at the right of the screen will light up with an interaction is avaliable when you're close enough to an object. This works when for things like entering doors or adding items to your inventory.\", function () {\n    toggleNote(\"Use 'Q' on desktop or the 'G' button to pick up an item to carry it. Use the key a second time to drop the item.\", function () {\n      toggleNote(\"Kill as many enemies as you can to gain the highest score possible. Use the gun store at the top of the map to buy and access more weapons.\\n\\nGo into settings to see more information on controls.\", false, \"Objective.\", \"/public/images/combat.png\");\n    }, \"Grabbing\", \"/public/images/grabbing.png\");\n  }, \"Interaction\", \"/public/images/interaction.png\");\n};\nwindow.returnToTitleScreen = function () {\n  titleCard.style.display = \"flex\";\n  $SPECTATING = true;\n  noclip = true;\n  if ($SCORE > $HIGHSCORE) {\n    $HIGHSCORE = $SCORE;\n    localStorage.setItem(\"highscore\", $HIGHSCORE);\n  }\n  scoreDisplay.innerText = \"Your score: \".concat($SCORE);\n  scoreDisplay.style.display = \"block\";\n  highscoreDisplay.innerText = \"Your current highscore: \".concat($HIGHSCORE);\n  $SCORE = 0;\n  $AVATAR.state.kills = 0;\n  $AVATAR.state.totalDamage = 0;\n};\nwindow.togglePressEDisplay = function (show) {\n  document.querySelector(\"#press-e\").style.display = show ? \"block\" : \"none\";\n};\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } }, 1);\n\n//# sourceURL=webpack://WTRW/./src/scripts/controls.js?");

/***/ }),

/***/ "./src/scripts/dialogue.js":
/*!*********************************!*\
  !*** ./src/scripts/dialogue.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/scripts/lib.js */ \"./src/scripts/lib.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar _dialogues = {\n  defaultOptions: []\n};\n\n// AVATAR: rep = reputation, con = confidence  CHARACTER: rel = relationship, agr = agreeableness\nvar Option = /*#__PURE__*/function () {\n  function Option(content) {\n    var con = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var rep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var rel = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    var dest = arguments.length > 4 ? arguments[4] : undefined;\n    var label = arguments.length > 5 ? arguments[5] : undefined;\n    var action = arguments.length > 6 ? arguments[6] : undefined;\n    var disable = arguments.length > 7 ? arguments[7] : undefined;\n    _classCallCheck(this, Option);\n    this.content = content;\n    this.dest = dest;\n    this.con = con;\n    this.rep = rep;\n    this.rel = rel;\n    this.action = action;\n    this.enabled = !disable;\n    this.label = label;\n  }\n  return _createClass(Option, [{\n    key: \"getContent\",\n    value: function getContent(prevOption) {\n      if (this.content instanceof Function) {\n        return this.content(prevOption);\n      }\n      return this.content;\n    }\n  }, {\n    key: \"getDestination\",\n    value: function getDestination(prevOption) {\n      if (this.dest instanceof Function) {\n        return this.dest(prevOption);\n      }\n      return this.dest;\n    }\n  }]);\n}();\nvar OptionModule = /*#__PURE__*/function () {\n  function OptionModule() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    _classCallCheck(this, OptionModule);\n    this.options = _dialogues.defaultOptions.concat(options);\n    _dialogues[String(Object.keys(_dialogues).length - 1)] = this;\n  }\n  return _createClass(OptionModule, [{\n    key: \"addOption\",\n    value: function addOption(option) {\n      this.options.push(option);\n    }\n  }, {\n    key: \"selectOption\",\n    value: function selectOption(index) {\n      return this.options[index];\n    }\n  }]);\n}();\nvar ResponseModule = /*#__PURE__*/function () {\n  function ResponseModule(responses) {\n    _classCallCheck(this, ResponseModule);\n    this.responses = responses || [];\n    _dialogues[String(Object.keys(_dialogues).length - 1)] = this;\n  }\n  return _createClass(ResponseModule, [{\n    key: \"addResponse\",\n    value: function addResponse(response) {\n      this.responses.push(response);\n    }\n  }]);\n}();\nvar Phrase = /*#__PURE__*/function () {\n  function Phrase(phrases) {\n    _classCallCheck(this, Phrase);\n    this.phrases = phrases;\n  }\n  return _createClass(Phrase, [{\n    key: \"getPhrase\",\n    value: function getPhrase() {\n      return this.phrases[(0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(this.phrases.length)].content;\n    }\n  }]);\n}();\n_dialogues.defaultOptions.push(new Option(\"...\", 0, 0, 0, false, \"[exit]\", function () {\n  endDialogue();\n}));\nvar begging = new Phrase([new Option(\"Got any cash?\", 0, 0, 0, [0, 0]), new Option(\"Hi! Spare some change?\", 0, 0, 0, [0, 0]), new Option(\"Hey, do you have any change on you?\", 0, 0, 0, [0, 0])]);\nvar g1 = new OptionModule();\ng1.addOption(new Option(function () {\n  return begging.getPhrase();\n}, 0, 0, 0, [1, 0], \"[beg for money]\"));\nvar beggingResponse = new Phrase([new Option(\"Fuck off!\", 0, 0, 0, [0, 0]), new Option(\"Sorry, I don't have anything on me.\", 0, 0, 0, [0, 0]), new Option(\"Leave me alone, druggie.\", 0, 0, 0, [0, 0]), new Option(\"I don't carry cash man.\", 0, 0, 0, [0, 0]), new Option(\"Go get a job...\", 0, 0, 0, [0, 0])]);\nvar g2 = new ResponseModule();\ng2.addResponse(new Option(function () {\n  return beggingResponse.getPhrase();\n}, 0, 0, 0, [0, 0]));\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_dialogues);\n\n//# sourceURL=webpack://WTRW/./src/scripts/dialogue.js?");

/***/ })

}]);