"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkWTRW"] = self["webpackChunkWTRW"] || []).push([["objects.chunk"],{

/***/ "./src/scripts/objects.js":
/*!********************************!*\
  !*** ./src/scripts/objects.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AmmoBox: () => (/* binding */ AmmoBox),\n/* harmony export */   AssassinsKnife: () => (/* binding */ AssassinsKnife),\n/* harmony export */   Atm: () => (/* binding */ Atm),\n/* harmony export */   Avatar: () => (/* binding */ Avatar),\n/* harmony export */   Barrier: () => (/* binding */ Barrier),\n/* harmony export */   BasicArmour: () => (/* binding */ BasicArmour),\n/* harmony export */   Bench: () => (/* binding */ Bench),\n/* harmony export */   BlackBackpack: () => (/* binding */ BlackBackpack),\n/* harmony export */   BlackBook: () => (/* binding */ BlackBook),\n/* harmony export */   Bot: () => (/* binding */ Bot),\n/* harmony export */   Bullet: () => (/* binding */ Bullet),\n/* harmony export */   BulletShell: () => (/* binding */ BulletShell),\n/* harmony export */   Bush: () => (/* binding */ Bush),\n/* harmony export */   CandyBar: () => (/* binding */ CandyBar),\n/* harmony export */   Chair: () => (/* binding */ Chair),\n/* harmony export */   ClassicShotgun: () => (/* binding */ ClassicShotgun),\n/* harmony export */   CombatKnife: () => (/* binding */ CombatKnife),\n/* harmony export */   ConvenienceStore: () => (/* binding */ ConvenienceStore),\n/* harmony export */   DX_9: () => (/* binding */ DX_9),\n/* harmony export */   Door: () => (/* binding */ Door),\n/* harmony export */   DownwardLight: () => (/* binding */ DownwardLight),\n/* harmony export */   FURS_55: () => (/* binding */ FURS_55),\n/* harmony export */   Floor: () => (/* binding */ Floor),\n/* harmony export */   GLOCK_20: () => (/* binding */ GLOCK_20),\n/* harmony export */   GP_K100: () => (/* binding */ GP_K100),\n/* harmony export */   Gazebo: () => (/* binding */ Gazebo),\n/* harmony export */   Grass: () => (/* binding */ Grass),\n/* harmony export */   Grass2: () => (/* binding */ Grass2),\n/* harmony export */   GreyBackpack: () => (/* binding */ GreyBackpack),\n/* harmony export */   GunStore: () => (/* binding */ GunStore),\n/* harmony export */   HeavyShotgun: () => (/* binding */ HeavyShotgun),\n/* harmony export */   House1: () => (/* binding */ House1),\n/* harmony export */   House2: () => (/* binding */ House2),\n/* harmony export */   KC_357: () => (/* binding */ KC_357),\n/* harmony export */   KitchenKnife: () => (/* binding */ KitchenKnife),\n/* harmony export */   Laptop: () => (/* binding */ Laptop),\n/* harmony export */   LightBush: () => (/* binding */ LightBush),\n/* harmony export */   LightSwitch: () => (/* binding */ LightSwitch),\n/* harmony export */   MedKit: () => (/* binding */ MedKit),\n/* harmony export */   MercenaryArmour: () => (/* binding */ MercenaryArmour),\n/* harmony export */   MetalFence: () => (/* binding */ MetalFence),\n/* harmony export */   MetalFenceVertical: () => (/* binding */ MetalFenceVertical),\n/* harmony export */   MixedBush: () => (/* binding */ MixedBush),\n/* harmony export */   Money: () => (/* binding */ Money),\n/* harmony export */   MultiAmmoBox: () => (/* binding */ MultiAmmoBox),\n/* harmony export */   NOSS_7: () => (/* binding */ NOSS_7),\n/* harmony export */   NXR_44_MAG: () => (/* binding */ NXR_44_MAG),\n/* harmony export */   PickupRing: () => (/* binding */ PickupRing),\n/* harmony export */   PicnicTable: () => (/* binding */ PicnicTable),\n/* harmony export */   Pinboard: () => (/* binding */ Pinboard),\n/* harmony export */   Plus100: () => (/* binding */ Plus100),\n/* harmony export */   ProximityExplosive: () => (/* binding */ ProximityExplosive),\n/* harmony export */   RemoteDetonator: () => (/* binding */ RemoteDetonator),\n/* harmony export */   RemoteExplosive: () => (/* binding */ RemoteExplosive),\n/* harmony export */   Road: () => (/* binding */ Road),\n/* harmony export */   RoadCorner: () => (/* binding */ RoadCorner),\n/* harmony export */   RoadDouble: () => (/* binding */ RoadDouble),\n/* harmony export */   RoadQuadCorner: () => (/* binding */ RoadQuadCorner),\n/* harmony export */   RoadRail: () => (/* binding */ RoadRail),\n/* harmony export */   RoadRailVertical: () => (/* binding */ RoadRailVertical),\n/* harmony export */   RoadSign: () => (/* binding */ RoadSign),\n/* harmony export */   RoadTriCorner: () => (/* binding */ RoadTriCorner),\n/* harmony export */   RobberShotgun: () => (/* binding */ RobberShotgun),\n/* harmony export */   Rocks1: () => (/* binding */ Rocks1),\n/* harmony export */   Rocks2: () => (/* binding */ Rocks2),\n/* harmony export */   Sensor: () => (/* binding */ Sensor),\n/* harmony export */   Shed: () => (/* binding */ Shed),\n/* harmony export */   SmallPlant: () => (/* binding */ SmallPlant),\n/* harmony export */   SmallTable: () => (/* binding */ SmallTable),\n/* harmony export */   SteakAndFries: () => (/* binding */ SteakAndFries),\n/* harmony export */   Stopper: () => (/* binding */ Stopper),\n/* harmony export */   StreetLight: () => (/* binding */ StreetLight),\n/* harmony export */   StubbyShotgun: () => (/* binding */ StubbyShotgun),\n/* harmony export */   SwatArmour: () => (/* binding */ SwatArmour),\n/* harmony export */   Syringe: () => (/* binding */ Syringe),\n/* harmony export */   Table: () => (/* binding */ Table),\n/* harmony export */   Text: () => (/* binding */ Text),\n/* harmony export */   Tile: () => (/* binding */ Tile),\n/* harmony export */   Trigger: () => (/* binding */ Trigger),\n/* harmony export */   USP_45: () => (/* binding */ USP_45),\n/* harmony export */   UrbanFence: () => (/* binding */ UrbanFence),\n/* harmony export */   UrbanFenceHalf: () => (/* binding */ UrbanFenceHalf),\n/* harmony export */   UrbanFenceVertical: () => (/* binding */ UrbanFenceVertical),\n/* harmony export */   Vendor1: () => (/* binding */ Vendor1),\n/* harmony export */   VisibleBarrier: () => (/* binding */ VisibleBarrier),\n/* harmony export */   WhiteBackpack: () => (/* binding */ WhiteBackpack),\n/* harmony export */   WhiteBook: () => (/* binding */ WhiteBook),\n/* harmony export */   Whiteboard: () => (/* binding */ Whiteboard),\n/* harmony export */   X6_91: () => (/* binding */ X6_91),\n/* harmony export */   _Ammo_: () => (/* binding */ _Ammo_),\n/* harmony export */   _Blade_: () => (/* binding */ _Blade_),\n/* harmony export */   _Building_: () => (/* binding */ _Building_),\n/* harmony export */   _BulletClusterClient_: () => (/* binding */ _BulletClusterClient_),\n/* harmony export */   _BulletCluster_: () => (/* binding */ _BulletCluster_),\n/* harmony export */   _Button_: () => (/* binding */ _Button_),\n/* harmony export */   _Food_: () => (/* binding */ _Food_),\n/* harmony export */   _Gun_: () => (/* binding */ _Gun_),\n/* harmony export */   _InstancedClusterClient_: () => (/* binding */ _InstancedClusterClient_),\n/* harmony export */   _InstancedCluster_: () => (/* binding */ _InstancedCluster_),\n/* harmony export */   _Joystick_: () => (/* binding */ _Joystick_),\n/* harmony export */   _LineMatrix_: () => (/* binding */ _LineMatrix_),\n/* harmony export */   _Map_: () => (/* binding */ _Map_),\n/* harmony export */   _Medicine_: () => (/* binding */ _Medicine_),\n/* harmony export */   _MixedStaticClusterClient_: () => (/* binding */ _MixedStaticClusterClient_),\n/* harmony export */   _MixedStaticCluster_: () => (/* binding */ _MixedStaticCluster_),\n/* harmony export */   _Object_: () => (/* binding */ _Object_),\n/* harmony export */   _Pickup_: () => (/* binding */ _Pickup_),\n/* harmony export */   _StaticClusterClient_: () => (/* binding */ _StaticClusterClient_),\n/* harmony export */   _StaticCluster_: () => (/* binding */ _StaticCluster_)\n/* harmony export */ });\n/* harmony import */ var _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/scripts/lib.js */ \"./src/scripts/lib.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _construct(t, e, r) { if (_isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments); var o = [null]; o.push.apply(o, e); var p = new (t.bind.apply(t, o))(); return r && _setPrototypeOf(p, r.prototype), p; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e; if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); return e; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nfunction _inherits(t, e) { if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, \"prototype\", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar pathfinder = new Worker(\"/src/scripts/pathfinder.js\");\npathfinder.registerMap = function (map) {\n  pathfinder.postMessage({\n    requestType: 1,\n    mapId: map.id,\n    nodes: map.GRAPH.nodes\n  });\n};\npathfinder.requestPath = function (avatar, start, end) {\n  this.postMessage({\n    mapId: avatar.map.id,\n    blocked: avatar.map.GRAPH.blocked,\n    requestType: 0,\n    avatarId: avatar.id,\n    path: {\n      start: start,\n      end: end\n    }\n  });\n};\npathfinder.onmessage = function (_ref) {\n  var _Map_$_all$data$mapId;\n  var data = _ref.data;\n  (_Map_$_all$data$mapId = _Map_._all[data.mapId].avatars[data.avatarId]) === null || _Map_$_all$data$mapId === void 0 || _Map_$_all$data$mapId.findPathTo(data.result);\n};\nvar _Object_ = /*#__PURE__*/function () {\n  function _Object_(vertices, imp) {\n    var render = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n    var width = arguments.length > 3 ? arguments[3] : undefined;\n    var height = arguments.length > 4 ? arguments[4] : undefined;\n    var initialX = arguments.length > 5 ? arguments[5] : undefined;\n    var initialY = arguments.length > 6 ? arguments[6] : undefined;\n    var initialRotation = arguments.length > 7 ? arguments[7] : undefined;\n    var type = arguments.length > 8 ? arguments[8] : undefined;\n    var name = arguments.length > 9 ? arguments[9] : undefined;\n    _classCallCheck(this, _Object_);\n    _defineProperty(this, \"texture\", void 0);\n    _defineProperty(this, \"buffer\", void 0);\n    _defineProperty(this, \"segments\", void 0);\n    _defineProperty(this, \"obstacle\", void 0);\n    _defineProperty(this, \"pickup\", void 0);\n    _defineProperty(this, \"interactable\", void 0);\n    render = render.bind(this);\n    this.vao = ext.createVertexArrayOES();\n    this.vertices = new Float32Array(vertices);\n    this.imp = imp.bind(this);\n    this.render = function () {\n      if (this.preRender) this.preRender();\n      render();\n    };\n    this.trans = {\n      offsetX: initialX || 0,\n      offsetY: initialY || 0,\n      rotation: initialRotation * Math.PI / 180 || 0\n    };\n    this.width = width;\n    this.height = height;\n    this.id = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)();\n    this.type = type;\n    this.scale = 1;\n    this.topLayer = false;\n    this.name = name;\n    this.textures = [];\n    ext.bindVertexArrayOES(this.vao);\n    this.imp();\n  }\n  return _createClass(_Object_, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(a) {\n      a = a * Math.PI / 180;\n      this.trans.rotation = a;\n    }\n  }]);\n}();\nvar _StaticCluster_ = /*#__PURE__*/function () {\n  function _StaticCluster_(texture, topLayer) {\n    _classCallCheck(this, _StaticCluster_);\n    this.vao = ext.createVertexArrayOES();\n    this.linked = false;\n    this.isCluster = true;\n    this.vertices = [];\n    this.verticesCount = 0;\n    this.texture = texture;\n    this.members = 0;\n    this.trans = {\n      offsetX: 0,\n      offsetY: 0,\n      rotation: 0\n    };\n    this.id = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)();\n    this.type = \"static cluster\";\n    this.topLayer = topLayer || false;\n\n    // set up cluster VAO...\n\n    ext.bindVertexArrayOES(this.vao);\n    this.buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.DYNAMIC_DRAW);\n    gl.disableVertexAttribArray(locations.offset);\n    gl.disableVertexAttribArray(locations.textrUnit);\n  }\n  return _createClass(_StaticCluster_, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n    }\n  }, {\n    key: \"translateVertices\",\n    value: function translateVertices(index, vertices) {\n      var x = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var y = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var rotation = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n      this.vertices[index] = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.offsetVertices)(vertices, x, y, -rotation);\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices.flat(1)), gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 20, 0);\n      gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 20, 12);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.enableVertexAttribArray(locations.tcoords);\n    }\n  }, {\n    key: \"link\",\n    value: function link(vertices) {\n      var xOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var yOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var rotation = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var stride = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 5;\n      this.vertices.push((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.offsetVertices)(vertices, xOffset, yOffset, -rotation, stride));\n      var v = this.vertices.flat(1);\n      this.verticeCount = v.length;\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(v), gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 20, 0);\n      gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 20, 12);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.enableVertexAttribArray(locations.tcoords);\n      return this.vertices.length - 1;\n    }\n  }, {\n    key: \"unlink\",\n    value: function unlink(clusterIndex) {\n      delete this.vertices[clusterIndex];\n      var v = this.vertices.flat(1);\n      this.verticeCount = v.length;\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(v), gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 20, 0);\n      gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 20, 12);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.enableVertexAttribArray(locations.tcoords);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      gl.uniform2fv(locations.translation, [this.trans.offsetX, this.trans.offsetY]);\n      gl.uniform1f(locations.rotation, this.trans.rotation);\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, this.texture);\n      gl.useProgram(program);\n      gl.drawArrays(gl.TRIANGLES, 0, this.verticeCount / 5);\n    }\n  }]);\n}();\nvar _BulletCluster_ = /*#__PURE__*/function () {\n  function _BulletCluster_(vertices, texture) {\n    _classCallCheck(this, _BulletCluster_);\n    this.vao = ext.createVertexArrayOES();\n    this.linked = false;\n    this.topLayer = true;\n    this.isCluster = true;\n    this.animation = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n      for (var i = 0; i < this.bullets.length; i++) {\n        if (this.bullets[i]) {\n          var b = this.bullets[i];\n          var off = i * 3;\n          this.offsets[off] += b.rate.x;\n          this.offsets[off + 1] += b.rate.y;\n          b.translate(b.rate.x, b.rate.y);\n          outer: for (var o in this.map.obstacles) {\n            var _iterator = _createForOfIteratorHelper(this.map.obstacles[o].segments),\n              _step;\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                var segment = _step.value;\n                var _segment = _slicedToArray(segment, 4),\n                  ox = _segment[0],\n                  oy = _segment[1],\n                  ow = _segment[2],\n                  oh = _segment[3];\n                ox = ox + this.map.obstacles[o].trans.offsetX;\n                ox += ow / 2;\n                oy = oy + this.map.obstacles[o].trans.offsetY;\n                oy += oh / 2;\n                if (Math.abs(ox - b.trans.offsetX) < b.width / 2 + ow / 2 && Math.abs(oy - b.trans.offsetY) < b.height / 2 + oh / 2) {\n                  if (this.map.obstacles[o] !== $AVATAR && !(this.map.obstacles[o] instanceof Bot)) {\n                    if ((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX, this.trans.offsetY, $AVATAR.trans.offsetX, $AVATAR.trans.offsetY) < 200) $AUDIO.playSound(Math.random() < 0.5 ? \"bullet-impact-1\" : \"bullet-impact-2\");\n                  } else {\n                    if ((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX, this.trans.offsetY, $AVATAR.trans.offsetX, $AVATAR.trans.offsetY) < 200) $AUDIO.playSound(\"bullet-body-impact\");\n                  }\n                  b[\"delete\"]();\n                  if (this.map.obstacles[o].hit) this.map.obstacles[o].hit(b.damage, b.owner, b);\n                  if (b.explosive) {\n                    for (var _i = 0; _i < 40; _i++) {\n                      var randomBulletRotation = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360);\n                      var _rotate = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(0, 1, randomBulletRotation),\n                        _rotate2 = _slicedToArray(_rotate, 2),\n                        directionX = _rotate2[0],\n                        directionY = _rotate2[1];\n                      var velocity = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(10) + 3;\n                      this.map.link(new Bullet(b.trans.offsetX, b.trans.offsetY, randomBulletRotation, directionX * velocity, directionY * velocity, 100, b.owner));\n                    }\n                    $AUDIO.playSound(\"explosion\");\n                  }\n                  break outer;\n                }\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n          }\n        }\n      }\n    }, this, bulletResolution);\n    this.vertices = vertices;\n    this.bullets = [];\n    this.offsets = [];\n    this.texture = texture;\n    this.verticeCount = vertices.length / 5;\n    this.members = 0;\n    this.instances = 0;\n    this.trans = {\n      offsetX: 0,\n      offsetY: 0,\n      rotation: 0\n    };\n    this.id = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)();\n    this.type = \"bullet cluster\";\n\n    // set up cluster VAO...\n\n    ext.bindVertexArrayOES(this.vao);\n    this.buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.STATIC_DRAW);\n    gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 20, 0);\n    gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 20, 12);\n    gl.enableVertexAttribArray(locations.coords);\n    gl.enableVertexAttribArray(locations.tcoords);\n    this.offsetBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.offsetBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.offsets), gl.DYNAMIC_DRAW);\n    gl.vertexAttribPointer(locations.offset, 3, gl.FLOAT, false, 12, 0);\n    instExt.vertexAttribDivisorANGLE(locations.offset, 1);\n    gl.enableVertexAttribArray(locations.offset);\n    gl.disableVertexAttribArray(locations.textrUnit);\n  }\n  return _createClass(_BulletCluster_, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n    }\n  }, {\n    key: \"translateVertices\",\n    value: function translateVertices(index) {\n      var x = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var rotation = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var i = index * 3;\n      this.offsets[i] += x;\n      this.offsets[i + 1] += y;\n      this.offsets[i + 2] = rotation;\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.offsetBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.offsets), gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(locations.offset, 3, gl.FLOAT, false, 12, 0);\n      gl.enableVertexAttribArray(locations.offset);\n    }\n  }, {\n    key: \"link\",\n    value: function link() {\n      var xOffset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var yOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var bullet = arguments.length > 3 ? arguments[3] : undefined;\n      var m = this.members * 3;\n      var t = this.members * 2;\n      this.offsets[m] = xOffset;\n      this.offsets[m + 1] = yOffset;\n      this.offsets[m + 2] = rotation;\n      this.bullets[this.members] = bullet;\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.offsetBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.offsets), gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(locations.offset, 3, gl.FLOAT, false, 12, 0);\n      gl.enableVertexAttribArray(locations.offset);\n      this.instances++;\n      return this.members++;\n    }\n  }, {\n    key: \"unlink\",\n    value: function unlink(index) {\n      var i = index * 3;\n      delete this.offsets[i];\n      delete this.offsets[i + 1];\n      delete this.offsets[i + 2];\n      delete this.bullets[index];\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.offsetBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.offsets), gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(locations.offset, 3, gl.FLOAT, false, 12, 0);\n      gl.enableVertexAttribArray(locations.offset);\n    }\n  }, {\n    key: \"preRender\",\n    value: function preRender() {\n      this.animation.run();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.offsetBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.offsets), gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(locations.offset, 3, gl.FLOAT, false, 12, 0);\n      gl.enableVertexAttribArray(locations.offset);\n      gl.uniform2fv(locations.translation, [this.trans.offsetX, this.trans.offsetY]);\n      gl.uniform1f(locations.rotation, this.trans.rotation);\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, this.texture);\n      gl.useProgram(program);\n      instExt.drawArraysInstancedANGLE(gl.TRIANGLES, 0, this.verticeCount, this.instances);\n    }\n  }]);\n}();\nvar _InstancedCluster_ = /*#__PURE__*/function () {\n  function _InstancedCluster_(vertices, texture, useLight) {\n    _classCallCheck(this, _InstancedCluster_);\n    this.vao = ext.createVertexArrayOES();\n    this.linked = false;\n    this.isCluster = true;\n    this.vertices = vertices;\n    this.offsets = [];\n    this.useLight = useLight;\n    this.texture = texture;\n    this.verticeCount = vertices.length / 5;\n    this.members = 0;\n    this.instances = 0;\n    this.trans = {\n      offsetX: 0,\n      offsetY: 0,\n      rotation: 0\n    };\n    this.id = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)();\n    this.type = \"instanced cluster\";\n    this.topLayer = useLight;\n\n    // set up cluster VAO...\n\n    ext.bindVertexArrayOES(this.vao);\n    this.buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.STATIC_DRAW);\n    gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 20, 0);\n    gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 20, 12);\n    gl.enableVertexAttribArray(locations.coords);\n    gl.enableVertexAttribArray(locations.tcoords);\n    this.offsetBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.offsetBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.offsets), gl.DYNAMIC_DRAW);\n    gl.vertexAttribPointer(locations.offset, 3, gl.FLOAT, false, 12, 0);\n    instExt.vertexAttribDivisorANGLE(locations.offset, 1);\n    gl.enableVertexAttribArray(locations.offset);\n    gl.disableVertexAttribArray(locations.textrUnit);\n  }\n  return _createClass(_InstancedCluster_, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n    }\n  }, {\n    key: \"updateBuffer\",\n    value: function updateBuffer() {\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.offsetBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.offsets), gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(locations.offset, 3, gl.FLOAT, false, 12, 0);\n      gl.enableVertexAttribArray(locations.offset);\n    }\n  }, {\n    key: \"translateVertices\",\n    value: function translateVertices(index) {\n      var x = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var rotation = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var i = index * 3;\n      this.offsets[i] += x;\n      this.offsets[i + 1] += y;\n      this.offsets[i + 2] = -rotation * (Math.PI / 180);\n      this.updateBuffer();\n    }\n  }, {\n    key: \"link\",\n    value: function link() {\n      var xOffset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var yOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var m = this.members * 3;\n      this.offsets[m] = xOffset;\n      this.offsets[m + 1] = yOffset;\n      this.offsets[m + 2] = -rotation * (Math.PI / 180);\n      this.updateBuffer();\n      this.instances++;\n      return this.members++;\n    }\n  }, {\n    key: \"unlink\",\n    value: function unlink(index) {\n      var i = index * 3;\n      delete this.offsets[i];\n      delete this.offsets[i + 1];\n      delete this.offsets[i + 2];\n      this.updateBuffer();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      gl.uniform2fv(locations.translation, [this.trans.offsetX, this.trans.offsetY]);\n      gl.uniform1f(locations.rotation, this.trans.rotation);\n      if (this.useLight) {\n        gl.uniform1f(locations.darkness, 1);\n        gl.blendFuncSeparate(gl.DST_COLOR, gl.DST_ALPHA, gl.ONE, gl.ONE);\n      }\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, this.texture);\n      gl.useProgram(program);\n      instExt.drawArraysInstancedANGLE(gl.TRIANGLES, 0, this.verticeCount, this.instances);\n      if (this.useLight) {\n        gl.uniform1f(locations.darkness, this.map.darkness + globalDarkness);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n      }\n    }\n  }]);\n}();\nvar _MixedStaticCluster_ = /*#__PURE__*/function () {\n  function _MixedStaticCluster_() {\n    var textures = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var stride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 6;\n    var topLayer = arguments.length > 2 ? arguments[2] : undefined;\n    _classCallCheck(this, _MixedStaticCluster_);\n    this.vao = ext.createVertexArrayOES();\n    this.linked = false;\n    this.isCluster = true;\n    this.stride = stride;\n    this.sources = [];\n    this.vertices = [];\n    this.textures = textures;\n    this.verticesCount = 0;\n    this.members = 0;\n    this.trans = {\n      offsetX: 0,\n      offsetY: 0,\n      rotation: 0\n    };\n    this.id = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)();\n    this.type = \"mixed static cluster\";\n    this.topLayer = topLayer;\n\n    // set up cluster VAO...\n\n    ext.bindVertexArrayOES(this.vao);\n    this.buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.DYNAMIC_DRAW);\n  }\n  return _createClass(_MixedStaticCluster_, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n    }\n  }, {\n    key: \"translateVertices\",\n    value: function translateVertices(index, vertices) {\n      var x = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var y = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var rotation = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n      this.vertices[index] = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.offsetVertices)(vertices, x, y, -rotation, this.stride);\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices.flat(1)), gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 24, 0); // 20\n      gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 24, 12);\n      gl.vertexAttribPointer(locations.textrUnit, 1, gl.FLOAT, false, 24, 20);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.enableVertexAttribArray(locations.tcoords);\n      gl.enableVertexAttribArray(locations.textrUnit);\n    }\n  }, {\n    key: \"link\",\n    value: function link(vertices) {\n      var xOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var yOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var rotation = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      this.vertices.push((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.offsetVertices)(vertices, xOffset, yOffset, rotation, this.stride));\n      var v = this.vertices.flat(1);\n      this.verticeCount = v.length;\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(v), gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 24, 0); // 20\n      gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 24, 12);\n      gl.vertexAttribPointer(locations.textrUnit, 1, gl.FLOAT, false, 24, 20);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.enableVertexAttribArray(locations.tcoords);\n      gl.enableVertexAttribArray(locations.textrUnit);\n      this.members++;\n      return this.vertices.length - 1;\n    }\n  }, {\n    key: \"unlink\",\n    value: function unlink(clusterIndex) {\n      delete this.vertices[clusterIndex];\n      var v = this.vertices.flat(1);\n      this.verticeCount = v.length;\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(v), gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 24, 0); // 20\n      gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 24, 12);\n      gl.vertexAttribPointer(locations.textrUnit, 1, gl.FLOAT, false, 24, 20);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.enableVertexAttribArray(locations.tcoords);\n      gl.enableVertexAttribArray(locations.textrUnit);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      gl.uniform2fv(locations.translation, [this.trans.offsetX, this.trans.offsetY]);\n      gl.uniform1f(locations.rotation, this.trans.rotation);\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      for (var i = 0; i < this.textures.length; i++) {\n        eval(\"gl.activeTexture(gl.TEXTURE\".concat(i, \")\"));\n        gl.bindTexture(gl.TEXTURE_2D, this.textures[i]);\n      }\n      gl.useProgram(program);\n      gl.drawArrays(gl.TRIANGLES, 0, this.verticeCount / this.stride);\n    }\n  }]);\n}();\n_defineProperty(_MixedStaticCluster_, \"groupings\", {\n  \"0\": [textures.objects.roads],\n  \"1\": [textures.objects.fences]\n});\nvar _LineMatrix_ = /*#__PURE__*/function () {\n  function _LineMatrix_() {\n    _classCallCheck(this, _LineMatrix_);\n    this.vao = ext.createVertexArrayOES();\n    this.isCluster = true;\n    this.vertices = [];\n    this.shotQueue = [];\n    this.animation = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n      this.removeShot(this.shotQueue.shift());\n    }, this, 0.1);\n    this.trans = {\n      offsetX: 0,\n      offsetY: 0,\n      rotation: 0\n    };\n    this.id = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)();\n    this.type = \"line matrix\";\n    this.topLayer = true;\n\n    // set up cluster VAO...\n\n    ext.bindVertexArrayOES(this.vao);\n    this.buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.DYNAMIC_DRAW);\n    gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 12, 0);\n    gl.enableVertexAttribArray(locations.coords);\n    gl.disableVertexAttribArray(locations.tcoords);\n    gl.disableVertexAttribArray(locations.textrUnit);\n  }\n  return _createClass(_LineMatrix_, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }, {\n    key: \"showShot\",\n    value: function showShot(p1, p2) {\n      var _p = _slicedToArray(p1, 2),\n        x1 = _p[0],\n        y1 = _p[1],\n        _p2 = _slicedToArray(p2, 2),\n        x2 = _p2[0],\n        y2 = _p2[1],\n        index = this.vertices.length;\n      this.vertices.push(x1, y1, 0, x2, y2, 0);\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 12, 0);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.disableVertexAttribArray(locations.tcoords);\n      gl.disableVertexAttribArray(locations.textrUnit);\n      return index;\n    }\n  }, {\n    key: \"removeShot\",\n    value: function removeShot(index) {\n      this.vertices.splice(index, 6, undefined, undefined, undefined, undefined, undefined, undefined);\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 12, 0);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.disableVertexAttribArray(locations.tcoords);\n      gl.disableVertexAttribArray(locations.textrUnit);\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      gl.uniform2fv(locations.translation, [this.trans.offsetX, this.trans.offsetY]);\n      gl.uniform1f(locations.rotation, this.trans.rotation);\n      gl.uniform4fv(locations.color, [0, 0, 0, 1.0]);\n      gl.uniform1i(locations.lines, 1);\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.useProgram(program);\n      gl.drawArrays(gl.LINES, 0, this.vertices.length / 3);\n      gl.uniform1i(locations.lines, 0);\n      gl.uniform4fv(locations.color, [0, 0, 0, 0.0]);\n    }\n  }]);\n}();\nvar _MixedStaticClusterClient_ = /*#__PURE__*/function () {\n  function _MixedStaticClusterClient_() {\n    var initialX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var initialY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var initialRotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    _classCallCheck(this, _MixedStaticClusterClient_);\n    _defineProperty(this, \"hasCluster\", true);\n    _defineProperty(this, \"clusterType\", _MixedStaticCluster_);\n    _defineProperty(this, \"id\", (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)());\n    this.trans = {\n      offsetX: initialX,\n      offsetY: initialY,\n      rotation: initialRotation\n    };\n  }\n  return _createClass(_MixedStaticClusterClient_, [{\n    key: \"translate\",\n    value: function translate(x, y) {\n      var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var translateVertices = arguments.length > 3 ? arguments[3] : undefined;\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n      if (rotation) {\n        this.trans.rotation = rotation;\n      }\n      if (translateVertices) this.cluster.translateVertices(this.clusterIndex, this.constructor._defaultVertices, -this.cluster.trans.offsetX + this.trans.offsetX, -this.cluster.trans.offsetY + this.trans.offsetY, this.trans.rotation);\n    }\n  }, {\n    key: \"moveToTop\",\n    value: function moveToTop() {\n      this.cluster.unlink(this.clusterIndex);\n      this.clusterIndex = this.cluster.link(this.constructor._defaultVertices, -this.cluster.trans.offsetX + this.trans.offsetX, -this.cluster.trans.offsetY + this.trans.offsetY, this.trans.rotation);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }]);\n}();\nvar _StaticClusterClient_ = /*#__PURE__*/function () {\n  function _StaticClusterClient_() {\n    var initialX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var initialY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var initialRotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    _classCallCheck(this, _StaticClusterClient_);\n    _defineProperty(this, \"hasCluster\", true);\n    _defineProperty(this, \"clusterType\", _StaticCluster_);\n    _defineProperty(this, \"id\", (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)());\n    this.trans = {\n      offsetX: initialX,\n      offsetY: initialY,\n      rotation: initialRotation\n    };\n  }\n  return _createClass(_StaticClusterClient_, [{\n    key: \"translate\",\n    value: function translate(x, y) {\n      var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var translateVertices = arguments.length > 3 ? arguments[3] : undefined;\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n      if (rotation) {\n        this.trans.rotation = rotation;\n      }\n      if (translateVertices) this.cluster.translateVertices(this.clusterIndex, this.constructor._defaultVertices, -this.cluster.trans.offsetX + this.trans.offsetX, -this.cluster.trans.offsetY + this.trans.offsetY, this.trans.rotation);\n    }\n  }, {\n    key: \"moveToTop\",\n    value: function moveToTop() {\n      this.cluster.unlink(this.clusterIndex);\n      this.clusterIndex = this.cluster.link(this.constructor._defaultVertices, -this.cluster.trans.offsetX + this.trans.offsetX, -this.cluster.trans.offsetY + this.trans.offsetY, this.trans.rotation);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }]);\n}();\nvar _InstancedClusterClient_ = /*#__PURE__*/function () {\n  function _InstancedClusterClient_() {\n    var initialX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var initialY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var initialRotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    _classCallCheck(this, _InstancedClusterClient_);\n    _defineProperty(this, \"hasCluster\", true);\n    _defineProperty(this, \"clusterType\", _InstancedCluster_);\n    _defineProperty(this, \"id\", (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)());\n    this.trans = {\n      offsetX: initialX,\n      offsetY: initialY,\n      rotation: initialRotation\n    };\n  }\n  return _createClass(_InstancedClusterClient_, [{\n    key: \"translate\",\n    value: function translate(x, y) {\n      var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var translateVertices = arguments.length > 3 ? arguments[3] : undefined;\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n      if (rotation) {\n        this.trans.rotation = rotation;\n      }\n      if (translateVertices) this.cluster.translateVertices(this.clusterIndex, x, y, this.trans.rotation);\n    }\n  }, {\n    key: \"moveToTop\",\n    value: function moveToTop() {\n      this.cluster.unlink(this.clusterIndex);\n      this.clusterIndex = this.cluster.link(-this.cluster.trans.offsetX + this.trans.offsetX, -this.cluster.trans.offsetY + this.trans.offsetY, this.trans.rotation);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }]);\n}();\nvar _BulletClusterClient_ = /*#__PURE__*/function () {\n  function _BulletClusterClient_() {\n    var initialX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var initialY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var initialRotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var translationX = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    var translationY = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    var damage = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n    var owner = arguments.length > 6 ? arguments[6] : undefined;\n    _classCallCheck(this, _BulletClusterClient_);\n    _defineProperty(this, \"hasCluster\", true);\n    _defineProperty(this, \"name\", \"bullet\");\n    _defineProperty(this, \"id\", (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)());\n    _defineProperty(this, \"exclude\", true);\n    this.trans = {\n      offsetX: initialX,\n      offsetY: initialY,\n      rotation: initialRotation * Math.PI / 180\n    };\n    this.rate = {\n      x: translationX,\n      y: translationY\n    };\n    this.damage = damage;\n    this.owner = owner;\n  }\n  return _createClass(_BulletClusterClient_, [{\n    key: \"postLink\",\n    value: function postLink() {\n      this.cluster = this.map._bulletMatrix;\n      this.clusterIndex = this.cluster.link(-this.cluster.trans.offsetX + this.trans.offsetX, -this.cluster.trans.offsetY + this.trans.offsetY, this.trans.rotation, this);\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }]);\n}();\nvar DownwardLight = /*#__PURE__*/function (_Object_3) {\n  function DownwardLight(initialX, initialY, initialRotation, color) {\n    var _this;\n    _classCallCheck(this, DownwardLight);\n    _this = _callSuper(this, DownwardLight, [[], function () {\n      this.vertices = [-24, 24, 1, 0, 0, 24, 24, 1, 0.9375, 0, -24, -24, 1, 0, 0.9375, 24, 24, 1, 0.9375, 0, -24, -24, 1, 0, 0.9375, 24, -24, 1, 0.9375, 0.9375];\n      this.buffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.STATIC_DRAW);\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 20, 0);\n      gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 20, 12);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.enableVertexAttribArray(locations.tcoords);\n      gl.disableVertexAttribArray(locations.offset);\n      gl.disableVertexAttribArray(locations.textrUnit);\n      gl.useProgram(program);\n    }, function () {\n      ext.bindVertexArrayOES(this.vao);\n      gl.uniform2fv(locations.translation, [this.trans.offsetX, this.trans.offsetY]);\n      gl.uniform1f(locations.rotation, this.trans.rotation);\n      gl.uniform1f(locations.darkness, 1);\n      gl.uniform2fv(locations.size, [this.scale, this.scale]);\n      gl.uniform4fv(locations.lightColor, this._color);\n      gl.blendFuncSeparate(gl.DST_COLOR, gl.DST_ALPHA, gl.ONE, gl.ONE);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, this.texture);\n      gl.useProgram(program);\n      gl.drawArrays(gl.TRIANGLES, 0, this.vertices.length / 5);\n      gl.uniform1f(locations.darkness, this.map.darkness);\n      gl.uniform2fv(locations.size, [1, 1]);\n      gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n      gl.uniform4fv(locations.lightColor, [0, 0, 0, 0]);\n    }, 48, 48, initialX, initialY, initialRotation]);\n    _this.texture = textures.objects.downwardlight;\n    _this.name = \"downward light\";\n    _this.topLayer = true;\n    _this.color = color || [0, 0, 0, 0];\n    return _this;\n  }\n  _inherits(DownwardLight, _Object_3);\n  return _createClass(DownwardLight, [{\n    key: \"color\",\n    set: function set(code) {\n      this._color = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.fromRGB)(code);\n    }\n  }]);\n}(_Object_);\nvar Bullet = /*#__PURE__*/function (_BulletClusterClient_3) {\n  function Bullet(initialX, initialY, initialRotation, translationX, translationY, damage, owner) {\n    var _this2;\n    _classCallCheck(this, Bullet);\n    _this2 = _callSuper(this, Bullet, [initialX, initialY, initialRotation, translationX, translationY, damage, owner]);\n    _defineProperty(_this2, \"width\", 1.8);\n    _defineProperty(_this2, \"height\", 0.8);\n    return _this2;\n  }\n  _inherits(Bullet, _BulletClusterClient_3);\n  return _createClass(Bullet);\n}(_BulletClusterClient_);\nvar Grass = /*#__PURE__*/function (_InstancedClusterClie) {\n  function Grass(initialX, initialY, initialRotation) {\n    var _this3;\n    _classCallCheck(this, Grass);\n    _this3 = _callSuper(this, Grass, [initialX, initialY, initialRotation]);\n    _defineProperty(_this3, \"width\", 2);\n    _defineProperty(_this3, \"height\", 2);\n    _defineProperty(_this3, \"name\", \"grass\");\n    _defineProperty(_this3, \"clusterName\", \"grass\");\n    _defineProperty(_this3, \"texture\", textures.objects.grass1);\n    _defineProperty(_this3, \"preserveCluster\", true);\n    _defineProperty(_this3, \"bottomLayer\", true);\n    return _this3;\n  }\n  _inherits(Grass, _InstancedClusterClie);\n  return _createClass(Grass, [{\n    key: \"postLink\",\n    value: function postLink() {\n      this[\"delete\"]();\n    }\n  }]);\n}(_InstancedClusterClient_);\n_defineProperty(Grass, \"_defaultVertices\", [-1.5, 1.5, 1, 0, 0, 1.5, 1.5, 1, 0.9375, 0, -1.5, -1.5, 1, 0, 0.9375, 1.5, 1.5, 1, 0.9375, 0, -1.5, -1.5, 1, 0, 0.9375, 1.5, -1.5, 1, 0.9375, 0.9375]);\nvar BulletShell = /*#__PURE__*/function (_InstancedClusterClie2) {\n  function BulletShell(initialX, initialY, directionX, directionY) {\n    var _this4;\n    _classCallCheck(this, BulletShell);\n    _this4 = _callSuper(this, BulletShell, [initialX, initialY, (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360)]);\n    _defineProperty(_this4, \"width\", 1.8);\n    _defineProperty(_this4, \"height\", 1);\n    _defineProperty(_this4, \"name\", \"bullet shell\");\n    _defineProperty(_this4, \"clusterName\", \"bullet shell\");\n    _defineProperty(_this4, \"texture\", textures.objects.bulletshell);\n    _defineProperty(_this4, \"exclude\", true);\n    _defineProperty(_this4, \"bottomLayer\", true);\n    _defineProperty(_this4, \"preserveCluster\", true);\n    _this4.directionX = directionX;\n    _this4.directionY = directionY;\n    _this4.animation = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n      this.translate(directionX /= 2, directionY /= 2, this.trans.rotation - this.trans.rotation * 2, true);\n    }, _this4, 0.01);\n    _this4.timeout = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLinearAnimation([function () {\n      this[\"delete\"]();\n    }], _this4, [0.2]);\n    return _this4;\n  }\n  _inherits(BulletShell, _InstancedClusterClie2);\n  return _createClass(BulletShell, [{\n    key: \"preRender\",\n    value: function preRender() {\n      this.animation.run();\n      this.timeout.start();\n      this.timeout.run();\n    }\n  }]);\n}(_InstancedClusterClient_);\n_defineProperty(BulletShell, \"_defaultVertices\", [-0.9, 0.5, 1, 0, 0, 0.9, 0.5, 1, 0.5625, 0, -0.9, -0.5, 1, 0, 0.625, 0.9, 0.5, 1, 0.5625, 0, -0.9, -0.5, 1, 0, 0.625, 0.9, -0.5, 1, 0.5625, 0.625]);\nvar Plus100 = /*#__PURE__*/function (_InstancedClusterClie3) {\n  function Plus100(initialX, initialY, initialRotation) {\n    var _this5;\n    _classCallCheck(this, Plus100);\n    _this5 = _callSuper(this, Plus100, [initialX, initialY, initialRotation]);\n    _defineProperty(_this5, \"width\", 8.3);\n    _defineProperty(_this5, \"height\", 2.2);\n    _defineProperty(_this5, \"name\", \"plus 100\");\n    _defineProperty(_this5, \"clusterName\", \"plus 100\");\n    _defineProperty(_this5, \"texture\", textures.misc.plus100);\n    _this5.animation = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n      this.translate(0, 0.2, 0, true);\n      if (this.trans.offsetY > initialY + 10) this[\"delete\"]();\n    }, _this5, 0.01);\n    return _this5;\n  }\n  _inherits(Plus100, _InstancedClusterClie3);\n  return _createClass(Plus100, [{\n    key: \"preRender\",\n    value: function preRender() {\n      this.animation.run();\n    }\n  }]);\n}(_InstancedClusterClient_);\n_defineProperty(Plus100, \"_defaultVertices\", [-4.15, 1.1, 1, 0, 0, 4.15, 1.1, 1, 0.6484375, 0, -4.15, -1.1, 1, 0, 0.6875, 4.15, 1.1, 1, 0.6484375, 0, -4.15, -1.1, 1, 0, 0.6875, 4.15, -1.1, 1, 0.6484375, 0.6875]);\nvar Grass2 = /*#__PURE__*/function (_InstancedClusterClie4) {\n  function Grass2(initialX, initialY, initialRotation) {\n    var _this6;\n    _classCallCheck(this, Grass2);\n    _this6 = _callSuper(this, Grass2, [initialX, initialY, initialRotation]);\n    _defineProperty(_this6, \"width\", 2);\n    _defineProperty(_this6, \"height\", 2);\n    _defineProperty(_this6, \"name\", \"grass2\");\n    _defineProperty(_this6, \"clusterName\", \"grass2\");\n    _defineProperty(_this6, \"texture\", textures.objects.grass2);\n    _defineProperty(_this6, \"preserveCluster\", true);\n    _defineProperty(_this6, \"bottomLayer\", true);\n    return _this6;\n  }\n  _inherits(Grass2, _InstancedClusterClie4);\n  return _createClass(Grass2, [{\n    key: \"postLink\",\n    value: function postLink() {\n      this[\"delete\"]();\n    }\n  }]);\n}(_InstancedClusterClient_);\n_defineProperty(Grass2, \"_defaultVertices\", [-1.5, 1.5, 1, 0, 0, 1.5, 1.5, 1, 0.9375, 0, -1.5, -1.5, 1, 0, 0.9375, 1.5, 1.5, 1, 0.9375, 0, -1.5, -1.5, 1, 0, 0.9375, 1.5, -1.5, 1, 0.9375, 0.9375]);\nvar Rocks1 = /*#__PURE__*/function (_InstancedClusterClie5) {\n  function Rocks1(initialX, initialY, initialRotation) {\n    var _this7;\n    _classCallCheck(this, Rocks1);\n    _this7 = _callSuper(this, Rocks1, [initialX, initialY, initialRotation || (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360)]);\n    _defineProperty(_this7, \"width\", 2);\n    _defineProperty(_this7, \"height\", 2);\n    _defineProperty(_this7, \"clusterName\", \"three rocks\");\n    _defineProperty(_this7, \"texture\", textures.objects.rocks1);\n    _defineProperty(_this7, \"name\", \"three rocks\");\n    _defineProperty(_this7, \"preserveCluster\", true);\n    _defineProperty(_this7, \"bottomLayer\", true);\n    return _this7;\n  }\n  _inherits(Rocks1, _InstancedClusterClie5);\n  return _createClass(Rocks1, [{\n    key: \"postLink\",\n    value: function postLink() {\n      this[\"delete\"]();\n    }\n  }]);\n}(_InstancedClusterClient_);\n_defineProperty(Rocks1, \"_defaultVertices\", [-1.5, 1.5, 1, 0, 0, 1.5, 1.5, 1, 0.9375, 0, -1.5, -1.5, 1, 0, 0.9375, 1.5, 1.5, 1, 0.9375, 0, -1.5, -1.5, 1, 0, 0.9375, 1.5, -1.5, 1, 0.9375, 0.9375]);\nvar Rocks2 = /*#__PURE__*/function (_InstancedClusterClie6) {\n  function Rocks2(initialX, initialY, initialRotation) {\n    var _this8;\n    _classCallCheck(this, Rocks2);\n    _this8 = _callSuper(this, Rocks2, [initialX, initialY, initialRotation || (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360)]);\n    _defineProperty(_this8, \"width\", 2);\n    _defineProperty(_this8, \"height\", 2);\n    _defineProperty(_this8, \"clusterName\", \"two rocks\");\n    _defineProperty(_this8, \"texture\", textures.objects.rocks2);\n    _defineProperty(_this8, \"name\", \"two rocks\");\n    _defineProperty(_this8, \"preserveCluster\", true);\n    _defineProperty(_this8, \"bottomLayer\", true);\n    return _this8;\n  }\n  _inherits(Rocks2, _InstancedClusterClie6);\n  return _createClass(Rocks2, [{\n    key: \"postLink\",\n    value: function postLink() {\n      this[\"delete\"]();\n    }\n  }]);\n}(_InstancedClusterClient_);\n\n/* Misc props */\n_defineProperty(Rocks2, \"_defaultVertices\", [-1.5, 1.5, 1, 0, 0, 1.5, 1.5, 1, 0.9375, 0, -1.5, -1.5, 1, 0, 0.9375, 1.5, 1.5, 1, 0.9375, 0, -1.5, -1.5, 1, 0, 0.9375, 1.5, -1.5, 1, 0.9375, 0.9375]);\nvar BlackBook = /*#__PURE__*/function (_InstancedClusterClie7) {\n  function BlackBook(initialX, initialY, initialRotation) {\n    var _this9;\n    _classCallCheck(this, BlackBook);\n    _this9 = _callSuper(this, BlackBook, [initialX, initialY, initialRotation || (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360)]);\n    _defineProperty(_this9, \"width\", 6.0200000000000005);\n    _defineProperty(_this9, \"height\", 8.32);\n    _defineProperty(_this9, \"name\", \"black book\");\n    _defineProperty(_this9, \"clusterName\", \"black book\");\n    _defineProperty(_this9, \"texture\", textures.objects.book1);\n    _defineProperty(_this9, \"subLayer\", 1);\n    _defineProperty(_this9, \"moveable\", true);\n    return _this9;\n  }\n  _inherits(BlackBook, _InstancedClusterClie7);\n  return _createClass(BlackBook);\n}(_InstancedClusterClient_);\n_defineProperty(BlackBook, \"_defaultVertices\", [-3.0100000000000002, 4.16, 1, 0, 0, 3.0100000000000002, 4.16, 1, 0.940625, 0, -3.0100000000000002, -4.16, 1, 0, 0.65, 3.0100000000000002, 4.16, 1, 0.940625, 0, -3.0100000000000002, -4.16, 1, 0, 0.65, 3.0100000000000002, -4.16, 1, 0.940625, 0.65]);\nvar WhiteBook = /*#__PURE__*/function (_InstancedClusterClie8) {\n  function WhiteBook(initialX, initialY, initialRotation) {\n    var _this10;\n    _classCallCheck(this, WhiteBook);\n    _this10 = _callSuper(this, WhiteBook, [initialX, initialY, initialRotation || (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360)]);\n    _defineProperty(_this10, \"width\", 6.0200000000000005);\n    _defineProperty(_this10, \"height\", 8.32);\n    _defineProperty(_this10, \"name\", \"white book\");\n    _defineProperty(_this10, \"clusterName\", \"white book\");\n    _defineProperty(_this10, \"texture\", textures.objects.book2);\n    _defineProperty(_this10, \"subLayer\", 1);\n    _defineProperty(_this10, \"moveable\", true);\n    return _this10;\n  }\n  _inherits(WhiteBook, _InstancedClusterClie8);\n  return _createClass(WhiteBook);\n}(_InstancedClusterClient_);\n_defineProperty(WhiteBook, \"_defaultVertices\", [-3.0100000000000002, 4.16, 1, 0, 0, 3.0100000000000002, 4.16, 1, 0.940625, 0, -3.0100000000000002, -4.16, 1, 0, 0.65, 3.0100000000000002, 4.16, 1, 0.940625, 0, -3.0100000000000002, -4.16, 1, 0, 0.65, 3.0100000000000002, -4.16, 1, 0.940625, 0.65]);\nvar RoadRail = /*#__PURE__*/function (_InstancedClusterClie9) {\n  function RoadRail(initialX, initialY, initialRotation) {\n    var _this11;\n    _classCallCheck(this, RoadRail);\n    _this11 = _callSuper(this, RoadRail, [initialX, initialY, initialRotation]);\n    _defineProperty(_this11, \"width\", 26.4);\n    _defineProperty(_this11, \"height\", 11.4);\n    _defineProperty(_this11, \"clusterName\", \"road rail\");\n    _defineProperty(_this11, \"texture\", textures.objects.fences);\n    _defineProperty(_this11, \"name\", \"road rail\");\n    _defineProperty(_this11, \"obstacle\", true);\n    _defineProperty(_this11, \"segments\", [[-13.2, -5.7, 3.4, 11.4], [9.8, -5.7, 3.4, 11.4], [-10.2, -4.7, 20.4, 8.6]]);\n    return _this11;\n  }\n  _inherits(RoadRail, _InstancedClusterClie9);\n  return _createClass(RoadRail);\n}(_InstancedClusterClient_);\n_defineProperty(RoadRail, \"_defaultVertices\", [-13.4, 5.9, 1, 0, 0, -10, 5.9, 1, 0.033203125, 0, -13.4, -5.5, 1, 0, 0.111328125, -10, 5.9, 1, 0.033203125, 0, -13.4, -5.5, 1, 0, 0.111328125, -10, -5.5, 1, 0.033203125, 0.111328125, 9.6, 5.9, 1, 0.224609375, 0, 12.999999999999998, 5.9, 1, 0.2578125, 0, 9.6, -5.5, 1, 0.224609375, 0.111328125, 12.999999999999998, 5.9, 1, 0.2578125, 0, 9.6, -5.5, 1, 0.224609375, 0.111328125, 12.999999999999998, -5.5, 1, 0.2578125, 0.111328125, -10.4, 4.9, 1, 0.029296875, 0.009765625, 9.999999999999998, 4.9, 1, 0.228515625, 0.009765625, -10.4, -3.7, 1, 0.029296875, 0.09375, 9.999999999999998, 4.9, 1, 0.228515625, 0.009765625, -10.4, -3.7, 1, 0.029296875, 0.09375, 9.999999999999998, -3.7, 1, 0.228515625, 0.09375]);\nvar RoadRailVertical = /*#__PURE__*/function (_StaticClusterClient_3) {\n  function RoadRailVertical(initialX, initialY, initialRotation) {\n    var _this12;\n    _classCallCheck(this, RoadRailVertical);\n    _this12 = _callSuper(this, RoadRailVertical, [initialX, initialY, initialRotation]);\n    _defineProperty(_this12, \"width\", 3.4);\n    _defineProperty(_this12, \"height\", 25.4);\n    _defineProperty(_this12, \"name\", \"road rail vertical\");\n    _defineProperty(_this12, \"clusterName\", \"road rail vertical\");\n    _defineProperty(_this12, \"texture\", textures.objects.roadrailvertical);\n    _defineProperty(_this12, \"obstacle\", true);\n    _defineProperty(_this12, \"segments\", [[-1.7, -12.7, 3.4, 25.4]]);\n    return _this12;\n  }\n  _inherits(RoadRailVertical, _StaticClusterClient_3);\n  return _createClass(RoadRailVertical);\n}(_StaticClusterClient_);\n_defineProperty(RoadRailVertical, \"_defaultVertices\", [-1.7, 12.7, 1, 0, 0, 1.7, 12.7, 1, 0.53125, 0, -1.7, -12.7, 1, 0, 0.49609375, 1.7, 12.7, 1, 0.53125, 0, -1.7, -12.7, 1, 0, 0.49609375, 1.7, -12.7, 1, 0.53125, 0.49609375]);\nvar StreetLight = /*#__PURE__*/function (_StaticClusterClient_4) {\n  function StreetLight(initialX, initialY, initialRotation, color) {\n    var _this13;\n    _classCallCheck(this, StreetLight);\n    _this13 = _callSuper(this, StreetLight, [initialX, initialY, initialRotation]);\n    _defineProperty(_this13, \"width\", 31.6);\n    _defineProperty(_this13, \"height\", 49);\n    _defineProperty(_this13, \"name\", \"street light\");\n    _defineProperty(_this13, \"clusterName\", \"street light\");\n    _defineProperty(_this13, \"texture\", textures.objects.streetlight);\n    _defineProperty(_this13, \"obstacle\", true);\n    _defineProperty(_this13, \"segments\", [[-0.6, -24.3, 1.2, 1.2]]);\n    _defineProperty(_this13, \"topLayer\", true);\n    _defineProperty(_this13, \"on\", false);\n    _defineProperty(_this13, \"hideFromMap\", true);\n    _this13._color = color || undefined;\n    _this13.lights = [new DownwardLight(_this13.trans.offsetX - 12.7, _this13.trans.offsetY - 18.5, 0, _this13._color), new DownwardLight(_this13.trans.offsetX + 12.7, _this13.trans.offsetY - 18.5, 0, _this13._color)];\n    return _this13;\n  }\n  _inherits(StreetLight, _StaticClusterClient_4);\n  return _createClass(StreetLight, [{\n    key: \"color\",\n    set: function set(c) {\n      this._color = c;\n      var _iterator2 = _createForOfIteratorHelper(this.lights),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var i = _step2.value;\n          i.color = this._color;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"postLink\",\n    value: function postLink() {\n      var _iterator3 = _createForOfIteratorHelper(this.lights),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var i = _step3.value;\n          if (!this.on) i.hidden = true;\n          i.managedMovement = true;\n          i.exclude = true;\n          i.scale = 1.7;\n          this.map.link(i);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"clean\",\n    value: function clean() {\n      var _iterator4 = _createForOfIteratorHelper(this.lights),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var i = _step4.value;\n          i[\"delete\"]();\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      var _iterator5 = _createForOfIteratorHelper(this.lights),\n        _step5;\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var i = _step5.value;\n          i.hidden = this.on;\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n      this.on = this.on ? false : true;\n    }\n  }, {\n    key: \"preRender\",\n    value: function preRender() {\n      if (this.map.lighting && !this.on) {\n        this.toggle();\n      } else if (!this.map.lighting && this.on) {\n        this.toggle();\n      }\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var translateVertices = arguments.length > 3 ? arguments[3] : undefined;\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n      if (rotation) {\n        this.trans.rotation = rotation;\n      }\n      var _iterator6 = _createForOfIteratorHelper(this.lights),\n        _step6;\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var i = _step6.value;\n          i.translate(x, y);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n      if (translateVertices) this.cluster.translateVertices(this.clusterIndex, this.constructor._defaultVertices, -this.cluster.trans.offsetX + this.trans.offsetX, -this.cluster.trans.offsetY + this.trans.offsetY, this.trans.rotation);\n    }\n  }]);\n}(_StaticClusterClient_);\n_defineProperty(StreetLight, \"_defaultVertices\", [-15.8, 24.5, 1, 0, 0, 15.8, 24.5, 1, 0.6171875, 0, -15.8, -24.5, 1, 0, 0.95703125, 15.8, 24.5, 1, 0.6171875, 0, -15.8, -24.5, 1, 0, 0.95703125, 15.8, -24.5, 1, 0.6171875, 0.95703125]);\nvar _Seat_ = /*#__PURE__*/function (_StaticClusterClient_5) {\n  function _Seat_(initialX, initialY, initialRotation, seats) {\n    var _this14;\n    _classCallCheck(this, _Seat_);\n    _this14 = _callSuper(this, _Seat_, [initialX, initialY, initialRotation]);\n    _defineProperty(_this14, \"type\", \"seat\");\n    _defineProperty(_this14, \"interactable\", true);\n    _defineProperty(_this14, \"minDistance\", 15);\n    _this14.seats = [];\n    for (var i = 0; i < seats.length; i++) {\n      var _seats$i = _slicedToArray(seats[i], 4),\n        x = _seats$i[0],\n        y = _seats$i[1],\n        r = _seats$i[2],\n        exit = _seats$i[3];\n      _this14.seats[i] = {\n        x: x,\n        y: y,\n        r: r,\n        exit: {\n          x: exit[0],\n          y: exit[1]\n        },\n        occupied: false,\n        id: i\n      };\n    }\n    return _this14;\n  }\n  _inherits(_Seat_, _StaticClusterClient_5);\n  return _createClass(_Seat_, [{\n    key: \"getSeat\",\n    value: function getSeat(avatar) {\n      var seat = undefined;\n      var _iterator7 = _createForOfIteratorHelper(this.seats),\n        _step7;\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var i = _step7.value;\n          if ((!seat || (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX + i.x, this.trans.offsetY + i.y, avatar.trans.offsetX, avatar.trans.offsetY) < (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX + seat.x, this.trans.offsetY + seat.y, avatar.trans.offsetX, avatar.trans.offsetY)) && !i.occupied) {\n            seat = i;\n          }\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n      return seat;\n    }\n  }, {\n    key: \"action\",\n    value: function action() {\n      if ($AVATAR.state.seat.ref) return false;\n      var seat = this.getSeat($AVATAR);\n      if (!seat) return;\n      noclip = true;\n      $CURRENT_MAP.translate(this.trans.offsetX + seat.x, this.trans.offsetY + seat.y);\n      $AVATAR.trans.rotation = seat.r * Math.PI / 180;\n      noclip = false;\n      $AVATAR.state.seat.id = seat.id;\n      $AVATAR.state.seat.ref = this;\n      this.seats[seat.id].occupied = true;\n    }\n  }]);\n}(_StaticClusterClient_);\nvar Bench = /*#__PURE__*/function (_Seat_3) {\n  function Bench(initialX, initialY, initialRotation) {\n    var _this15;\n    _classCallCheck(this, Bench);\n    _this15 = _callSuper(this, Bench, [initialX, initialY, initialRotation, [[-8, 1, 180, [-8, -16]], [8, 1, 180, [8, -16]]]]);\n    _defineProperty(_this15, \"width\", 27.4);\n    _defineProperty(_this15, \"height\", 21.4);\n    _defineProperty(_this15, \"name\", \"bench\");\n    _defineProperty(_this15, \"clusterName\", \"bench\");\n    _defineProperty(_this15, \"texture\", textures.objects.bench);\n    _defineProperty(_this15, \"obstacle\", true);\n    _defineProperty(_this15, \"segments\", [[-13.7, -7.3, 27.4, 18]]);\n    return _this15;\n  }\n  _inherits(Bench, _Seat_3);\n  return _createClass(Bench);\n}(_Seat_);\n_defineProperty(Bench, \"_defaultVertices\", [-13.7, 10.7, 1, 0, 0, 13.7, 10.7, 1, 0.53515625, 0, -13.7, -10.7, 1, 0, 0.8359375, 13.7, 10.7, 1, 0.53515625, 0, -13.7, -10.7, 1, 0, 0.8359375, 13.7, -10.7, 1, 0.53515625, 0.8359375]);\nvar Tile = /*#__PURE__*/function (_StaticClusterClient_6) {\n  function Tile(initialX, initialY, initialRotation) {\n    var _this16;\n    _classCallCheck(this, Tile);\n    _this16 = _callSuper(this, Tile, [initialX, initialY, initialRotation]);\n    _defineProperty(_this16, \"width\", 8.4);\n    _defineProperty(_this16, \"height\", 8.4);\n    _defineProperty(_this16, \"clusterName\", \"tile\");\n    _defineProperty(_this16, \"texture\", textures.objects.tile);\n    _defineProperty(_this16, \"bottomLayer\", true);\n    _defineProperty(_this16, \"name\", \"tile\");\n    return _this16;\n  }\n  _inherits(Tile, _StaticClusterClient_6);\n  return _createClass(Tile);\n}(_StaticClusterClient_);\n_defineProperty(Tile, \"_defaultVertices\", [-4.2, 4.2, 1, 0, 0, 4.2, 4.2, 1, 0.65625, 0, -4.2, -4.2, 1, 0, 0.65625, 4.2, 4.2, 1, 0.65625, 0, -4.2, -4.2, 1, 0, 0.65625, 4.2, -4.2, 1, 0.65625, 0.65625]);\nvar LightSwitch = /*#__PURE__*/function (_StaticClusterClient_7) {\n  function LightSwitch(initialX, initialY, initialRotation) {\n    var _this17;\n    _classCallCheck(this, LightSwitch);\n    _this17 = _callSuper(this, LightSwitch, [initialX, initialY, initialRotation]);\n    _defineProperty(_this17, \"width\", 3.2);\n    _defineProperty(_this17, \"height\", 4.8);\n    _defineProperty(_this17, \"clusterName\", \"light switch\");\n    _defineProperty(_this17, \"texture\", textures.objects.lightswitch);\n    _defineProperty(_this17, \"name\", \"light switch\");\n    _defineProperty(_this17, \"interactable\", true);\n    _defineProperty(_this17, \"minDistance\", 18);\n    return _this17;\n  }\n  _inherits(LightSwitch, _StaticClusterClient_7);\n  return _createClass(LightSwitch, [{\n    key: \"action\",\n    value: function action() {\n      $AUDIO.playSound(\"light-switch\");\n      if (this.map.darkness <= 1) {\n        this.map.lighting = true;\n        this.map.darkness = 5;\n        this.on = false;\n        return;\n      }\n      this.map.lighting = false;\n      this.map.darkness = 1;\n    }\n  }]);\n}(_StaticClusterClient_);\n_defineProperty(LightSwitch, \"_defaultVertices\", [-1.6, 2.4, 1, 0, 0, 1.6, 2.4, 1, 0.5, 0, -1.6, -2.4, 1, 0, 0.75, 1.6, 2.4, 1, 0.5, 0, -1.6, -2.4, 1, 0, 0.75, 1.6, -2.4, 1, 0.5, 0.75]);\nvar Chair = /*#__PURE__*/function (_Seat_4) {\n  function Chair(initialX, initialY, initialRotation) {\n    var _this18;\n    _classCallCheck(this, Chair);\n    _this18 = _callSuper(this, Chair, [initialX, initialY, initialRotation, [[0, 1, 180, [0, -16]]]]);\n    _defineProperty(_this18, \"width\", 11.4);\n    _defineProperty(_this18, \"height\", 21.4);\n    _defineProperty(_this18, \"name\", \"chair\");\n    _defineProperty(_this18, \"clusterName\", \"chair\");\n    _defineProperty(_this18, \"texture\", textures.objects.chair);\n    _defineProperty(_this18, \"obstacle\", true);\n    _defineProperty(_this18, \"interactable\", true);\n    _defineProperty(_this18, \"minDistance\", 12);\n    _defineProperty(_this18, \"segments\", [[-5.7, -7.5, 11.4, 18.2]]);\n    return _this18;\n  }\n  _inherits(Chair, _Seat_4);\n  return _createClass(Chair);\n}(_Seat_);\n_defineProperty(Chair, \"_defaultVertices\", [-5.7, 10.7, 1, 0, 0, 5.7, 10.7, 1, 0.890625, 0, -5.7, -10.7, 1, 0, 0.8359375, 5.7, 10.7, 1, 0.890625, 0, -5.7, -10.7, 1, 0, 0.8359375, 5.7, -10.7, 1, 0.890625, 0.8359375]);\nvar SmallPlant = /*#__PURE__*/function (_StaticClusterClient_8) {\n  function SmallPlant(initialX, initialY, initialRotation) {\n    var _this19;\n    _classCallCheck(this, SmallPlant);\n    _this19 = _callSuper(this, SmallPlant, [initialX, initialY, initialRotation]);\n    _defineProperty(_this19, \"width\", 5.4);\n    _defineProperty(_this19, \"height\", 16);\n    _defineProperty(_this19, \"texture\", textures.objects.smallplant);\n    _defineProperty(_this19, \"name\", \"small plant\");\n    _defineProperty(_this19, \"clusterName\", \"small plant\");\n    _defineProperty(_this19, \"obstacle\", true);\n    _defineProperty(_this19, \"segments\", [[-2.7, -0.5, 5.4, 8.4]]);\n    _defineProperty(_this19, \"topLayer\", true);\n    return _this19;\n  }\n  _inherits(SmallPlant, _StaticClusterClient_8);\n  return _createClass(SmallPlant);\n}(_StaticClusterClient_);\n_defineProperty(SmallPlant, \"_defaultVertices\", [-2.7, 0.5, 1, 0, 0.29296875, 2.7, 0.5, 1, 0.421875, 0.29296875, -2.7, -7.9, 1, 0, 0.62109375, 2.7, 0.5, 1, 0.421875, 0.29296875, -2.7, -7.9, 1, 0, 0.62109375, 2.7, -7.9, 1, 0.421875, 0.62109375, -2.7, 8.100000000000001, 1, 0, -0.00390625, 2.7, 8.100000000000001, 1, 0.421875, -0.00390625, -2.7, 0.09999999999999964, 1, 0, 0.30859375, 2.7, 8.100000000000001, 1, 0.421875, -0.00390625, -2.7, 0.09999999999999964, 1, 0, 0.30859375, 2.7, 0.09999999999999964, 1, 0.421875, 0.30859375]);\nvar RoadSign = /*#__PURE__*/function (_StaticClusterClient_9) {\n  function RoadSign(initialX, initialY, initialRotation) {\n    var _this20;\n    _classCallCheck(this, RoadSign);\n    _this20 = _callSuper(this, RoadSign, [initialX, initialY, initialRotation]);\n    _defineProperty(_this20, \"width\", 8);\n    _defineProperty(_this20, \"height\", 30.8);\n    _defineProperty(_this20, \"name\", \"road sign\");\n    _defineProperty(_this20, \"clusterName\", \"road sign\");\n    _defineProperty(_this20, \"texture\", textures.objects.fences);\n    _defineProperty(_this20, \"topLayer\", true);\n    _defineProperty(_this20, \"obstacle\", true);\n    _defineProperty(_this20, \"segments\", [[-0.8, 10, 1.6, 5.4]]);\n    return _this20;\n  }\n  _inherits(RoadSign, _StaticClusterClient_9);\n  return _createClass(RoadSign);\n}(_StaticClusterClient_);\n_defineProperty(RoadSign, \"_defaultVertices\", [-4.2, 15.6, 1, 0.2578125, 0, 3.8, 15.6, 1, 0.3359375, 0, -4.2, 4.799999999999999, 1, 0.2578125, 0.10546875, 3.8, 15.6, 1, 0.3359375, 0, -4.2, 4.799999999999999, 1, 0.2578125, 0.10546875, 3.8, 4.799999999999999, 1, 0.3359375, 0.10546875, -1, 5.200000000000001, 1, 0.2890625, 0.1015625, 0.5999999999999996, 5.200000000000001, 1, 0.3046875, 0.1015625, -1, -15.2, 1, 0.2890625, 0.30078125, 0.5999999999999996, 5.200000000000001, 1, 0.3046875, 0.1015625, -1, -15.2, 1, 0.2890625, 0.30078125, 0.5999999999999996, -15.2, 1, 0.3046875, 0.30078125]);\nvar Laptop = /*#__PURE__*/function (_StaticClusterClient_10) {\n  function Laptop(initialX, initialY, initialRotation) {\n    var _this21;\n    _classCallCheck(this, Laptop);\n    _this21 = _callSuper(this, Laptop, [initialX, initialY, initialRotation || (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360)]);\n    _defineProperty(_this21, \"width\", 8.72);\n    _defineProperty(_this21, \"clusterName\", \"laptop\");\n    _defineProperty(_this21, \"texture\", textures.objects.laptop);\n    _defineProperty(_this21, \"height\", 9.72);\n    _defineProperty(_this21, \"subLayer\", 1);\n    _defineProperty(_this21, \"moveable\", true);\n    _defineProperty(_this21, \"name\", \"laptop\");\n    return _this21;\n  }\n  _inherits(Laptop, _StaticClusterClient_10);\n  return _createClass(Laptop);\n}(_StaticClusterClient_);\n_defineProperty(Laptop, \"_defaultVertices\", [-4.36, 4.86, 1, 0, 0, 4.36, 4.86, 1, 0.68125, 0, -4.36, -4.86, 1, 0, 0.759375, 4.36, 4.86, 1, 0.68125, 0, -4.36, -4.86, 1, 0, 0.759375, 4.36, -4.86, 1, 0.68125, 0.759375]);\nvar SteakAndFries = /*#__PURE__*/function (_StaticClusterClient_11) {\n  function SteakAndFries(initialX, initialY, initialRotation) {\n    var _this22;\n    _classCallCheck(this, SteakAndFries);\n    _this22 = _callSuper(this, SteakAndFries, [initialX, initialY, initialRotation || (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360)]);\n    _defineProperty(_this22, \"width\", 10.4);\n    _defineProperty(_this22, \"clusterName\", \"steak and fries\");\n    _defineProperty(_this22, \"texture\", textures.objects.steakandfries);\n    _defineProperty(_this22, \"height\", 10.4);\n    _defineProperty(_this22, \"subLayer\", 1);\n    _defineProperty(_this22, \"moveable\", true);\n    _defineProperty(_this22, \"name\", \"stak and fries\");\n    return _this22;\n  }\n  _inherits(SteakAndFries, _StaticClusterClient_11);\n  return _createClass(SteakAndFries);\n}(_StaticClusterClient_);\n_defineProperty(SteakAndFries, \"_defaultVertices\", [-5.2, 5.2, 1, 0, 0, 5.2, 5.2, 1, 0.8125, 0, -5.2, -5.2, 1, 0, 0.8125, 5.2, 5.2, 1, 0.8125, 0, -5.2, -5.2, 1, 0, 0.8125, 5.2, -5.2, 1, 0.8125, 0.8125]);\nvar UrbanFence = /*#__PURE__*/function (_MixedStaticClusterCl) {\n  function UrbanFence(initialX, initialY, initialRotation) {\n    var _this23;\n    _classCallCheck(this, UrbanFence);\n    _this23 = _callSuper(this, UrbanFence, [initialX, initialY, initialRotation]);\n    _defineProperty(_this23, \"width\", 48.4);\n    _defineProperty(_this23, \"height\", 28.4);\n    _defineProperty(_this23, \"name\", \"urban fence\");\n    _defineProperty(_this23, \"obstacle\", true);\n    _defineProperty(_this23, \"clusterName\", \"urban fence\");\n    _defineProperty(_this23, \"grouping\", 1);\n    _defineProperty(_this23, \"texture\", textures.objects.fences);\n    _defineProperty(_this23, \"segments\", [[-24.2, -14.2, 48.4, 28.4]]);\n    return _this23;\n  }\n  _inherits(UrbanFence, _MixedStaticClusterCl);\n  return _createClass(UrbanFence);\n}(_MixedStaticClusterClient_);\n_defineProperty(UrbanFence, \"_defaultVertices\", [-24.2, 14.2, 1, 0, 0.30078125, 0, 24.2, 14.2, 1, 0.47265625, 0.30078125, 0, -24.2, -14.2, 1, 0, 0.578125, 0, 24.2, 14.2, 1, 0.47265625, 0.30078125, 0, -24.2, -14.2, 1, 0, 0.578125, 0, 24.2, -14.2, 1, 0.47265625, 0.578125, 0]);\nvar UrbanFenceVertical = /*#__PURE__*/function (_MixedStaticClusterCl2) {\n  function UrbanFenceVertical(initialX, initialY, initialRotation) {\n    var _this24;\n    _classCallCheck(this, UrbanFenceVertical);\n    _this24 = _callSuper(this, UrbanFenceVertical, [initialX, initialY, initialRotation]);\n    _defineProperty(_this24, \"width\", 4.4);\n    _defineProperty(_this24, \"height\", 56.4);\n    _defineProperty(_this24, \"name\", \"urban fence vertical\");\n    _defineProperty(_this24, \"clusterName\", \"urban fence\");\n    _defineProperty(_this24, \"grouping\", 1);\n    _defineProperty(_this24, \"texture\", textures.objects.fences);\n    _defineProperty(_this24, \"obstacle\", true);\n    _defineProperty(_this24, \"segments\", [[-2.2, -28.2, 4.4, 56.4]]);\n    return _this24;\n  }\n  _inherits(UrbanFenceVertical, _MixedStaticClusterCl2);\n  return _createClass(UrbanFenceVertical);\n}(_MixedStaticClusterClient_);\n_defineProperty(UrbanFenceVertical, \"_defaultVertices\", [-2.2, 28.2, 1, 0.47265625, 0.30078125, 0, 2.2, 28.2, 1, 0.515625, 0.30078125, 0, -2.2, -28.2, 1, 0.47265625, 0.8515625, 0, 2.2, 28.2, 1, 0.515625, 0.30078125, 0, -2.2, -28.2, 1, 0.47265625, 0.8515625, 0, 2.2, -28.2, 1, 0.515625, 0.8515625, 0]);\nvar UrbanFenceHalf = /*#__PURE__*/function (_MixedStaticClusterCl3) {\n  function UrbanFenceHalf(initialX, initialY, initialRotation) {\n    var _this25;\n    _classCallCheck(this, UrbanFenceHalf);\n    _this25 = _callSuper(this, UrbanFenceHalf, [initialX, initialY, initialRotation]);\n    _defineProperty(_this25, \"width\", 24.4);\n    _defineProperty(_this25, \"height\", 28.4);\n    _defineProperty(_this25, \"name\", \"urban fence half\");\n    _defineProperty(_this25, \"clusterName\", \"urban fence\");\n    _defineProperty(_this25, \"grouping\", 1);\n    _defineProperty(_this25, \"texture\", textures.objects.urbanfencehalf);\n    _defineProperty(_this25, \"obstacle\", true);\n    _defineProperty(_this25, \"segments\", [[-12.2, -14.2, 24.4, 28.4]]);\n    return _this25;\n  }\n  _inherits(UrbanFenceHalf, _MixedStaticClusterCl3);\n  return _createClass(UrbanFenceHalf);\n}(_MixedStaticClusterClient_);\n_defineProperty(UrbanFenceHalf, \"_defaultVertices\", [-12.2, 14.2, 1, 0.3359375, 0, 0, 12.2, 14.2, 1, 0.57421875, 0, 0, -12.2, -14.2, 1, 0.3359375, 0.27734375, 0, 12.2, 14.2, 1, 0.57421875, 0, 0, -12.2, -14.2, 1, 0.3359375, 0.27734375, 0, 12.2, -14.2, 1, 0.57421875, 0.27734375, 0]);\nvar PicnicTable = /*#__PURE__*/function (_StaticClusterClient_12) {\n  function PicnicTable(initialX, initialY, initialRotation) {\n    var _this26;\n    _classCallCheck(this, PicnicTable);\n    _this26 = _callSuper(this, PicnicTable, [initialX, initialY, initialRotation]);\n    _defineProperty(_this26, \"width\", 28.4);\n    _defineProperty(_this26, \"height\", 17.4);\n    _defineProperty(_this26, \"name\", \"picnic table\");\n    _defineProperty(_this26, \"obstacle\", true);\n    _defineProperty(_this26, \"clusterName\", \"picnic table\");\n    _defineProperty(_this26, \"texture\", textures.objects.picnictable);\n    _defineProperty(_this26, \"segments\", [[-14.2, -12.1, 8.4, 18.4], [-6.2, -11.7, 12.4, 20.4], [5.8, -12.1, 8.4, 18.4]]);\n    _defineProperty(_this26, \"interactable\", true);\n    _defineProperty(_this26, \"minDistance\", 20);\n    return _this26;\n  }\n  _inherits(PicnicTable, _StaticClusterClient_12);\n  return _createClass(PicnicTable, [{\n    key: \"action\",\n    value: function action() {\n      noclip = true;\n      if (this.trans.offsetX > $AVATAR.trans.offsetX) {\n        $CURRENT_MAP.translate(this.trans.offsetX - 11, this.trans.offsetY - 2);\n        $AVATAR.trans.rotation = -90 * Math.PI / 180;\n      } else {\n        $CURRENT_MAP.translate(this.trans.offsetX + 11, this.trans.offsetY - 2);\n        $AVATAR.trans.rotation = 90 * Math.PI / 180;\n      }\n      noclip = false;\n    }\n  }]);\n}(_StaticClusterClient_);\n_defineProperty(PicnicTable, \"_defaultVertices\", [-14.2, 6.300000000000001, 1, 0, 0.09375, -5.799999999999999, 6.300000000000001, 1, 0.1640625, 0.09375, -14.2, -12.1, 1, 0, 0.8125, -5.799999999999999, 6.300000000000001, 1, 0.1640625, 0.09375, -14.2, -12.1, 1, 0, 0.8125, -5.799999999999999, -12.1, 1, 0.1640625, 0.8125, -6.199999999999999, 8.7, 1, 0.15625, 0, 6.199999999999999, 8.7, 1, 0.3984375, 0, -6.199999999999999, -11.7, 1, 0.15625, 0.796875, 6.199999999999999, 8.7, 1, 0.3984375, 0, -6.199999999999999, -11.7, 1, 0.15625, 0.796875, 6.199999999999999, -11.7, 1, 0.3984375, 0.796875, 5.800000000000001, 6.300000000000001, 1, 0.390625, 0.09375, 14.2, 6.300000000000001, 1, 0.5546875, 0.09375, 5.800000000000001, -12.1, 1, 0.390625, 0.8125, 14.2, 6.300000000000001, 1, 0.5546875, 0.09375, 5.800000000000001, -12.1, 1, 0.390625, 0.8125, 14.2, -12.1, 1, 0.5546875, 0.8125, -8.2, -11.299999999999999, 1, 0.1171875, 0.78125, 8.2, -11.299999999999999, 1, 0.4375, 0.78125, -8.2, -15.7, 1, 0.1171875, 0.953125, 8.2, -11.299999999999999, 1, 0.4375, 0.78125, -8.2, -15.7, 1, 0.1171875, 0.953125, 8.2, -15.7, 1, 0.4375, 0.953125]);\nvar Road = /*#__PURE__*/function (_MixedStaticClusterCl4) {\n  function Road(initialX, initialY, initialRotation) {\n    var _this27;\n    _classCallCheck(this, Road);\n    _this27 = _callSuper(this, Road, [initialX, initialY, initialRotation]);\n    _defineProperty(_this27, \"width\", 50);\n    _defineProperty(_this27, \"height\", 28.2);\n    _defineProperty(_this27, \"name\", \"road\");\n    _defineProperty(_this27, \"clusterName\", \"road\");\n    _defineProperty(_this27, \"bottomLayer\", true);\n    _defineProperty(_this27, \"texture\", textures.objects.roads);\n    _defineProperty(_this27, \"grouping\", 0);\n    return _this27;\n  }\n  _inherits(Road, _MixedStaticClusterCl4);\n  return _createClass(Road);\n}(_MixedStaticClusterClient_);\n_defineProperty(Road, \"_defaultVertices\", [-25, 14.1, 1, 0, 0, 0, 25, 14.1, 1, 0.48828125, 0, 0, -25, -14.1, 1, 0, 0.275390625, 0, 25, 14.1, 1, 0.48828125, 0, 0, -25, -14.1, 1, 0, 0.275390625, 0, 25, -14.1, 1, 0.48828125, 0.275390625, 0]);\nvar RoadDouble = /*#__PURE__*/function (_MixedStaticClusterCl5) {\n  function RoadDouble(initialX, initialY, initialRotation) {\n    var _this28;\n    _classCallCheck(this, RoadDouble);\n    _this28 = _callSuper(this, RoadDouble, [initialX, initialY, initialRotation]);\n    _defineProperty(_this28, \"width\", 50);\n    _defineProperty(_this28, \"height\", 28.2);\n    _defineProperty(_this28, \"name\", \"road double\");\n    _defineProperty(_this28, \"clusterName\", \"road\");\n    _defineProperty(_this28, \"bottomLayer\", true);\n    _defineProperty(_this28, \"texture\", textures.objects.roads);\n    _defineProperty(_this28, \"grouping\", 0);\n    return _this28;\n  }\n  _inherits(RoadDouble, _MixedStaticClusterCl5);\n  return _createClass(RoadDouble);\n}(_MixedStaticClusterClient_);\n_defineProperty(RoadDouble, \"_defaultVertices\", [-25, 14.1, 1, 0, 0, 1, 25, 14.1, 1, 0.9765625, 0, 1, -25, -14.1, 1, 0, 0.55078125, 1, 25, 14.1, 1, 0.9765625, 0, 1, -25, -14.1, 1, 0, 0.55078125, 1, 25, -14.1, 1, 0.9765625, 0.55078125, 1]);\nvar RoadCorner = /*#__PURE__*/function (_StaticClusterClient_13) {\n  function RoadCorner(initialX, initialY, initialRotation) {\n    var _this29;\n    _classCallCheck(this, RoadCorner);\n    _this29 = _callSuper(this, RoadCorner, [initialX, initialY, initialRotation]);\n    _defineProperty(_this29, \"width\", 28.2);\n    _defineProperty(_this29, \"height\", 28.2);\n    _defineProperty(_this29, \"name\", \"road corner\");\n    _defineProperty(_this29, \"bottomLayer\", true);\n    _defineProperty(_this29, \"clusterName\", \"road\");\n    _defineProperty(_this29, \"texture\", textures.objects.roads);\n    _defineProperty(_this29, \"grouping\", 0);\n    return _this29;\n  }\n  _inherits(RoadCorner, _StaticClusterClient_13);\n  return _createClass(RoadCorner);\n}(_StaticClusterClient_);\n_defineProperty(RoadCorner, \"_defaultVertices\", [-14.1, 14.1, 1, 0, 0.275390625, 0, 14.1, 14.1, 1, 0.275390625, 0.275390625, 0, -14.1, -14.1, 1, 0, 0.55078125, 0, 14.1, 14.1, 1, 0.275390625, 0.275390625, 0, -14.1, -14.1, 1, 0, 0.55078125, 0, 14.1, -14.1, 1, 0.275390625, 0.55078125, 0]);\nvar RoadTriCorner = /*#__PURE__*/function (_StaticClusterClient_14) {\n  function RoadTriCorner(initialX, initialY, initialRotation) {\n    var _this30;\n    _classCallCheck(this, RoadTriCorner);\n    _this30 = _callSuper(this, RoadTriCorner, [initialX, initialY, initialRotation]);\n    _defineProperty(_this30, \"width\", 28.2);\n    _defineProperty(_this30, \"height\", 28.2);\n    _defineProperty(_this30, \"name\", \"road tri corner\");\n    _defineProperty(_this30, \"clusterName\", \"road\");\n    _defineProperty(_this30, \"grouping\", 0);\n    _defineProperty(_this30, \"bottomLayer\", true);\n    _defineProperty(_this30, \"texture\", textures.objects.roads);\n    return _this30;\n  }\n  _inherits(RoadTriCorner, _StaticClusterClient_14);\n  return _createClass(RoadTriCorner);\n}(_StaticClusterClient_);\n_defineProperty(RoadTriCorner, \"_defaultVertices\", [-14.1, 14.1, 1, 0.275390625, 0.275390625, 0, 14.1, 14.1, 1, 0.55078125, 0.275390625, 0, -14.1, -14.1, 1, 0.275390625, 0.55078125, 0, 14.1, 14.1, 1, 0.55078125, 0.275390625, 0, -14.1, -14.1, 1, 0.275390625, 0.55078125, 0, 14.1, -14.1, 1, 0.55078125, 0.55078125, 0]);\nvar RoadQuadCorner = /*#__PURE__*/function (_StaticClusterClient_15) {\n  function RoadQuadCorner(initialX, initialY, initialRotation) {\n    var _this31;\n    _classCallCheck(this, RoadQuadCorner);\n    _this31 = _callSuper(this, RoadQuadCorner, [initialX, initialY, initialRotation]);\n    _defineProperty(_this31, \"width\", 28.2);\n    _defineProperty(_this31, \"height\", 28.2);\n    _defineProperty(_this31, \"clusterName\", \"road\");\n    _defineProperty(_this31, \"texture\", textures.objects.roads);\n    _defineProperty(_this31, \"grouping\", 0);\n    _defineProperty(_this31, \"bottomLayer\", true);\n    _defineProperty(_this31, \"name\", \"road quad corner\");\n    return _this31;\n  }\n  _inherits(RoadQuadCorner, _StaticClusterClient_15);\n  return _createClass(RoadQuadCorner);\n}(_StaticClusterClient_);\n_defineProperty(RoadQuadCorner, \"_defaultVertices\", [-14.1, 14.1, 1, 0, 0, 4, 14.1, 14.1, 1, 0.55078125, 0, 4, -14.1, -14.1, 1, 0, 0.55078125, 4, 14.1, 14.1, 1, 0.55078125, 0, 4, -14.1, -14.1, 1, 0, 0.55078125, 4, 14.1, -14.1, 1, 0.55078125, 0.55078125, 4]);\nvar Door = /*#__PURE__*/function (_StaticClusterClient_16) {\n  function Door(label) {\n    var _this32;\n    var room = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n    var initialX = arguments.length > 2 ? arguments[2] : undefined;\n    var initialY = arguments.length > 3 ? arguments[3] : undefined;\n    var initialRotation = arguments.length > 4 ? arguments[4] : undefined;\n    var outPoint = arguments.length > 5 ? arguments[5] : undefined;\n    var buildingExit = arguments.length > 6 ? arguments[6] : undefined;\n    _classCallCheck(this, Door);\n    _this32 = _callSuper(this, Door, [initialX, initialY, initialRotation]);\n    _defineProperty(_this32, \"width\", 14.8);\n    _defineProperty(_this32, \"height\", 20.6);\n    _defineProperty(_this32, \"clusterName\", \"door\");\n    _defineProperty(_this32, \"texture\", textures.objects.door);\n    _defineProperty(_this32, \"name\", \"door\");\n    _defineProperty(_this32, \"obstacle\", true);\n    _defineProperty(_this32, \"segments\", [[-7.3, -0.2, 14.6, 9.4]]);\n    _defineProperty(_this32, \"exclude\", true);\n    _defineProperty(_this32, \"interactable\", true);\n    _defineProperty(_this32, \"minDistance\", 17);\n    if (label) {\n      _this32.label = new Text(label.substring(0, 10), 50, false, _this32.trans.offsetX, _this32.trans.offsetY + 3);\n    }\n    _this32.text = label || false;\n    _this32.roomIndex = room;\n    _this32.room = room;\n    _this32.buildingExit = buildingExit;\n    _this32.outPoint = outPoint;\n    return _this32;\n  }\n  _inherits(Door, _StaticClusterClient_16);\n  return _createClass(Door, [{\n    key: \"postLink\",\n    value: function postLink() {\n      if (this.label) {\n        this.label.exclude = true;\n        this.label.managedMovement = true;\n        this.map.link(this.label);\n      }\n    }\n  }, {\n    key: \"action\",\n    value: function action() {\n      if (typeof this.room === \"number\") this.room = this.room < 0 ? this.map.PARENT_MAP : this.map.SUB_MAPS[this.room];\n      if (this.room) {\n        requestTransition(function () {\n          delete $CURRENT_MAP.avatars[$AVATAR.id];\n          delete $CURRENT_MAP.obstacles[$AVATAR.id];\n          $CURRENT_MAP = this.room;\n          $AVATAR.rotate(180);\n          this.map.move = true;\n          if ($AVATAR.state.pickup.current) {\n            $AVATAR.state.pickup.current[\"delete\"]();\n            $CURRENT_MAP.link($AVATAR.state.pickup.current);\n          }\n          if (this.outPoint) {\n            var _this$outPoint = _slicedToArray(this.outPoint, 2),\n              x = _this$outPoint[0],\n              y = _this$outPoint[1];\n            if (this.buildingExit && this.map.building) {\n              var b = this.map.building;\n              noclip = true;\n              $CURRENT_MAP.translate(-$CURRENT_MAP.centerX + (b.trans.offsetX + $CURRENT_MAP.centerX + x), -$CURRENT_MAP.centerY + (b.trans.offsetY + $CURRENT_MAP.centerY + y));\n              noclip = false;\n            } else {\n              noclip = true;\n              $CURRENT_MAP.translate(-$CURRENT_MAP.centerX + x, -$CURRENT_MAP.centerY + y);\n              noclip = false;\n            }\n          }\n          $CURRENT_MAP.avatars[$AVATAR.id] = $AVATAR;\n          $CURRENT_MAP.obstacles[$AVATAR.id] = $AVATAR;\n          $MAP_DISPLAY.update();\n          $AUDIO.playSound(\"door-close\");\n        }.bind(this));\n      }\n    }\n  }, {\n    key: \"clean\",\n    value: function clean() {\n      if (this.label) this.label[\"delete\"]();\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var translateVertices = arguments.length > 3 ? arguments[3] : undefined;\n      if (this.label) this.label.translate(x, y);\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n      if (rotation) {\n        this.trans.rotation = rotation;\n      }\n      if (translateVertices) this.cluster.translateVertices(this.clusterIndex, this.constructor._defaultVertices, -this.cluster.trans.offsetX + this.trans.offsetX, -this.cluster.trans.offsetY + this.trans.offsetY, this.trans.rotation);\n    }\n  }]);\n}(_StaticClusterClient_);\n_defineProperty(Door, \"_defaultVertices\", [-7.4, 10.3, 1, 0, 0, 7.4, 10.3, 1, 0.578125, 0, -7.4, -10.3, 1, 0, 0.8046875, 7.4, 10.3, 1, 0.578125, 0, -7.4, -10.3, 1, 0, 0.8046875, 7.4, -10.3, 1, 0.578125, 0.8046875]);\nvar Table = /*#__PURE__*/function (_StaticClusterClient_17) {\n  function Table(initialX, initialY, initialRotation) {\n    var _this33;\n    _classCallCheck(this, Table);\n    _this33 = _callSuper(this, Table, [initialX, initialY, initialRotation]);\n    _defineProperty(_this33, \"width\", 28.4);\n    _defineProperty(_this33, \"height\", 19.4);\n    _defineProperty(_this33, \"name\", \"table\");\n    _defineProperty(_this33, \"clusterName\", \"table\");\n    _defineProperty(_this33, \"texture\", textures.objects.table);\n    _defineProperty(_this33, \"obstacle\", true);\n    _defineProperty(_this33, \"segments\", [[-14.2, -6.5, 28.4, 16.2]]);\n    return _this33;\n  }\n  _inherits(Table, _StaticClusterClient_17);\n  return _createClass(Table);\n}(_StaticClusterClient_);\n_defineProperty(Table, \"_defaultVertices\", [-14.2, 9.7, 1, 0, 0, 14.2, 9.7, 1, 0.5546875, 0, -14.2, -9.7, 1, 0, 0.7578125, 14.2, 9.7, 1, 0.5546875, 0, -14.2, -9.7, 1, 0, 0.7578125, 14.2, -9.7, 1, 0.5546875, 0.7578125]);\nvar SmallTable = /*#__PURE__*/function (_StaticClusterClient_18) {\n  function SmallTable(initialX, initialY, initialRotation) {\n    var _this34;\n    _classCallCheck(this, SmallTable);\n    _this34 = _callSuper(this, SmallTable, [initialX, initialY, initialRotation]);\n    _defineProperty(_this34, \"width\", 16.4);\n    _defineProperty(_this34, \"height\", 17.4);\n    _defineProperty(_this34, \"name\", \"small table\");\n    _defineProperty(_this34, \"clusterName\", \"small table\");\n    _defineProperty(_this34, \"texture\", textures.objects.smalltable);\n    _defineProperty(_this34, \"obstacle\", true);\n    _defineProperty(_this34, \"segments\", [[-8.2, -5.7, 16.4, 14.4]]);\n    return _this34;\n  }\n  _inherits(SmallTable, _StaticClusterClient_18);\n  return _createClass(SmallTable);\n}(_StaticClusterClient_);\n_defineProperty(SmallTable, \"_defaultVertices\", [-8.2, 8.7, 1, 0, 0, 8.2, 8.7, 1, 0.640625, 0, -8.2, -8.7, 1, 0, 0.6796875, 8.2, 8.7, 1, 0.640625, 0, -8.2, -8.7, 1, 0, 0.6796875, 8.2, -8.7, 1, 0.640625, 0.6796875]);\nvar Gazebo = /*#__PURE__*/function (_StaticClusterClient_19) {\n  function Gazebo(initialX, initialY, initialRotation) {\n    var _this35;\n    _classCallCheck(this, Gazebo);\n    _this35 = _callSuper(this, Gazebo, [initialX, initialY, initialRotation]);\n    _defineProperty(_this35, \"width\", 64.4);\n    _defineProperty(_this35, \"height\", 68.4);\n    _defineProperty(_this35, \"name\", \"gazebo\");\n    _defineProperty(_this35, \"clusterName\", \"gazebo\");\n    _defineProperty(_this35, \"texture\", textures.objects.gazebo);\n    _defineProperty(_this35, \"topLayer\", true);\n    _defineProperty(_this35, \"obstacle\", true);\n    _defineProperty(_this35, \"segments\", [[-28.2, -2, 4, 4], [23.8, -2, 4, 4], [-28.2, -34, 4, 4], [23.8, -34, 4, 4]]);\n    return _this35;\n  }\n  _inherits(Gazebo, _StaticClusterClient_19);\n  return _createClass(Gazebo);\n}(_StaticClusterClient_);\n_defineProperty(Gazebo, \"_defaultVertices\", [-32.2, 34.2, 1, 0, 0, 32.2, 34.2, 1, 0.62890625, 0, -32.2, -34.2, 1, 0, 0.66796875, 32.2, 34.2, 1, 0.62890625, 0, -32.2, -34.2, 1, 0, 0.66796875, 32.2, -34.2, 1, 0.62890625, 0.66796875]);\nvar Vendor1 = /*#__PURE__*/function (_StaticClusterClient_20) {\n  function Vendor1(initialX, initialY, initialRotation) {\n    var _this36;\n    _classCallCheck(this, Vendor1);\n    _this36 = _callSuper(this, Vendor1, [initialX, initialY, initialRotation]);\n    _defineProperty(_this36, \"width\", 40.4);\n    _defineProperty(_this36, \"height\", 28.4);\n    _defineProperty(_this36, \"name\", \"vendor 1\");\n    _defineProperty(_this36, \"clusterName\", \"vendor 1\");\n    _defineProperty(_this36, \"texture\", textures.objects.vendor1);\n    _defineProperty(_this36, \"topLayer\", true);\n    _defineProperty(_this36, \"obstacle\", true);\n    _defineProperty(_this36, \"segments\", [[-28.2, -2, 4, 4]]);\n    return _this36;\n  }\n  _inherits(Vendor1, _StaticClusterClient_20);\n  return _createClass(Vendor1);\n}(_StaticClusterClient_);\n_defineProperty(Vendor1, \"_defaultVertices\", [-20.2, 14.2, 1, 0, 0, 20.2, 14.2, 1, 0.7890625, 0, -20.2, -14.2, 1, 0, 0.5546875, 20.2, 14.2, 1, 0.7890625, 0, -20.2, -14.2, 1, 0, 0.5546875, 20.2, -14.2, 1, 0.7890625, 0.5546875]);\nvar Bush = /*#__PURE__*/function (_StaticClusterClient_21) {\n  function Bush(initialX, initialY, initialRotation) {\n    var _this37;\n    _classCallCheck(this, Bush);\n    _this37 = _callSuper(this, Bush, [initialX, initialY, initialRotation]);\n    _defineProperty(_this37, \"width\", 17.4);\n    _defineProperty(_this37, \"height\", 18);\n    _defineProperty(_this37, \"name\", \"bush\");\n    _defineProperty(_this37, \"clusterName\", \"bush\");\n    _defineProperty(_this37, \"texture\", textures.objects.bush);\n    _defineProperty(_this37, \"obstacle\", true);\n    _defineProperty(_this37, \"segments\", [[-6.5, -6.5, 13, 13]]);\n    return _this37;\n  }\n  _inherits(Bush, _StaticClusterClient_21);\n  return _createClass(Bush);\n}(_StaticClusterClient_);\n_defineProperty(Bush, \"_defaultVertices\", [-8.899999999999999, 9.2, 1, -0.0078125, -0.0078125, 8.5, 9.2, 1, 0.671875, -0.0078125, -8.899999999999999, -8.8, 1, -0.0078125, 0.6953125, 8.5, 9.2, 1, 0.671875, -0.0078125, -8.899999999999999, -8.8, 1, -0.0078125, 0.6953125, 8.5, -8.8, 1, 0.671875, 0.6953125]);\nvar Whiteboard = /*#__PURE__*/function (_StaticClusterClient_22) {\n  function Whiteboard(initialX, initialY, initialRotation) {\n    var _this38;\n    _classCallCheck(this, Whiteboard);\n    _this38 = _callSuper(this, Whiteboard, [initialX, initialY, initialRotation]);\n    _defineProperty(_this38, \"width\", 30.9);\n    _defineProperty(_this38, \"height\", 16.9);\n    _defineProperty(_this38, \"name\", \"whiteboard\");\n    _defineProperty(_this38, \"clusterName\", \"whiteboard\");\n    _defineProperty(_this38, \"texture\", textures.objects.whiteboard);\n    return _this38;\n  }\n  _inherits(Whiteboard, _StaticClusterClient_22);\n  return _createClass(Whiteboard);\n}(_StaticClusterClient_);\n_defineProperty(Whiteboard, \"_defaultVertices\", [-15.649999999999999, 8.650000000000002, 1, -0.00390625, -0.0078125, 15.25, 8.650000000000002, 1, 0.599609375, -0.0078125, -15.649999999999999, -8.25, 1, -0.00390625, 0.65234375, 15.25, 8.650000000000002, 1, 0.599609375, -0.0078125, -15.649999999999999, -8.25, 1, -0.00390625, 0.65234375, 15.25, -8.25, 1, 0.599609375, 0.65234375]);\nvar Pinboard = /*#__PURE__*/function (_StaticClusterClient_23) {\n  function Pinboard(initialX, initialY, initialRotation) {\n    var _this39;\n    _classCallCheck(this, Pinboard);\n    _this39 = _callSuper(this, Pinboard, [initialX, initialY, initialRotation]);\n    _defineProperty(_this39, \"width\", 33);\n    _defineProperty(_this39, \"height\", 19);\n    _defineProperty(_this39, \"name\", \"pinboard\");\n    _defineProperty(_this39, \"clusterName\", \"pinboard\");\n    _defineProperty(_this39, \"texture\", textures.objects.pinboard);\n    return _this39;\n  }\n  _inherits(Pinboard, _StaticClusterClient_23);\n  return _createClass(Pinboard);\n}(_StaticClusterClient_);\n_defineProperty(Pinboard, \"_defaultVertices\", [-16.7, 9.7, 1, -0.00390625, -0.0078125, 16.299999999999997, 9.7, 1, 0.640625, -0.0078125, -16.7, -9.3, 1, -0.00390625, 0.734375, 16.299999999999997, 9.7, 1, 0.640625, -0.0078125, -16.7, -9.3, 1, -0.00390625, 0.734375, 16.299999999999997, -9.3, 1, 0.640625, 0.734375]);\nvar MetalFence = /*#__PURE__*/function (_StaticClusterClient_24) {\n  function MetalFence(initialX, initialY, initialRotation) {\n    var _this40;\n    _classCallCheck(this, MetalFence);\n    _this40 = _callSuper(this, MetalFence, [initialX, initialY, initialRotation]);\n    _defineProperty(_this40, \"width\", 29.6);\n    _defineProperty(_this40, \"height\", 16);\n    _defineProperty(_this40, \"name\", \"metal fence\");\n    _defineProperty(_this40, \"clusterName\", \"metal fence\");\n    _defineProperty(_this40, \"texture\", textures.objects.metalfence);\n    _defineProperty(_this40, \"obstacle\", true);\n    _defineProperty(_this40, \"topLayer\", true);\n    _defineProperty(_this40, \"segments\", [[-14.8, -7.6, 29.2, 2]]);\n    return _this40;\n  }\n  _inherits(MetalFence, _StaticClusterClient_24);\n  return _createClass(MetalFence);\n}(_StaticClusterClient_);\n_defineProperty(MetalFence, \"_defaultVertices\", [-14.8, 8, 1, 0, 0, 14.8, 8, 1, 0.578125, 0, -14.8, -8, 1, 0, 0.625, 14.8, 8, 1, 0.578125, 0, -14.8, -8, 1, 0, 0.625, 14.8, -8, 1, 0.578125, 0.625]);\nvar MetalFenceVertical = /*#__PURE__*/function (_StaticClusterClient_25) {\n  function MetalFenceVertical(initialX, initialY, initialRotation) {\n    var _this41;\n    _classCallCheck(this, MetalFenceVertical);\n    _this41 = _callSuper(this, MetalFenceVertical, [initialX, initialY, initialRotation]);\n    _defineProperty(_this41, \"width\", 1.7);\n    _defineProperty(_this41, \"height\", 36);\n    _defineProperty(_this41, \"name\", \"metal fence vertical\");\n    _defineProperty(_this41, \"clusterName\", \"metal fence vertical\");\n    _defineProperty(_this41, \"texture\", textures.objects.metalfencevertical);\n    _defineProperty(_this41, \"obstacle\", true);\n    _defineProperty(_this41, \"topLayer\", true);\n    _defineProperty(_this41, \"segments\", [[-0.85, -18, 1.7, 36]]);\n    return _this41;\n  }\n  _inherits(MetalFenceVertical, _StaticClusterClient_25);\n  return _createClass(MetalFenceVertical);\n}(_StaticClusterClient_);\n_defineProperty(MetalFenceVertical, \"_defaultVertices\", [-0.85, 18, 1, 0, 0, 0.85, 18, 1, 0.53125, 0, -0.85, -18, 1, 0, 0.703125, 0.85, 18, 1, 0.53125, 0, -0.85, -18, 1, 0, 0.703125, 0.85, -18, 1, 0.53125, 0.703125]);\nvar Atm = /*#__PURE__*/function (_StaticClusterClient_26) {\n  function Atm(initialX, initialY, initialRotation) {\n    var _this42;\n    _classCallCheck(this, Atm);\n    _this42 = _callSuper(this, Atm, [initialX, initialY, initialRotation]);\n    _defineProperty(_this42, \"width\", 11.4);\n    _defineProperty(_this42, \"height\", 20.4);\n    _defineProperty(_this42, \"name\", \"atm\");\n    _defineProperty(_this42, \"clusterName\", \"atm\");\n    _defineProperty(_this42, \"texture\", textures.objects.atm);\n    _defineProperty(_this42, \"obstacle\", true);\n    _defineProperty(_this42, \"segments\", [[-5.7, -5.2, 11.4, 15.4]]);\n    return _this42;\n  }\n  _inherits(Atm, _StaticClusterClient_26);\n  return _createClass(Atm);\n}(_StaticClusterClient_);\n_defineProperty(Atm, \"_defaultVertices\", [-5.7, 10.2, 1, 0, 0, 5.7, 10.2, 1, 0.890625, 0, -5.7, -10.2, 1, 0, 0.796875, 5.7, 10.2, 1, 0.890625, 0, -5.7, -10.2, 1, 0, 0.796875, 5.7, -10.2, 1, 0.890625, 0.796875]);\nvar Stopper = /*#__PURE__*/function (_StaticClusterClient_27) {\n  function Stopper(initialX, initialY, initialRotation) {\n    var _this43;\n    _classCallCheck(this, Stopper);\n    _this43 = _callSuper(this, Stopper, [initialX, initialY, initialRotation]);\n    _defineProperty(_this43, \"width\", 9.4);\n    _defineProperty(_this43, \"height\", 24.4);\n    _defineProperty(_this43, \"name\", \"stopper\");\n    _defineProperty(_this43, \"clusterName\", \"stopper\");\n    _defineProperty(_this43, \"texture\", textures.objects.stopper);\n    _defineProperty(_this43, \"topLayer\", true);\n    _defineProperty(_this43, \"obstacle\", true);\n    _defineProperty(_this43, \"segments\", [[-4.7, -12.0, 9, 6]]);\n    return _this43;\n  }\n  _inherits(Stopper, _StaticClusterClient_27);\n  return _createClass(Stopper);\n}(_StaticClusterClient_);\n_defineProperty(Stopper, \"_defaultVertices\", [-4.7, 12.2, 1, 0, 0, 4.7, 12.2, 1, 0.734375, 0, -4.7, -12.2, 1, 0, 0.953125, 4.7, 12.2, 1, 0.734375, 0, -4.7, -12.2, 1, 0, 0.953125, 4.7, -12.2, 1, 0.734375, 0.953125]);\nvar MixedBush = /*#__PURE__*/function (_StaticClusterClient_28) {\n  function MixedBush(initialX, initialY, initialRotation) {\n    var _this44;\n    _classCallCheck(this, MixedBush);\n    _this44 = _callSuper(this, MixedBush, [initialX, initialY, initialRotation]);\n    _defineProperty(_this44, \"width\", 17.4);\n    _defineProperty(_this44, \"height\", 18);\n    _defineProperty(_this44, \"name\", \"mixed bush\");\n    _defineProperty(_this44, \"clusterName\", \"mixed bush\");\n    _defineProperty(_this44, \"texture\", textures.objects.mixedbush);\n    _defineProperty(_this44, \"obstacle\", true);\n    _defineProperty(_this44, \"segments\", [[-6.5, -6.5, 13, 13]]);\n    return _this44;\n  }\n  _inherits(MixedBush, _StaticClusterClient_28);\n  return _createClass(MixedBush);\n}(_StaticClusterClient_);\n_defineProperty(MixedBush, \"_defaultVertices\", [-8.899999999999999, 9.2, 1, -0.0078125, -0.0078125, 8.5, 9.2, 1, 0.671875, -0.0078125, -8.899999999999999, -8.8, 1, -0.0078125, 0.6953125, 8.5, 9.2, 1, 0.671875, -0.0078125, -8.899999999999999, -8.8, 1, -0.0078125, 0.6953125, 8.5, -8.8, 1, 0.671875, 0.6953125]);\nvar LightBush = /*#__PURE__*/function (_StaticClusterClient_29) {\n  function LightBush(initialX, initialY, initialRotation) {\n    var _this45;\n    _classCallCheck(this, LightBush);\n    _this45 = _callSuper(this, LightBush, [initialX, initialY, initialRotation]);\n    _defineProperty(_this45, \"width\", 17.4);\n    _defineProperty(_this45, \"height\", 18);\n    _defineProperty(_this45, \"name\", \"light bush\");\n    _defineProperty(_this45, \"clusterName\", \"light bush\");\n    _defineProperty(_this45, \"texture\", textures.objects.lightbush);\n    _defineProperty(_this45, \"obstacle\", true);\n    _defineProperty(_this45, \"segments\", [[-6.5, -6.5, 13, 13]]);\n    return _this45;\n  }\n  _inherits(LightBush, _StaticClusterClient_29);\n  return _createClass(LightBush);\n}(_StaticClusterClient_);\n/* Buildings */\n_defineProperty(LightBush, \"_defaultVertices\", [-8.899999999999999, 9.2, 1, -0.0078125, -0.0078125, 8.5, 9.2, 1, 0.671875, -0.0078125, -8.899999999999999, -8.8, 1, -0.0078125, 0.6953125, 8.5, 9.2, 1, 0.671875, -0.0078125, -8.899999999999999, -8.8, 1, -0.0078125, 0.6953125, 8.5, -8.8, 1, 0.671875, 0.6953125]);\nvar _Building_ = /*#__PURE__*/function (_StaticClusterClient_30) {\n  function _Building_(initialX, initialY, initialRotation) {\n    var _this46;\n    var doors = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n    var rooms = arguments.length > 4 ? arguments[4] : undefined;\n    var doorOffset = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n    var setup = arguments.length > 6 ? arguments[6] : undefined;\n    _classCallCheck(this, _Building_);\n    _this46 = _callSuper(this, _Building_, [initialX, initialY, initialRotation]);\n    _this46.setup = setup;\n    _this46.doors = [];\n    _this46.type = \"building\";\n    _this46.rooms = rooms || [new _Map_(150, 80, false).init([[0 + doorOffset, 35]], doorOffset)];\n    var _iterator8 = _createForOfIteratorHelper(doors),\n      _step8;\n    try {\n      var _loop = function _loop() {\n        var i = _step8.value;\n        var t = new Trigger(_this46.trans.offsetX + i[0], _this46.trans.offsetY + i[1], function () {\n          requestTransition(function () {\n            delete $CURRENT_MAP.avatars[$AVATAR.id];\n            delete $CURRENT_MAP.obstacles[$AVATAR.id];\n            $CURRENT_MAP = this.rooms[i[2]];\n            $AVATAR.rotate(180);\n            this.map.move = true;\n            if ($AVATAR.state.pickup.current) {\n              $AVATAR.state.pickup.current[\"delete\"]();\n              $CURRENT_MAP.link($AVATAR.state.pickup.current);\n            }\n            if (i[3]) {\n              var _i$ = _slicedToArray(i[3], 2),\n                x = _i$[0],\n                y = _i$[1];\n              noclip = true;\n              $CURRENT_MAP.translate(-$CURRENT_MAP.centerX + x, -$CURRENT_MAP.centerY + y);\n              noclip = false;\n            }\n            $CURRENT_MAP.avatars[$AVATAR.id] = $AVATAR;\n            $CURRENT_MAP.obstacles[$AVATAR.id] = $AVATAR;\n            $MAP_DISPLAY.update();\n            $AUDIO.playSound(\"door-close\");\n          }.bind(this));\n        }.bind(_this46), true);\n        t.outPoint = i[3];\n        _this46.doors.push(t);\n      };\n      for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n        _loop();\n      }\n    } catch (err) {\n      _iterator8.e(err);\n    } finally {\n      _iterator8.f();\n    }\n    return _this46;\n  }\n  _inherits(_Building_, _StaticClusterClient_30);\n  return _createClass(_Building_, [{\n    key: \"postLink\",\n    value: function postLink() {\n      var _iterator9 = _createForOfIteratorHelper(this.doors),\n        _step9;\n      try {\n        for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n          var d = _step9.value;\n          this.map.link(d);\n        }\n      } catch (err) {\n        _iterator9.e(err);\n      } finally {\n        _iterator9.f();\n      }\n      var _iterator10 = _createForOfIteratorHelper(this.rooms),\n        _step10;\n      try {\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          var i = _step10.value;\n          i.building = this;\n          this.map.addSubMap(i);\n        }\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n      if (this.setup) this.setup();\n    }\n  }, {\n    key: \"clean\",\n    value: function clean() {\n      var _iterator11 = _createForOfIteratorHelper(this.doors),\n        _step11;\n      try {\n        for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n          var d = _step11.value;\n          d[\"delete\"]();\n        }\n      } catch (err) {\n        _iterator11.e(err);\n      } finally {\n        _iterator11.f();\n      }\n      var _iterator12 = _createForOfIteratorHelper(this.rooms),\n        _step12;\n      try {\n        for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n          var r = _step12.value;\n          this.map.deleteSubMap(r.mapId);\n        }\n      } catch (err) {\n        _iterator12.e(err);\n      } finally {\n        _iterator12.f();\n      }\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var translateVertices = arguments.length > 3 ? arguments[3] : undefined;\n      var _iterator13 = _createForOfIteratorHelper(this.doors),\n        _step13;\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var i = _step13.value;\n          i.translate(x, y);\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n      if (rotation) {\n        this.trans.rotation = rotation;\n      }\n      if (translateVertices) this.cluster.translateVertices(this.clusterIndex, this.constructor._defaultVertices, -this.cluster.trans.offsetX + this.trans.offsetX, -this.cluster.trans.offsetY + this.trans.offsetY, this.trans.rotation);\n    }\n  }]);\n}(_StaticClusterClient_);\nvar ConvenienceStore = /*#__PURE__*/function (_Building_2) {\n  function ConvenienceStore(initialX, initialY, initialRotation) {\n    var _this47;\n    _classCallCheck(this, ConvenienceStore);\n    _this47 = _callSuper(this, ConvenienceStore, [initialX, initialY, initialRotation, [[-26.1, -33, 0, [0, 44.38]], [23, 25, 0, [-50, 44.38]], [23, -57, 1], [-30, -65, 0]], [new _Map_(150, 100, false, \"House 1\").init(undefined, undefined, [-26, -41], true), new _Map_(150, 80, false, \"House 1\").init(), new _Map_(150, 80, false, \"House 1\").init()], undefined]);\n    _defineProperty(_this47, \"width\", 124.4);\n    _defineProperty(_this47, \"height\", 92.2);\n    _defineProperty(_this47, \"name\", \"convenience store\");\n    _defineProperty(_this47, \"clusterName\", \"convenience store\");\n    _defineProperty(_this47, \"texture\", textures.objects.conveniencestore);\n    _defineProperty(_this47, \"obstacle\", true);\n    _defineProperty(_this47, \"segments\", [[-60, -43.9, 120, 36], [-62, -8.1, 124, 54]]);\n    return _this47;\n  }\n  _inherits(ConvenienceStore, _Building_2);\n  return _createClass(ConvenienceStore);\n}(_Building_);\n_defineProperty(ConvenienceStore, \"_defaultVertices\", [-62.2, 46.1, 1, 0, 0, 62.2, 46.1, 1, 0.607421875, 0, -62.2, -46.1, 1, 0, 0.900390625, 62.2, 46.1, 1, 0.607421875, 0, -62.2, -46.1, 1, 0, 0.900390625, 62.2, -46.1, 1, 0.607421875, 0.900390625]);\nvar GunStore = /*#__PURE__*/function (_Building_3) {\n  function GunStore(initialX, initialY, initialRotation) {\n    var _this48;\n    _classCallCheck(this, GunStore);\n    _this48 = _callSuper(this, GunStore, [initialX, initialY, initialRotation, [[-35, -46, 0, [0, 44.38]]], [new _Map_(150, 100, false, \"Gun Store\").init(undefined, undefined, [-35, -53], true)], undefined]);\n    _defineProperty(_this48, \"width\", 152.5);\n    _defineProperty(_this48, \"height\", 98.5);\n    _defineProperty(_this48, \"name\", \"gun store\");\n    _defineProperty(_this48, \"clusterName\", \"gun store\");\n    _defineProperty(_this48, \"texture\", textures.objects.gunstore);\n    _defineProperty(_this48, \"obstacle\", true);\n    _defineProperty(_this48, \"segments\", [[-76.01, -12.989999999999998, 152, 62], [-70.01, -46.989999999999995, 140, 34]]);\n    var floor = new Floor(0, 0, 150, 100, 0);\n    floor.exclude = true;\n    _this48.rooms[0].link(floor);\n    return _this48;\n  }\n  _inherits(GunStore, _Building_3);\n  return _createClass(GunStore);\n}(_Building_);\n_defineProperty(GunStore, \"_defaultVertices\", [-76.25, 49.25, 1, 0, 0, 76.25, 49.25, 1, 0.74462890625, 0, -76.25, -49.25, 1, 0, 0.9619140625, 76.25, 49.25, 1, 0.74462890625, 0, -76.25, -49.25, 1, 0, 0.9619140625, 76.25, -49.25, 1, 0.74462890625, 0.9619140625]);\nvar Shed = /*#__PURE__*/function (_Building_4) {\n  function Shed(initialX, initialY, initialRotation) {\n    var _this49;\n    _classCallCheck(this, Shed);\n    _this49 = _callSuper(this, Shed, [initialX, initialY, initialRotation, [[0, -20, 0, [0, 20]]], [new _Map_(90, 50, false, \"Shed\").init(undefined, undefined, [0, -30], true)], undefined]);\n    _defineProperty(_this49, \"width\", 60.4);\n    _defineProperty(_this49, \"height\", 49.2);\n    _defineProperty(_this49, \"name\", \"shed\");\n    _defineProperty(_this49, \"clusterName\", \"shed\");\n    _defineProperty(_this49, \"texture\", textures.objects.shed);\n    _defineProperty(_this49, \"obstacle\", true);\n    _defineProperty(_this49, \"segments\", [[-30, -3.6, 60, 28], [-28, -23.6, 56, 20]]);\n    var floor = new Floor(0, 0, 150, 100, 1);\n    floor.exclude = true;\n    _this49.rooms[0].link(floor);\n    return _this49;\n  }\n  _inherits(Shed, _Building_4);\n  return _createClass(Shed);\n}(_Building_);\n_defineProperty(Shed, \"_defaultVertices\", [-30.2, 24.6, 1, 0, 0, 30.2, 24.6, 1, 0.58984375, 0, -30.2, -24.6, 1, 0, 0.9609375, 30.2, 24.6, 1, 0.58984375, 0, -30.2, -24.6, 1, 0, 0.9609375, 30.2, -24.6, 1, 0.58984375, 0.9609375]);\nvar House1 = /*#__PURE__*/function (_Building_5) {\n  function House1(initialX, initialY, initialRotation) {\n    var _this50;\n    _classCallCheck(this, House1);\n    _this50 = _callSuper(this, House1, [initialX, initialY, initialRotation, [[-26.1, -33, 0, [0, 44.38]], [23, 25, 0, [-50, 44.38]], [23, -57, 1], [-30, -65, 0]], [new _Map_(150, 100, false, \"House 1\").init(undefined, undefined, [-26, -41], true), new _Map_(150, 80, false, \"House 1\").init(), new _Map_(150, 80, false, \"House 1\").init()], undefined]);\n    _defineProperty(_this50, \"width\", 147.4);\n    _defineProperty(_this50, \"height\", 144.4);\n    _defineProperty(_this50, \"name\", \"house 1\");\n    _defineProperty(_this50, \"clusterName\", \"house 1\");\n    _defineProperty(_this50, \"texture\", textures.objects.house1);\n    _defineProperty(_this50, \"obstacle\", true);\n    _defineProperty(_this50, \"segments\", [[12.5, -70, 50, 24], [-71.5, -62, 34, 34], [-73.5, 2, 111, 70], [2.5, -48, 70, 30], [2.5, -72, 10, 30], [62.5, -72, 10, 30], [2.5, 0, 70, 64], [2.5, -20, 6, 64], [66.5, -20, 6, 64], [-71.5, -56, 78, 120]]);\n    var balconyDoor = new Door(\"Balcony\", -1, -50, _this50.rooms[0].height / 2 + 9.2, -1, [23, 15], true);\n    var floor = new Floor(0, 0, 150, 100, 1);\n    floor.exclude = true;\n    _this50.rooms[0].link(floor);\n    _this50.rooms[0].link(balconyDoor);\n    return _this50;\n  }\n  _inherits(House1, _Building_5);\n  return _createClass(House1);\n}(_Building_);\n_defineProperty(House1, \"_defaultVertices\", [-73.7, 72.2, 1, 0, 0, 73.7, 72.2, 1, 0.7197265625, 0, -73.7, -72.2, 1, 0, 0.705078125, 73.7, 72.2, 1, 0.7197265625, 0, -73.7, -72.2, 1, 0, 0.705078125, 73.7, -72.2, 1, 0.7197265625, 0.705078125]);\nvar House2 = /*#__PURE__*/function (_Building_6) {\n  function House2(initialX, initialY, initialRotation) {\n    var _this51;\n    _classCallCheck(this, House2);\n    _this51 = _callSuper(this, House2, [initialX, initialY, initialRotation, [[-26.1, -33, 0, [0, 44.38]], [23, 25, 0, [-50, 44.38]], [23, -57, 1], [-30, -65, 0]], [new _Map_(150, 100, false, \"House 1\").init(undefined, undefined, [-26, -41], true), new _Map_(150, 80, false, \"House 1\").init(), new _Map_(150, 80, false, \"House 1\").init()], undefined]);\n    _defineProperty(_this51, \"width\", 170.4);\n    _defineProperty(_this51, \"height\", 172.4);\n    _defineProperty(_this51, \"name\", \"house 2\");\n    _defineProperty(_this51, \"clusterName\", \"house 2\");\n    _defineProperty(_this51, \"texture\", textures.objects.house2);\n    _defineProperty(_this51, \"obstacle\", true);\n    _defineProperty(_this51, \"segments\", [[-85, -20, 110, 106], [-85, -26, 102, 112], [-85, -30, 94, 116], [-75, -42, 2, 24], [-76, -86, 92, 16], [82, -54, 3, 76], [17, -86, 68, 32], [25, 18, 60, 52]]);\n    var balconyDoor = new Door(\"Balcony\", -1, -50, _this51.rooms[0].height / 2 + 9.2, -1, [23, 15], true);\n    var floor = new Floor(0, 0, 150, 100, 1);\n    floor.exclude = true;\n    _this51.rooms[0].link(floor);\n    _this51.rooms[0].link(balconyDoor);\n    return _this51;\n  }\n  _inherits(House2, _Building_6);\n  return _createClass(House2);\n}(_Building_);\n\n/* Weapons and Firearms */\n_defineProperty(House2, \"_defaultVertices\", [-85.2, 86.2, 1, 0, 0, 85.2, 86.2, 1, 0.83203125, 0, -85.2, -86.2, 1, 0, 0.841796875, 85.2, 86.2, 1, 0.83203125, 0, -85.2, -86.2, 1, 0, 0.841796875, 85.2, -86.2, 1, 0.83203125, 0.841796875]);\nvar _Pickup_ = /*#__PURE__*/function (_InstancedClusterClie10) {\n  function _Pickup_(initialX, initialY, initialRotation) {\n    var _this52;\n    _classCallCheck(this, _Pickup_);\n    _this52 = _callSuper(this, _Pickup_, [initialX, initialY, initialRotation !== null && initialRotation !== void 0 ? initialRotation : (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360)]);\n    _defineProperty(_this52, \"pickup\", true);\n    _defineProperty(_this52, \"interactable\", true);\n    _defineProperty(_this52, \"minDistance\", 5);\n    _defineProperty(_this52, \"moveable\", true);\n    _defineProperty(_this52, \"subLayer\", 1);\n    _this52.ring = new PickupRing(_this52.trans.offsetX, _this52.trans.offsetY);\n    _this52.deletionAnimation = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLoopAnimation([function () {\n      if (this.type !== \"explosive\") this[\"delete\"]();\n    }], _this52, [60]);\n    return _this52;\n  }\n  _inherits(_Pickup_, _InstancedClusterClie10);\n  return _createClass(_Pickup_, [{\n    key: \"preRender\",\n    value: function preRender() {\n      if (this.linked && this.dropped && this !== $AVATAR.state.pickup.current) {\n        this.deletionAnimation.run();\n      }\n    }\n  }, {\n    key: \"postLink\",\n    value: function postLink() {\n      if (this.ring) this.map.link(this.ring);\n    }\n  }, {\n    key: \"clean\",\n    value: function clean() {\n      if (this.ring) this.ring[\"delete\"]();\n    }\n  }, {\n    key: \"action\",\n    value: function action() {\n      $AVATAR.addItem(this);\n      this.deletionAnimation.end();\n      $AUDIO.playSound(\"equip\");\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var translateVertices = arguments.length > 3 ? arguments[3] : undefined;\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n      if (this.ring) {\n        this.ring.translate(this.trans.offsetX - this.ring.trans.offsetX, this.trans.offsetY - this.ring.trans.offsetY, false, translateVertices);\n      }\n      if (rotation) {\n        this.trans.rotation = rotation;\n      }\n      if (translateVertices) this.cluster.translateVertices(this.clusterIndex, x, y, this.trans.rotation);\n    }\n  }]);\n}(_InstancedClusterClient_);\nvar _Gun_ = /*#__PURE__*/function (_Pickup_3) {\n  function _Gun_(initialX, initialY, initialRotation) {\n    var _this53;\n    _classCallCheck(this, _Gun_);\n    _this53 = _callSuper(this, _Gun_, [initialX, initialY, initialRotation]);\n    _defineProperty(_this53, \"reloadProgress\", 0);\n    _defineProperty(_this53, \"loaded\", true);\n    _defineProperty(_this53, \"type\", \"gun\");\n    return _this53;\n  }\n  _inherits(_Gun_, _Pickup_3);\n  return _createClass(_Gun_);\n}(_Pickup_);\nvar _Blade_ = /*#__PURE__*/function (_Pickup_4) {\n  function _Blade_(initialX, initialY, initialRotation) {\n    var _this54;\n    _classCallCheck(this, _Blade_);\n    _this54 = _callSuper(this, _Blade_, [initialX, initialY, initialRotation]);\n    _defineProperty(_this54, \"type\", \"knife\");\n    _defineProperty(_this54, \"integrity\", 100);\n    return _this54;\n  }\n  _inherits(_Blade_, _Pickup_4);\n  return _createClass(_Blade_, [{\n    key: \"degrade\",\n    value: function degrade() {\n      this.integrity -= (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.aofb)(100 - this.constructor._properties.durability, 5);\n      if (this.integrity <= 0 && this === $AVATAR.state.equippedItems.mainTool) {\n        $AVATAR.dropItem(this.slot);\n        this[\"delete\"]();\n      }\n    }\n  }]);\n}(_Pickup_);\nvar _Medicine_ = /*#__PURE__*/function (_Pickup_5) {\n  function _Medicine_(initialX, initialY, initialRotation) {\n    var _this55;\n    _classCallCheck(this, _Medicine_);\n    _this55 = _callSuper(this, _Medicine_, [initialX, initialY, initialRotation]);\n    _defineProperty(_this55, \"type\", \"medicine\");\n    _defineProperty(_this55, \"used\", false);\n    return _this55;\n  }\n  _inherits(_Medicine_, _Pickup_5);\n  return _createClass(_Medicine_);\n}(_Pickup_);\nvar _Ammo_ = /*#__PURE__*/function (_Pickup_6) {\n  function _Ammo_(initialX, initialY, initialRotation) {\n    var _this56;\n    _classCallCheck(this, _Ammo_);\n    _this56 = _callSuper(this, _Ammo_, [initialX, initialY, initialRotation]);\n    _defineProperty(_this56, \"type\", \"ammo\");\n    _defineProperty(_this56, \"used\", false);\n    return _this56;\n  }\n  _inherits(_Ammo_, _Pickup_6);\n  return _createClass(_Ammo_);\n}(_Pickup_);\nvar _Food_ = /*#__PURE__*/function (_Pickup_7) {\n  function _Food_(initialX, initialY, initialRotation) {\n    var _this57;\n    _classCallCheck(this, _Food_);\n    _this57 = _callSuper(this, _Food_, [initialX, initialY, initialRotation]);\n    _defineProperty(_this57, \"type\", \"food\");\n    _defineProperty(_this57, \"nutrition\", 5);\n    _defineProperty(_this57, \"regain\", 5);\n    return _this57;\n  }\n  _inherits(_Food_, _Pickup_7);\n  return _createClass(_Food_);\n}(_Pickup_);\nvar Syringe = /*#__PURE__*/function (_Medicine_3) {\n  function Syringe(initialX, initialY, initialRotation) {\n    var _this58;\n    _classCallCheck(this, Syringe);\n    _this58 = _callSuper(this, Syringe, [initialX, initialY, initialRotation]);\n    _defineProperty(_this58, \"width\", 2.5);\n    _defineProperty(_this58, \"height\", 10.6);\n    _defineProperty(_this58, \"clusterName\", \"syringe\");\n    _defineProperty(_this58, \"texture\", textures.objects.syringe);\n    _defineProperty(_this58, \"name\", \"syringe\");\n    return _this58;\n  }\n  _inherits(Syringe, _Medicine_3);\n  return _createClass(Syringe);\n}(_Medicine_);\n_defineProperty(Syringe, \"_properties\", {\n  regain: 25\n});\n_defineProperty(Syringe, \"_defaultVertices\", [-1.25, 5.3, 1, 0, 0, 1.25, 5.3, 1, 0.78125, 0, -1.25, -5.3, 1, 0, 0.828125, 1.25, 5.3, 1, 0.78125, 0, -1.25, -5.3, 1, 0, 0.828125, 1.25, -5.3, 1, 0.78125, 0.828125]);\nvar Money = /*#__PURE__*/function (_Pickup_8) {\n  function Money(initialX, initialY, initialRotation, amount) {\n    var _this59;\n    _classCallCheck(this, Money);\n    _this59 = _callSuper(this, Money, [initialX, initialY, initialRotation]);\n    _defineProperty(_this59, \"width\", 7.4);\n    _defineProperty(_this59, \"height\", 3.8);\n    _defineProperty(_this59, \"clusterName\", \"money\");\n    _defineProperty(_this59, \"texture\", textures.objects.money);\n    _defineProperty(_this59, \"name\", \"money\");\n    _defineProperty(_this59, \"type\", \"cash\");\n    _this59.amount = amount || 5 + (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(100);\n    return _this59;\n  }\n  _inherits(Money, _Pickup_8);\n  return _createClass(Money);\n}(_Pickup_);\n_defineProperty(Money, \"_defaultVertices\", [-3.7, 1.9, 1, 0, 0, 3.7, 1.9, 1, 0.578125, 0, -3.7, -1.9, 1, 0, 0.59375, 3.7, 1.9, 1, 0.578125, 0, -3.7, -1.9, 1, 0, 0.59375, 3.7, -1.9, 1, 0.578125, 0.59375]);\nvar CandyBar = /*#__PURE__*/function (_Food_3) {\n  function CandyBar(initialX, initialY, initialRotation) {\n    var _this60;\n    _classCallCheck(this, CandyBar);\n    _this60 = _callSuper(this, CandyBar, [initialX, initialY, initialRotation]);\n    _defineProperty(_this60, \"width\", 6.8);\n    _defineProperty(_this60, \"height\", 3.4);\n    _defineProperty(_this60, \"clusterName\", \"candy bar\");\n    _defineProperty(_this60, \"texture\", textures.objects.candybar);\n    _defineProperty(_this60, \"name\", \"candy bar\");\n    _this60.nutrition = 15;\n    return _this60;\n  }\n  _inherits(CandyBar, _Food_3);\n  return _createClass(CandyBar);\n}(_Food_);\n_defineProperty(CandyBar, \"_defaultVertices\", [-3.4, 1.7, 1, 0, 0, 3.4, 1.7, 1, 0.53125, 0, -3.4, -1.7, 1, 0, 0.53125, 3.4, 1.7, 1, 0.53125, 0, -3.4, -1.7, 1, 0, 0.53125, 3.4, -1.7, 1, 0.53125, 0.53125]);\nvar MedKit = /*#__PURE__*/function (_Medicine_4) {\n  function MedKit(initialX, initialY, initialRotation) {\n    var _this61;\n    _classCallCheck(this, MedKit);\n    _this61 = _callSuper(this, MedKit, [initialX, initialY, initialRotation]);\n    _defineProperty(_this61, \"width\", 11.4);\n    _defineProperty(_this61, \"height\", 7.6);\n    _defineProperty(_this61, \"clusterName\", \"med kit\");\n    _defineProperty(_this61, \"texture\", textures.objects.medkit);\n    _defineProperty(_this61, \"name\", \"med kit\");\n    return _this61;\n  }\n  _inherits(MedKit, _Medicine_4);\n  return _createClass(MedKit);\n}(_Medicine_);\n_defineProperty(MedKit, \"_properties\", {\n  regain: 75\n});\n_defineProperty(MedKit, \"_defaultVertices\", [-5.7, 3.8, 1, 0, 0, 5.7, 3.8, 1, 0.890625, 0, -5.7, -3.8, 1, 0, 0.59375, 5.7, 3.8, 1, 0.890625, 0, -5.7, -3.8, 1, 0, 0.59375, 5.7, -3.8, 1, 0.890625, 0.59375]);\nvar BasicArmour = /*#__PURE__*/function (_Pickup_9) {\n  function BasicArmour(initialX, initialY, initialRotation) {\n    var _this62;\n    _classCallCheck(this, BasicArmour);\n    _this62 = _callSuper(this, BasicArmour, [initialX, initialY, initialRotation]);\n    _defineProperty(_this62, \"width\", 7.4);\n    _defineProperty(_this62, \"height\", 10.2);\n    _defineProperty(_this62, \"clusterName\", \"basic armour\");\n    _defineProperty(_this62, \"texture\", textures.objects.basicarmour);\n    _defineProperty(_this62, \"name\", \"basic armour\");\n    _defineProperty(_this62, \"type\", \"armour\");\n    _this62.integrity = 50;\n    return _this62;\n  }\n  _inherits(BasicArmour, _Pickup_9);\n  return _createClass(BasicArmour);\n}(_Pickup_);\n_defineProperty(BasicArmour, \"_properties\", {\n  strength: 50\n});\n_defineProperty(BasicArmour, \"_defaultVertices\", [-3.7, 5.1, 1, 0, 0, 3.7, 5.1, 1, 0.578125, 0, -3.7, -5.1, 1, 0, 0.796875, 3.7, 5.1, 1, 0.578125, 0, -3.7, -5.1, 1, 0, 0.796875, 3.7, -5.1, 1, 0.578125, 0.796875]);\nvar RemoteDetonator = /*#__PURE__*/function (_Pickup_10) {\n  function RemoteDetonator(initialX, initialY, initialRotation) {\n    var _this63;\n    _classCallCheck(this, RemoteDetonator);\n    _this63 = _callSuper(this, RemoteDetonator, [initialX, initialY, initialRotation]);\n    _defineProperty(_this63, \"width\", 2.4);\n    _defineProperty(_this63, \"height\", 6);\n    _defineProperty(_this63, \"clusterName\", \"remote detonator\");\n    _defineProperty(_this63, \"texture\", textures.objects.remotedetonator);\n    _defineProperty(_this63, \"name\", \"remote detonator\");\n    _defineProperty(_this63, \"type\", \"detonator\");\n    return _this63;\n  }\n  _inherits(RemoteDetonator, _Pickup_10);\n  return _createClass(RemoteDetonator, [{\n    key: \"activate\",\n    value: function activate() {\n      var _iterator14 = _createForOfIteratorHelper($AVATAR.inventory.explosives),\n        _step14;\n      try {\n        for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n          var _$CURRENT_MAP$objects;\n          var i = _step14.value;\n          (_$CURRENT_MAP$objects = $CURRENT_MAP.objects[i]) === null || _$CURRENT_MAP$objects === void 0 || _$CURRENT_MAP$objects.detonate();\n        }\n      } catch (err) {\n        _iterator14.e(err);\n      } finally {\n        _iterator14.f();\n      }\n    }\n  }]);\n}(_Pickup_);\n_defineProperty(RemoteDetonator, \"_defaultVertices\", [-1.2, 3, 1, 0, 0, 1.2, 3, 1, 0.75, 0, -1.2, -3, 1, 0, 0.9375, 1.2, 3, 1, 0.75, 0, -1.2, -3, 1, 0, 0.9375, 1.2, -3, 1, 0.75, 0.9375]);\nvar ProximityExplosive = /*#__PURE__*/function (_Pickup_11) {\n  function ProximityExplosive(initialX, initialY, initialRotation, owner) {\n    var _this64;\n    _classCallCheck(this, ProximityExplosive);\n    _this64 = _callSuper(this, ProximityExplosive, [initialX, initialY, initialRotation]);\n    _defineProperty(_this64, \"width\", 4.2);\n    _defineProperty(_this64, \"height\", 7.6);\n    _defineProperty(_this64, \"clusterName\", \"proximity explosive\");\n    _defineProperty(_this64, \"texture\", textures.objects.proximityexplosive);\n    _defineProperty(_this64, \"name\", \"proximity explosive\");\n    _defineProperty(_this64, \"type\", \"explosive\");\n    _defineProperty(_this64, \"obstacle\", true);\n    _defineProperty(_this64, \"passable\", true);\n    _defineProperty(_this64, \"armed\", false);\n    _defineProperty(_this64, \"hideFromMap\", true);\n    _defineProperty(_this64, \"segments\", [[-2.1, -3.8, 4.2, 7.6]]);\n    _this64.owner = owner;\n    _this64.proximityCheckAnimation = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n      for (var i in $CURRENT_MAP.avatars) {\n        var dist = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX, this.trans.offsetY, $CURRENT_MAP.avatars[i].trans.offsetX, $CURRENT_MAP.avatars[i].trans.offsetY);\n        if (dist < 20) {\n          this.detonate();\n          break;\n        }\n      }\n    }, _this64, 1);\n    _this64.activationTimeout = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLinearAnimation([function () {\n      this.armed = true;\n    }], _this64, [3]);\n    return _this64;\n  }\n  _inherits(ProximityExplosive, _Pickup_11);\n  return _createClass(ProximityExplosive, [{\n    key: \"detonate\",\n    value: function detonate() {\n      if (this.armed) {\n        var map = this.map;\n        for (var i = 0; i < 40; i++) {\n          var randomBulletRotation = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360);\n          var _rotate3 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(0, 1, randomBulletRotation),\n            _rotate4 = _slicedToArray(_rotate3, 2),\n            directionX = _rotate4[0],\n            directionY = _rotate4[1];\n          var velocity = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(10) + 3;\n          map.link(new Bullet(this.trans.offsetX, this.trans.offsetY, randomBulletRotation, directionX * velocity, directionY * velocity, 100, $AVATAR));\n        }\n        $AUDIO.playSound(\"explosion\");\n        this[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"arm\",\n    value: function arm() {\n      this.armed = true;\n    }\n  }, {\n    key: \"hit\",\n    value: function hit() {\n      this.detonate();\n    }\n  }, {\n    key: \"preRender\",\n    value: function preRender() {\n      this.activationTimeout.run();\n      if (this.armed) this.proximityCheckAnimation.run();\n    }\n  }]);\n}(_Pickup_);\n_defineProperty(ProximityExplosive, \"_defaultVertices\", [-2.1, 3.8, 1, 0, 0, 2.1, 3.8, 1, 0.65625, 0, -2.1, -3.8, 1, 0, 0.59375, 2.1, 3.8, 1, 0.65625, 0, -2.1, -3.8, 1, 0, 0.59375, 2.1, -3.8, 1, 0.65625, 0.59375]);\nvar RemoteExplosive = /*#__PURE__*/function (_Pickup_12) {\n  function RemoteExplosive(initialX, initialY, initialRotation, owner) {\n    var _this65;\n    _classCallCheck(this, RemoteExplosive);\n    _this65 = _callSuper(this, RemoteExplosive, [initialX, initialY, initialRotation]);\n    _defineProperty(_this65, \"width\", 4.2);\n    _defineProperty(_this65, \"height\", 7.6);\n    _defineProperty(_this65, \"clusterName\", \"remote explosive\");\n    _defineProperty(_this65, \"texture\", textures.objects.remoteexplosive);\n    _defineProperty(_this65, \"name\", \"remote explosive\");\n    _defineProperty(_this65, \"type\", \"explosive\");\n    _defineProperty(_this65, \"obstacle\", true);\n    _defineProperty(_this65, \"passable\", true);\n    _defineProperty(_this65, \"armed\", false);\n    _defineProperty(_this65, \"hideFromMap\", true);\n    _defineProperty(_this65, \"segments\", [[-2.1, -3.8, 4.2, 7.6]]);\n    _this65.owner = owner;\n    return _this65;\n  }\n  _inherits(RemoteExplosive, _Pickup_12);\n  return _createClass(RemoteExplosive, [{\n    key: \"detonate\",\n    value: function detonate() {\n      if (this.armed) {\n        var map = this.map;\n        for (var i = 0; i < 40; i++) {\n          var randomBulletRotation = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360);\n          var _rotate5 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(0, 1, randomBulletRotation),\n            _rotate6 = _slicedToArray(_rotate5, 2),\n            directionX = _rotate6[0],\n            directionY = _rotate6[1];\n          var velocity = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(10) + 3;\n          map.link(new Bullet(this.trans.offsetX, this.trans.offsetY, randomBulletRotation, directionX * velocity, directionY * velocity, 100, $AVATAR));\n        }\n        $AUDIO.playSound(\"explosion\");\n        this[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"arm\",\n    value: function arm() {\n      this.armed = true;\n    }\n  }, {\n    key: \"hit\",\n    value: function hit() {\n      this.detonate();\n    }\n  }]);\n}(_Pickup_);\n_defineProperty(RemoteExplosive, \"_defaultVertices\", [-2.1, 3.8, 1, 0, 0, 2.1, 3.8, 1, 0.65625, 0, -2.1, -3.8, 1, 0, 0.59375, 2.1, 3.8, 1, 0.65625, 0, -2.1, -3.8, 1, 0, 0.59375, 2.1, -3.8, 1, 0.65625, 0.59375]);\nvar MercenaryArmour = /*#__PURE__*/function (_Pickup_13) {\n  function MercenaryArmour(initialX, initialY, initialRotation) {\n    var _this66;\n    _classCallCheck(this, MercenaryArmour);\n    _this66 = _callSuper(this, MercenaryArmour, [initialX, initialY, initialRotation]);\n    _defineProperty(_this66, \"width\", 7.4);\n    _defineProperty(_this66, \"height\", 10.2);\n    _defineProperty(_this66, \"clusterName\", \"mercenary armour\");\n    _defineProperty(_this66, \"texture\", textures.objects.mercenaryarmour);\n    _defineProperty(_this66, \"name\", \"mercenary armour\");\n    _defineProperty(_this66, \"type\", \"armour\");\n    _this66.integrity = 150;\n    return _this66;\n  }\n  _inherits(MercenaryArmour, _Pickup_13);\n  return _createClass(MercenaryArmour);\n}(_Pickup_);\n_defineProperty(MercenaryArmour, \"_properties\", {\n  strength: 150\n});\n_defineProperty(MercenaryArmour, \"_defaultVertices\", [-3.7, 5.1, 1, 0, 0, 3.7, 5.1, 1, 0.578125, 0, -3.7, -5.1, 1, 0, 0.796875, 3.7, 5.1, 1, 0.578125, 0, -3.7, -5.1, 1, 0, 0.796875, 3.7, -5.1, 1, 0.578125, 0.796875]);\nvar SwatArmour = /*#__PURE__*/function (_Pickup_14) {\n  function SwatArmour(initialX, initialY, initialRotation) {\n    var _this67;\n    _classCallCheck(this, SwatArmour);\n    _this67 = _callSuper(this, SwatArmour, [initialX, initialY, initialRotation]);\n    _defineProperty(_this67, \"width\", 7.4);\n    _defineProperty(_this67, \"height\", 10.2);\n    _defineProperty(_this67, \"clusterName\", \"swat armour\");\n    _defineProperty(_this67, \"texture\", textures.objects.swatarmour);\n    _defineProperty(_this67, \"name\", \"swat armour\");\n    _defineProperty(_this67, \"type\", \"armour\");\n    _this67.integrity = 100;\n    return _this67;\n  }\n  _inherits(SwatArmour, _Pickup_14);\n  return _createClass(SwatArmour);\n}(_Pickup_);\n_defineProperty(SwatArmour, \"_properties\", {\n  strength: 100\n});\n_defineProperty(SwatArmour, \"_defaultVertices\", [-3.7, 5.1, 1, 0, 0, 3.7, 5.1, 1, 0.578125, 0, -3.7, -5.1, 1, 0, 0.796875, 3.7, 5.1, 1, 0.578125, 0, -3.7, -5.1, 1, 0, 0.796875, 3.7, -5.1, 1, 0.578125, 0.796875]);\nvar AmmoBox = /*#__PURE__*/function (_Ammo_3) {\n  function AmmoBox(initialX, initialY, initialRotation) {\n    var _this68;\n    _classCallCheck(this, AmmoBox);\n    _this68 = _callSuper(this, AmmoBox, [initialX, initialY, initialRotation]);\n    _defineProperty(_this68, \"width\", 6.4);\n    _defineProperty(_this68, \"height\", 8.6);\n    _defineProperty(_this68, \"clusterName\", \"ammo box\");\n    _defineProperty(_this68, \"type\", \"ammo\");\n    _defineProperty(_this68, \"texture\", textures.objects.ammobox);\n    _defineProperty(_this68, \"name\", \"ammo box\");\n    return _this68;\n  }\n  _inherits(AmmoBox, _Ammo_3);\n  return _createClass(AmmoBox);\n}(_Ammo_);\n_defineProperty(AmmoBox, \"_properties\", {\n  increase: 5\n});\n_defineProperty(AmmoBox, \"_defaultVertices\", [-3.2, 4.3, 1, 0, 0, 3.2, 4.3, 1, 0.5, 0, -3.2, -4.3, 1, 0, 0.671875, 3.2, 4.3, 1, 0.5, 0, -3.2, -4.3, 1, 0, 0.671875, 3.2, -4.3, 1, 0.5, 0.671875]);\nvar MultiAmmoBox = /*#__PURE__*/function (_Ammo_4) {\n  function MultiAmmoBox(initialX, initialY, initialRotation) {\n    var _this69;\n    _classCallCheck(this, MultiAmmoBox);\n    _this69 = _callSuper(this, MultiAmmoBox, [initialX, initialY, initialRotation]);\n    _defineProperty(_this69, \"width\", 12.4);\n    _defineProperty(_this69, \"height\", 8.6);\n    _defineProperty(_this69, \"clusterName\", \"multi ammo box\");\n    _defineProperty(_this69, \"type\", \"ammo\");\n    _defineProperty(_this69, \"texture\", textures.objects.multiammobox);\n    _defineProperty(_this69, \"name\", \"multi ammo box\");\n    return _this69;\n  }\n  _inherits(MultiAmmoBox, _Ammo_4);\n  return _createClass(MultiAmmoBox);\n}(_Ammo_);\n_defineProperty(MultiAmmoBox, \"_properties\", {\n  increase: 3\n});\n_defineProperty(MultiAmmoBox, \"_defaultVertices\", [-6.2, 4.3, 1, 0, 0, 6.2, 4.3, 1, 0.96875, 0, -6.2, -4.3, 1, 0, 0.671875, 6.2, 4.3, 1, 0.96875, 0, -6.2, -4.3, 1, 0, 0.671875, 6.2, -4.3, 1, 0.96875, 0.671875]);\nvar KitchenKnife = /*#__PURE__*/function (_Blade_3) {\n  function KitchenKnife(initialX, initialY, initialRotation) {\n    var _this70;\n    _classCallCheck(this, KitchenKnife);\n    _this70 = _callSuper(this, KitchenKnife, [initialX, initialY, initialRotation]);\n    _defineProperty(_this70, \"width\", 2.48);\n    _defineProperty(_this70, \"height\", 13.14);\n    _defineProperty(_this70, \"clusterName\", \"kitchen knife\");\n    _defineProperty(_this70, \"texture\", textures.objects.kitchenknife);\n    _defineProperty(_this70, \"name\", \"kitchen knife\");\n    return _this70;\n  }\n  _inherits(KitchenKnife, _Blade_3);\n  return _createClass(KitchenKnife);\n}(_Blade_);\n_defineProperty(KitchenKnife, \"_properties\", {\n  damage: 25,\n  durability: 10,\n  useTextures: [14, 15, 16, 17, 18]\n});\n_defineProperty(KitchenKnife, \"_defaultVertices\", [-1.24, 6.57, 1, 0, 0, 1.24, 6.57, 1, 0.775, 0, -1.24, -6.57, 1, 0, 0.51328125, 1.24, 6.57, 1, 0.775, 0, -1.24, -6.57, 1, 0, 0.51328125, 1.24, -6.57, 1, 0.775, 0.51328125]);\nvar AssassinsKnife = /*#__PURE__*/function (_Blade_4) {\n  function AssassinsKnife(initialX, initialY, initialRotation) {\n    var _this71;\n    _classCallCheck(this, AssassinsKnife);\n    _this71 = _callSuper(this, AssassinsKnife, [initialX, initialY, initialRotation]);\n    _defineProperty(_this71, \"width\", 3.46);\n    _defineProperty(_this71, \"height\", 13.540000000000001);\n    _defineProperty(_this71, \"name\", \"assassins knife\");\n    _defineProperty(_this71, \"clusterName\", \"assassins knife\");\n    _defineProperty(_this71, \"texture\", textures.objects.assassinsknife);\n    return _this71;\n  }\n  _inherits(AssassinsKnife, _Blade_4);\n  return _createClass(AssassinsKnife);\n}(_Blade_);\n_defineProperty(AssassinsKnife, \"_properties\", {\n  damage: 100,\n  durability: 30,\n  useTextures: [19, 20, 21, 22, 23]\n});\n_defineProperty(AssassinsKnife, \"_defaultVertices\", [-1.73, 6.7700000000000005, 1, 0, 0, 1.73, 6.7700000000000005, 1, 0.540625, 0, -1.73, -6.7700000000000005, 1, 0, 0.52890625, 1.73, 6.7700000000000005, 1, 0.540625, 0, -1.73, -6.7700000000000005, 1, 0, 0.52890625, 1.73, -6.7700000000000005, 1, 0.540625, 0.52890625]);\nvar CombatKnife = /*#__PURE__*/function (_Blade_5) {\n  function CombatKnife(initialX, initialY, initialRotation) {\n    var _this72;\n    _classCallCheck(this, CombatKnife);\n    _this72 = _callSuper(this, CombatKnife, [initialX, initialY, initialRotation]);\n    _defineProperty(_this72, \"width\", 3.6);\n    _defineProperty(_this72, \"height\", 13.6);\n    _defineProperty(_this72, \"clusterName\", \"combat knife\");\n    _defineProperty(_this72, \"texture\", textures.objects.combatknife);\n    _defineProperty(_this72, \"name\", \"combat knife\");\n    return _this72;\n  }\n  _inherits(CombatKnife, _Blade_5);\n  return _createClass(CombatKnife);\n}(_Blade_);\n_defineProperty(CombatKnife, \"_properties\", {\n  damage: 50,\n  durability: 50,\n  useTextures: [textures.skins.avatarcombatknife1.id, textures.skins.avatarcombatknife2.id, textures.skins.avatarcombatknife3.id, textures.skins.avatarcombatknifewalking1.id, textures.skins.avatarcombatknifewalking2.id]\n});\n_defineProperty(CombatKnife, \"_defaultVertices\", [-1.8, 6.8, 1, 0, 0, 1.8, 6.8, 1, 0.5625, 0, -1.8, -6.8, 1, 0, 0.53125, 1.8, 6.8, 1, 0.5625, 0, -1.8, -6.8, 1, 0, 0.53125, 1.8, -6.8, 1, 0.5625, 0.53125]);\nvar GLOCK_20 = /*#__PURE__*/function (_Gun_3) {\n  function GLOCK_20(initialX, initialY, initialRotation, bullets) {\n    var _this73;\n    _classCallCheck(this, GLOCK_20);\n    _this73 = _callSuper(this, GLOCK_20, [initialX, initialY, initialRotation]);\n    _defineProperty(_this73, \"width\", 8.780000000000001);\n    _defineProperty(_this73, \"height\", 6.180000000000001);\n    _defineProperty(_this73, \"name\", \"glock 20\");\n    _defineProperty(_this73, \"clusterName\", \"glock 20\");\n    _defineProperty(_this73, \"texture\", textures.objects.glock20);\n    _this73.bullets = bullets !== null && bullets !== void 0 ? bullets : 65;\n    return _this73;\n  }\n  _inherits(GLOCK_20, _Gun_3);\n  return _createClass(GLOCK_20);\n}(_Gun_);\n_defineProperty(GLOCK_20, \"_properties\", {\n  fireRate: 1.5,\n  bulletSpeed: 5,\n  damage: 16,\n  accuracy: 5,\n  nozzelLength: 13,\n  capacity: 18,\n  reloadTime: 3,\n  useTextures: [4, 5],\n  shotSoundEffect: \"pistol-shot\"\n});\n_defineProperty(GLOCK_20, \"_defaultVertices\", [-4.390000000000001, 3.0900000000000003, 1, 0, 0, 4.390000000000001, 3.0900000000000003, 1, 0.6859375000000001, 0, -4.390000000000001, -3.0900000000000003, 1, 0, 0.965625, 4.390000000000001, 3.0900000000000003, 1, 0.6859375000000001, 0, -4.390000000000001, -3.0900000000000003, 1, 0, 0.965625, 4.390000000000001, -3.0900000000000003, 1, 0.6859375000000001, 0.965625]);\nvar DX_9 = /*#__PURE__*/function (_Gun_4) {\n  function DX_9(initialX, initialY, initialRotation, bullets) {\n    var _this74;\n    _classCallCheck(this, DX_9);\n    _this74 = _callSuper(this, DX_9, [initialX, initialY, initialRotation]);\n    _defineProperty(_this74, \"width\", 9.1);\n    _defineProperty(_this74, \"height\", 6.4);\n    _defineProperty(_this74, \"name\", \"dx 9\");\n    _defineProperty(_this74, \"clusterName\", \"dx 9\");\n    _defineProperty(_this74, \"texture\", textures.objects.dx9);\n    _this74.bullets = bullets !== null && bullets !== void 0 ? bullets : 65;\n    return _this74;\n  }\n  _inherits(DX_9, _Gun_4);\n  return _createClass(DX_9);\n}(_Gun_);\n_defineProperty(DX_9, \"_properties\", {\n  fireRate: 3,\n  bulletSpeed: 5,\n  damage: 12,\n  accuracy: 5,\n  nozzelLength: 13,\n  capacity: 26,\n  reloadTime: 2.5,\n  useTextures: [textures.skins.avatardrawdx9.id, textures.skins.avatardrawdx9pullback.id],\n  shotSoundEffect: \"pistol-shot-4\"\n});\n_defineProperty(DX_9, \"_defaultVertices\", [-4.55, 3.2, 1, 0, 0, 4.55, 3.2, 1, 0.7109375, 0, -4.55, -3.2, 1, 0, 0.5, 4.55, 3.2, 1, 0.7109375, 0, -4.55, -3.2, 1, 0, 0.5, 4.55, -3.2, 1, 0.7109375, 0.5]);\nvar NOSS_7 = /*#__PURE__*/function (_Gun_5) {\n  function NOSS_7(initialX, initialY, initialRotation, bullets) {\n    var _this75;\n    _classCallCheck(this, NOSS_7);\n    _this75 = _callSuper(this, NOSS_7, [initialX, initialY, initialRotation]);\n    _defineProperty(_this75, \"width\", 14.4);\n    _defineProperty(_this75, \"height\", 6.6);\n    _defineProperty(_this75, \"name\", \"noss 7\");\n    _defineProperty(_this75, \"clusterName\", \"noss 7\");\n    _defineProperty(_this75, \"texture\", textures.objects.noss7);\n    _this75.bullets = bullets !== null && bullets !== void 0 ? bullets : 216;\n    return _this75;\n  }\n  _inherits(NOSS_7, _Gun_5);\n  return _createClass(NOSS_7);\n}(_Gun_);\n_defineProperty(NOSS_7, \"_properties\", {\n  fireRate: 12,\n  bulletSpeed: 8,\n  damage: 18,\n  accuracy: 15,\n  nozzelLength: 19,\n  capacity: 46,\n  reloadTime: 5,\n  useTextures: [textures.skins.avatardrawnoss7.id, textures.skins.avatardrawnoss7pullback.id],\n  shotSoundEffect: \"pistol-shot\"\n});\n_defineProperty(NOSS_7, \"_defaultVertices\", [-7.2, 3.3, 1, 0, 0, 7.2, 3.3, 1, 0.5625, 0, -7.2, -3.3, 1, 0, 0.515625, 7.2, 3.3, 1, 0.5625, 0, -7.2, -3.3, 1, 0, 0.515625, 7.2, -3.3, 1, 0.5625, 0.515625]);\nvar FURS_55 = /*#__PURE__*/function (_Gun_6) {\n  function FURS_55(initialX, initialY, initialRotation, bullets) {\n    var _this76;\n    _classCallCheck(this, FURS_55);\n    _this76 = _callSuper(this, FURS_55, [initialX, initialY, initialRotation]);\n    _defineProperty(_this76, \"width\", 12.6);\n    _defineProperty(_this76, \"height\", 7.4);\n    _defineProperty(_this76, \"name\", \"furs 55\");\n    _defineProperty(_this76, \"clusterName\", \"furs 55\");\n    _defineProperty(_this76, \"texture\", textures.objects.furs55);\n    _this76.bullets = bullets !== null && bullets !== void 0 ? bullets : 65;\n    return _this76;\n  }\n  _inherits(FURS_55, _Gun_6);\n  return _createClass(FURS_55);\n}(_Gun_);\n_defineProperty(FURS_55, \"_properties\", {\n  fireRate: 1.3,\n  bulletSpeed: 5,\n  damage: 23,\n  accuracy: 5,\n  nozzelLength: 13,\n  capacity: 8,\n  reloadTime: 4,\n  useTextures: [textures.skins.avatardrawfurs55.id, textures.skins.avatardrawfurs55pullback.id],\n  shotSoundEffect: \"pistol-shot-2\",\n  reloadSoundEffect: \"revolver-reload\"\n});\n_defineProperty(FURS_55, \"_defaultVertices\", [-6.3, 3.7, 1, 0, 0, 6.3, 3.7, 1, 0.984375, 0, -6.3, -3.7, 1, 0, 0.578125, 6.3, 3.7, 1, 0.984375, 0, -6.3, -3.7, 1, 0, 0.578125, 6.3, -3.7, 1, 0.984375, 0.578125]);\nvar GP_K100 = /*#__PURE__*/function (_Gun_7) {\n  function GP_K100(initialX, initialY, initialRotation, bullets) {\n    var _this77;\n    _classCallCheck(this, GP_K100);\n    _this77 = _callSuper(this, GP_K100, [initialX, initialY, initialRotation]);\n    _defineProperty(_this77, \"width\", 14.8);\n    _defineProperty(_this77, \"height\", 6.180000000000001);\n    _defineProperty(_this77, \"name\", \"gp k100\");\n    _defineProperty(_this77, \"clusterName\", \"gp k100\");\n    _defineProperty(_this77, \"texture\", textures.objects.gpk100);\n    _this77.bullets = bullets !== null && bullets !== void 0 ? bullets : 58;\n    return _this77;\n  }\n  _inherits(GP_K100, _Gun_7);\n  return _createClass(GP_K100);\n}(_Gun_);\n_defineProperty(GP_K100, \"_properties\", {\n  fireRate: 3,\n  bulletSpeed: 8,\n  damage: 13,\n  accuracy: 2,\n  nozzelLength: 21,\n  capacity: 12,\n  reloadTime: 2,\n  useTextures: [6, 7],\n  shotSoundEffect: \"pistol-shot-5\"\n});\n_defineProperty(GP_K100, \"_defaultVertices\", [-7.4, 3.0900000000000003, 1, 0, 0, 7.4, 3.0900000000000003, 1, 0.578125, 0, -7.4, -3.0900000000000003, 1, 0, 0.965625, 7.4, 3.0900000000000003, 1, 0.578125, 0, -7.4, -3.0900000000000003, 1, 0, 0.965625, 7.4, -3.0900000000000003, 1, 0.578125, 0.965625]);\nvar NXR_44_MAG = /*#__PURE__*/function (_Gun_8) {\n  function NXR_44_MAG(initialX, initialY, initialRotation, bullets) {\n    var _this78;\n    _classCallCheck(this, NXR_44_MAG);\n    _this78 = _callSuper(this, NXR_44_MAG, [initialX, initialY, initialRotation]);\n    _defineProperty(_this78, \"width\", 13.820000000000002);\n    _defineProperty(_this78, \"height\", 6.88);\n    _defineProperty(_this78, \"clusterName\", \"nxr 44 mag\");\n    _defineProperty(_this78, \"texture\", textures.objects.nxr44mag);\n    _defineProperty(_this78, \"name\", \"nxr 44 mag\");\n    _this78.bullets = bullets !== null && bullets !== void 0 ? bullets : 24;\n    return _this78;\n  }\n  _inherits(NXR_44_MAG, _Gun_8);\n  return _createClass(NXR_44_MAG);\n}(_Gun_);\n_defineProperty(NXR_44_MAG, \"_properties\", {\n  fireRate: 0.8,\n  bulletSpeed: 10,\n  damage: 42,\n  accuracy: 8,\n  nozzelLength: 21,\n  capacity: 6,\n  reloadTime: 5,\n  useTextures: [8, 9],\n  shotSoundEffect: \"pistol-shot-6\",\n  reloadSoundEffect: \"revolver-reload\"\n});\n_defineProperty(NXR_44_MAG, \"_defaultVertices\", [-6.910000000000001, 3.44, 1, 0, 0, 6.910000000000001, 3.44, 1, 0.5398437500000001, 0, -6.910000000000001, -3.44, 1, 0, 0.5375, 6.910000000000001, 3.44, 1, 0.5398437500000001, 0, -6.910000000000001, -3.44, 1, 0, 0.5375, 6.910000000000001, -3.44, 1, 0.5398437500000001, 0.5375]);\nvar KC_357 = /*#__PURE__*/function (_Gun_9) {\n  function KC_357(initialX, initialY, initialRotation, bullets) {\n    var _this79;\n    _classCallCheck(this, KC_357);\n    _this79 = _callSuper(this, KC_357, [initialX, initialY, initialRotation]);\n    _defineProperty(_this79, \"width\", 8.52);\n    _defineProperty(_this79, \"height\", 5.6);\n    _defineProperty(_this79, \"clusterName\", \"kc 357\");\n    _defineProperty(_this79, \"texture\", textures.objects.kc357);\n    _defineProperty(_this79, \"name\", \"kc 357\");\n    _this79.bullets = bullets !== null && bullets !== void 0 ? bullets : 48;\n    return _this79;\n  }\n  _inherits(KC_357, _Gun_9);\n  return _createClass(KC_357);\n}(_Gun_);\n_defineProperty(KC_357, \"_properties\", {\n  fireRate: 2.5,\n  bulletSpeed: 5,\n  damage: 12,\n  accuracy: 5,\n  nozzelLength: 15,\n  capacity: 6,\n  reloadTime: 3,\n  useTextures: [textures.skins.avatardrawkc357.id, textures.skins.avatardrawkc357pullback.id],\n  shotSoundEffect: \"pistol-shot-2\",\n  reloadSoundEffect: \"revolver-reload\"\n});\n_defineProperty(KC_357, \"_defaultVertices\", [-4.26, 2.8, 1, 0, 0, 4.26, 2.8, 1, 0.665625, 0, -4.26, -2.8, 1, 0, 0.875, 4.26, 2.8, 1, 0.665625, 0, -4.26, -2.8, 1, 0, 0.875, 4.26, -2.8, 1, 0.665625, 0.875]);\nvar X6_91 = /*#__PURE__*/function (_Gun_10) {\n  function X6_91(initialX, initialY, initialRotation, bullets) {\n    var _this80;\n    _classCallCheck(this, X6_91);\n    _this80 = _callSuper(this, X6_91, [initialX, initialY, initialRotation]);\n    _defineProperty(_this80, \"width\", 9.2);\n    _defineProperty(_this80, \"height\", 6.8);\n    _defineProperty(_this80, \"clusterName\", \"x6 91\");\n    _defineProperty(_this80, \"texture\", textures.objects.x691);\n    _defineProperty(_this80, \"name\", \"x6 91\");\n    _this80.bullets = bullets !== null && bullets !== void 0 ? bullets : 52;\n    return _this80;\n  }\n  _inherits(X6_91, _Gun_10);\n  return _createClass(X6_91);\n}(_Gun_);\n_defineProperty(X6_91, \"_properties\", {\n  fireRate: 2.2,\n  bulletSpeed: 4,\n  damage: 64,\n  accuracy: 1,\n  nozzelLength: 21,\n  capacity: 7,\n  reloadTime: 4,\n  useTextures: [textures.skins.avatardrawx691.id, textures.skins.avatardrawx691pullback.id],\n  shotSoundEffect: \"pistol-shot-3\"\n});\n_defineProperty(X6_91, \"_defaultVertices\", [-4.6, 3.4, 1, 0, 0, 4.6, 3.4, 1, 0.71875, 0, -4.6, -3.4, 1, 0, 0.53125, 4.6, 3.4, 1, 0.71875, 0, -4.6, -3.4, 1, 0, 0.53125, 4.6, -3.4, 1, 0.71875, 0.53125]);\nvar USP_45 = /*#__PURE__*/function (_Gun_11) {\n  function USP_45(initialX, initialY, initialRotation, bullets) {\n    var _this81;\n    _classCallCheck(this, USP_45);\n    _this81 = _callSuper(this, USP_45, [initialX, initialY, initialRotation]);\n    _defineProperty(_this81, \"width\", 16.3);\n    _defineProperty(_this81, \"height\", 7.860000000000001);\n    _defineProperty(_this81, \"clusterName\", \"usp 45\");\n    _defineProperty(_this81, \"texture\", textures.objects.usp45);\n    _defineProperty(_this81, \"name\", \"usp 45\");\n    _this81.bullets = bullets !== null && bullets !== void 0 ? bullets : 52;\n    return _this81;\n  }\n  _inherits(USP_45, _Gun_11);\n  return _createClass(USP_45);\n}(_Gun_);\n_defineProperty(USP_45, \"_properties\", {\n  fireRate: 2,\n  bulletSpeed: 7,\n  damage: 52,\n  accuracy: 5,\n  nozzelLength: 21,\n  capacity: 8,\n  reloadTime: 4,\n  useTextures: [textures.skins.avatardrawusp45.id, textures.skins.avatardrawusp45pullback.id],\n  shotSoundEffect: \"pistol-shot-7\"\n});\n_defineProperty(USP_45, \"_defaultVertices\", [-8.15, 3.9300000000000006, 1, 0, 0, 8.15, 3.9300000000000006, 1, 0.63671875, 0, -8.15, -3.9300000000000006, 1, 0, 0.6140625000000001, 8.15, 3.9300000000000006, 1, 0.63671875, 0, -8.15, -3.9300000000000006, 1, 0, 0.6140625000000001, 8.15, -3.9300000000000006, 1, 0.63671875, 0.6140625000000001]);\nvar StubbyShotgun = /*#__PURE__*/function (_Gun_12) {\n  function StubbyShotgun(initialX, initialY, initialRotation, bullets) {\n    var _this82;\n    _classCallCheck(this, StubbyShotgun);\n    _this82 = _callSuper(this, StubbyShotgun, [initialX, initialY, initialRotation]);\n    _defineProperty(_this82, \"width\", 16.240000000000002);\n    _defineProperty(_this82, \"height\", 7.3);\n    _defineProperty(_this82, \"clusterName\", \"stubby shotgun\");\n    _defineProperty(_this82, \"texture\", textures.objects.stubbyshotgun);\n    _defineProperty(_this82, \"name\", \"stubby shotgun\");\n    _defineProperty(_this82, \"shotgun\", true);\n    _this82.bullets = bullets !== null && bullets !== void 0 ? bullets : 24;\n    return _this82;\n  }\n  _inherits(StubbyShotgun, _Gun_12);\n  return _createClass(StubbyShotgun);\n}(_Gun_);\n_defineProperty(StubbyShotgun, \"_properties\", {\n  fireRate: 1,\n  bulletSpeed: 10,\n  damage: 15,\n  accuracy: 10,\n  nozzelLength: 21,\n  capacity: 6,\n  reloadTime: 5,\n  bulletCombo: 6,\n  useTextures: [textures.skins.avatardrawstubbyshotgun.id, textures.skins.avatardrawstubbyshotgunpullback.id],\n  shotSoundEffect: \"shotgun-shot-1\",\n  reloadSoundEffect: \"shotgun-reload\"\n});\n_defineProperty(StubbyShotgun, \"_defaultVertices\", [-8.120000000000001, 3.65, 1, 0, 0, 8.120000000000001, 3.65, 1, 0.634375, 0, -8.120000000000001, -3.65, 1, 0, 0.5703125, 8.120000000000001, 3.65, 1, 0.634375, 0, -8.120000000000001, -3.65, 1, 0, 0.5703125, 8.120000000000001, -3.65, 1, 0.634375, 0.5703125]);\nvar RobberShotgun = /*#__PURE__*/function (_Gun_13) {\n  function RobberShotgun(initialX, initialY, initialRotation, bullets) {\n    var _this83;\n    _classCallCheck(this, RobberShotgun);\n    _this83 = _callSuper(this, RobberShotgun, [initialX, initialY, initialRotation]);\n    _defineProperty(_this83, \"width\", 19.2);\n    _defineProperty(_this83, \"height\", 6.4);\n    _defineProperty(_this83, \"clusterName\", \"robber shotgun\");\n    _defineProperty(_this83, \"texture\", textures.objects.robbershotgun);\n    _defineProperty(_this83, \"name\", \"robber shotgun\");\n    _defineProperty(_this83, \"shotgun\", true);\n    _this83.bullets = bullets !== null && bullets !== void 0 ? bullets : 35;\n    return _this83;\n  }\n  _inherits(RobberShotgun, _Gun_13);\n  return _createClass(RobberShotgun);\n}(_Gun_);\n_defineProperty(RobberShotgun, \"_properties\", {\n  fireRate: 2,\n  bulletSpeed: 7,\n  damage: 25,\n  accuracy: 3,\n  nozzelLength: 21,\n  capacity: 2,\n  reloadTime: 3,\n  bulletCombo: 6,\n  useTextures: [textures.skins.avatardrawrobbershotgun.id, textures.skins.avatardrawrobbershotgunpullback.id],\n  shotSoundEffect: \"shotgun-shot-2\",\n  reloadSoundEffect: \"shotgun-reload\"\n});\n_defineProperty(RobberShotgun, \"_defaultVertices\", [-9.6, 3.2, 1, 0, 0, 9.6, 3.2, 1, 0.75, 0, -9.6, -3.2, 1, 0, 0.5, 9.6, 3.2, 1, 0.75, 0, -9.6, -3.2, 1, 0, 0.5, 9.6, -3.2, 1, 0.75, 0.5]);\nvar ClassicShotgun = /*#__PURE__*/function (_Gun_14) {\n  function ClassicShotgun(initialX, initialY, initialRotation, bullets) {\n    var _this84;\n    _classCallCheck(this, ClassicShotgun);\n    _this84 = _callSuper(this, ClassicShotgun, [initialX, initialY, initialRotation]);\n    _defineProperty(_this84, \"width\", 16.240000000000002);\n    _defineProperty(_this84, \"height\", 7.3);\n    _defineProperty(_this84, \"clusterName\", \"classic shotgun\");\n    _defineProperty(_this84, \"texture\", textures.objects.classicshotgun);\n    _defineProperty(_this84, \"name\", \"classic shotgun\");\n    _defineProperty(_this84, \"shotgun\", true);\n    _this84.bullets = bullets !== null && bullets !== void 0 ? bullets : 42;\n    return _this84;\n  }\n  _inherits(ClassicShotgun, _Gun_14);\n  return _createClass(ClassicShotgun);\n}(_Gun_);\n_defineProperty(ClassicShotgun, \"_properties\", {\n  fireRate: 1.8,\n  bulletSpeed: 12,\n  damage: 13,\n  accuracy: 7,\n  nozzelLength: 21,\n  capacity: 8,\n  reloadTime: 4,\n  bulletCombo: 5,\n  useTextures: [textures.skins.avatardrawclassicshotgun.id, textures.skins.avatardrawclassicshotgunpullback.id],\n  shotSoundEffect: \"shotgun-shot-3\",\n  reloadSoundEffect: \"shotgun-reload\"\n});\n_defineProperty(ClassicShotgun, \"_defaultVertices\", [-8.120000000000001, 3.65, 1, 0, 0, 8.120000000000001, 3.65, 1, 0.634375, 0, -8.120000000000001, -3.65, 1, 0, 0.5703125, 8.120000000000001, 3.65, 1, 0.634375, 0, -8.120000000000001, -3.65, 1, 0, 0.5703125, 8.120000000000001, -3.65, 1, 0.634375, 0.5703125]);\nvar HeavyShotgun = /*#__PURE__*/function (_Gun_15) {\n  function HeavyShotgun(initialX, initialY, initialRotation, bullets) {\n    var _this85;\n    _classCallCheck(this, HeavyShotgun);\n    _this85 = _callSuper(this, HeavyShotgun, [initialX, initialY, initialRotation]);\n    _defineProperty(_this85, \"width\", 20.2);\n    _defineProperty(_this85, \"height\", 6.4);\n    _defineProperty(_this85, \"clusterName\", \"heavy shotgun\");\n    _defineProperty(_this85, \"texture\", textures.objects.heavyshotgun);\n    _defineProperty(_this85, \"name\", \"heavy shotgun\");\n    _defineProperty(_this85, \"shotgun\", true);\n    _this85.bullets = bullets !== null && bullets !== void 0 ? bullets : 54;\n    return _this85;\n  }\n  _inherits(HeavyShotgun, _Gun_15);\n  return _createClass(HeavyShotgun);\n}(_Gun_);\n_defineProperty(HeavyShotgun, \"_properties\", {\n  fireRate: 0.5,\n  bulletSpeed: 12,\n  damage: 30,\n  accuracy: 13,\n  nozzelLength: 21,\n  capacity: 8,\n  reloadTime: 6,\n  bulletCombo: 10,\n  useTextures: [textures.skins.avatardrawheavyshotgun.id, textures.skins.avatardrawheavyshotgunpullback.id],\n  shotSoundEffect: \"shotgun-shot-4\",\n  reloadSoundEffect: \"shotgun-reload\"\n});\n_defineProperty(HeavyShotgun, \"_defaultVertices\", [-10.1, 3.2, 1, 0, 0, 10.1, 3.2, 1, 0.7890625, 0, -10.1, -3.2, 1, 0, 0.5, 10.1, 3.2, 1, 0.7890625, 0, -10.1, -3.2, 1, 0, 0.5, 10.1, -3.2, 1, 0.7890625, 0.5]);\nvar GreyBackpack = /*#__PURE__*/function (_Pickup_15) {\n  function GreyBackpack(initialX, initialY, initialRotation) {\n    var _this86;\n    _classCallCheck(this, GreyBackpack);\n    _this86 = _callSuper(this, GreyBackpack, [initialX, initialY, initialRotation]);\n    _defineProperty(_this86, \"width\", 8);\n    _defineProperty(_this86, \"clusterName\", \"grey backpack\");\n    _defineProperty(_this86, \"texture\", textures.objects.greybackpack);\n    _defineProperty(_this86, \"height\", 10.8);\n    _defineProperty(_this86, \"subLayer\", 1);\n    _defineProperty(_this86, \"moveable\", true);\n    _defineProperty(_this86, \"name\", \"grey backpack\");\n    _defineProperty(_this86, \"type\", \"backpack\");\n    return _this86;\n  }\n  _inherits(GreyBackpack, _Pickup_15);\n  return _createClass(GreyBackpack);\n}(_Pickup_);\n_defineProperty(GreyBackpack, \"_properties\", {\n  capacity: 10,\n  useTexture: textures.skins.grey_backpack_acc.id\n});\n_defineProperty(GreyBackpack, \"_defaultVertices\", [-4, 5.4, 1, 0, 0, 4, 5.4, 1, 0.625, 0, -4, -5.4, 1, 0, 0.84375, 4, 5.4, 1, 0.625, 0, -4, -5.4, 1, 0, 0.84375, 4, -5.4, 1, 0.625, 0.84375]);\nvar WhiteBackpack = /*#__PURE__*/function (_Pickup_16) {\n  function WhiteBackpack(initialX, initialY, initialRotation) {\n    var _this87;\n    _classCallCheck(this, WhiteBackpack);\n    _this87 = _callSuper(this, WhiteBackpack, [initialX, initialY, initialRotation]);\n    _defineProperty(_this87, \"width\", 8);\n    _defineProperty(_this87, \"clusterName\", \"white backpack\");\n    _defineProperty(_this87, \"texture\", textures.objects.whitebackpack);\n    _defineProperty(_this87, \"height\", 10.8);\n    _defineProperty(_this87, \"subLayer\", 1);\n    _defineProperty(_this87, \"moveable\", true);\n    _defineProperty(_this87, \"name\", \"white backpack\");\n    _defineProperty(_this87, \"type\", \"backpack\");\n    return _this87;\n  }\n  _inherits(WhiteBackpack, _Pickup_16);\n  return _createClass(WhiteBackpack);\n}(_Pickup_);\n_defineProperty(WhiteBackpack, \"_properties\", {\n  capacity: 25,\n  useTexture: textures.skins.white_backpack_acc.id\n});\n_defineProperty(WhiteBackpack, \"_defaultVertices\", [-4, 5.4, 1, 0, 0, 4, 5.4, 1, 0.625, 0, -4, -5.4, 1, 0, 0.84375, 4, 5.4, 1, 0.625, 0, -4, -5.4, 1, 0, 0.84375, 4, -5.4, 1, 0.625, 0.84375]);\nvar BlackBackpack = /*#__PURE__*/function (_Pickup_17) {\n  function BlackBackpack(initialX, initialY, initialRotation) {\n    var _this88;\n    _classCallCheck(this, BlackBackpack);\n    _this88 = _callSuper(this, BlackBackpack, [initialX, initialY, initialRotation]);\n    _defineProperty(_this88, \"width\", 8);\n    _defineProperty(_this88, \"clusterName\", \"black backpack\");\n    _defineProperty(_this88, \"texture\", textures.objects.blackbackpack);\n    _defineProperty(_this88, \"height\", 10.8);\n    _defineProperty(_this88, \"subLayer\", 1);\n    _defineProperty(_this88, \"moveable\", true);\n    _defineProperty(_this88, \"name\", \"black backpack\");\n    _defineProperty(_this88, \"type\", \"backpack\");\n    return _this88;\n  }\n  _inherits(BlackBackpack, _Pickup_17);\n  return _createClass(BlackBackpack);\n}(_Pickup_);\n_defineProperty(BlackBackpack, \"_properties\", {\n  capacity: 50,\n  useTexture: textures.skins.black_backpack_acc.id\n});\n_defineProperty(BlackBackpack, \"_defaultVertices\", [-4, 5.4, 1, 0, 0, 4, 5.4, 1, 0.625, 0, -4, -5.4, 1, 0, 0.84375, 4, 5.4, 1, 0.625, 0, -4, -5.4, 1, 0, 0.84375, 4, -5.4, 1, 0.625, 0.84375]);\nvar PickupRing = /*#__PURE__*/function (_InstancedClusterClie11) {\n  function PickupRing(initialX, initialY, initialRotation) {\n    var _this89;\n    _classCallCheck(this, PickupRing);\n    _this89 = _callSuper(this, PickupRing, [initialX, initialY, initialRotation]);\n    _defineProperty(_this89, \"width\", 8.56);\n    _defineProperty(_this89, \"height\", 8.56);\n    _defineProperty(_this89, \"name\", \"pickup ring\");\n    _defineProperty(_this89, \"clusterName\", \"pickup ring\");\n    _defineProperty(_this89, \"exclude\", true);\n    _defineProperty(_this89, \"texture\", textures.misc.pickupring);\n    _defineProperty(_this89, \"managedMovement\", true);\n    _defineProperty(_this89, \"subLayer\", 2);\n    _this89.rot = 0;\n    _this89.animation = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n      if (this.rot === 360) {\n        this.rot = 0;\n      } else {\n        this.translate(0, 0, this.rot += 2, true);\n      }\n    }, _this89, 0.1, 0.2);\n    return _this89;\n  }\n  _inherits(PickupRing, _InstancedClusterClie11);\n  return _createClass(PickupRing, [{\n    key: \"preRender\",\n    value: function preRender() {\n      this.animation.run();\n    }\n  }]);\n}(_InstancedClusterClient_);\n_defineProperty(PickupRing, \"_defaultVertices\", [-4.28, 4.28, 1, 0, 0, 4.28, 4.28, 1, 0.66875, 0, -4.28, -4.28, 1, 0, 0.66875, 4.28, 4.28, 1, 0.66875, 0, -4.28, -4.28, 1, 0, 0.66875, 4.28, -4.28, 1, 0.66875, 0.66875]);\nvar Avatar = /*#__PURE__*/function () {\n  function Avatar() {\n    var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"Unnamed Human\";\n    var initialX = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var initialY = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var initialRotation = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    _classCallCheck(this, Avatar);\n    this.character = name;\n    this.nameObj = new Text(name, 25);\n    this.nameObj.translate(initialX + 0, initialY + 10);\n    this.vao = ext.createVertexArrayOES();\n    ext.bindVertexArrayOES(this.vao);\n    this.vertices = {\n      body: [-7.0200000000000005, 21.4, 1, 0, 0, 0, 7.0200000000000005, 21.4, 1, 0.5484375, 0, 0, -7.0200000000000005, -21.4, 1, 0, 0.8359375, 0, 7.0200000000000005, 21.4, 1, 0.5484375, 0, 0, -7.0200000000000005, -21.4, 1, 0, 0.8359375, 0, 7.0200000000000005, -21.4, 1, 0.5484375, 0.8359375, 0],\n      eyes: [-2.7, 3.379999999999999, 1, 0.16875, 0.351953125, 1, 2.7, 3.379999999999999, 1, 0.3796875, 0.351953125, 1, -2.7, 1.4800000000000004, 1, 0.16875, 0.3890625, 1, 2.7, 3.379999999999999, 1, 0.3796875, 0.351953125, 1, -2.7, 1.4800000000000004, 1, 0.16875, 0.3890625, 1, 2.7, 1.4800000000000004, 1, 0.3796875, 0.3890625, 1],\n      accessory1: [-7.12, 4.3799999999999955, 1, -0.00390625, 0.332421875, 2, 6.920000000000001, 4.3799999999999955, 1, 0.54453125, 0.332421875, 2, -7.12, -38.42, 1, -0.00390625, 1.168359375, 2, 6.920000000000001, 4.3799999999999955, 1, 0.54453125, 0.332421875, 2, -7.12, -38.42, 1, -0.00390625, 1.168359375, 2, 6.920000000000001, -38.42, 1, 0.54453125, 1.168359375, 2],\n      accessory2: [-7.12, 4.3799999999999955, 1, -0.00390625, 0.332421875, 3, 6.920000000000001, 4.3799999999999955, 1, 0.54453125, 0.332421875, 3, -7.12, -38.42, 1, -0.00390625, 1.168359375, 3, 6.920000000000001, 4.3799999999999955, 1, 0.54453125, 0.332421875, 3, -7.12, -38.42, 1, -0.00390625, 1.168359375, 3, 6.920000000000001, -38.42, 1, 0.54453125, 1.168359375, 3]\n    };\n    this.trans = {\n      offsetX: initialX || 0,\n      offsetY: initialY || 0,\n      rotation: initialRotation * Math.PI / 180 || 0\n    };\n    this.width = 8.56;\n    this.height = 8.56;\n    this.obstacle = true;\n    this.segments = [[-4.08, -4.08, 8.16, 8.16]];\n    this.bounds = {\n      width: this.height,\n      height: this.height\n    };\n    this.id = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)();\n    this.playerId = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)(20);\n    this.inventory = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.Inventory();\n    this.type = \"avatar\";\n    this.name = \"avatar\";\n    this.state = {\n      strength: 5,\n      agility: 0.5,\n      armour: 0,\n      invinsible: false,\n      kills: 0,\n      deaths: 0,\n      hitboxes: {\n        leftPunch: {\n          x: -4,\n          y: 7,\n          width: 2,\n          height: 2\n        },\n        rightPunch: {\n          x: 4,\n          y: 7,\n          width: 2,\n          height: 2\n        },\n        knife: {\n          x: 5,\n          y: 12,\n          width: 4,\n          height: 4\n        },\n        pickup: {\n          x: 0,\n          y: 0,\n          width: 1,\n          height: 1\n        }\n      },\n      seat: {\n        ref: undefined,\n        id: undefined\n      },\n      pickup: {\n        offset: {\n          x: 0,\n          y: 0,\n          aRotation: 0,\n          bRotation: 0\n        },\n        current: false,\n        reachDistance: 8\n      },\n      vitals: {\n        health: 100,\n        hunger: 100,\n        thirst: 100\n      },\n      targetId: undefined,\n      confidence: 25,\n      reputation: 25,\n      walking: false,\n      punching: false,\n      stabbing: false,\n      armed: false,\n      melee: false,\n      draw: false,\n      fire: false,\n      equippedItems: {\n        mainTool: undefined,\n        armour: undefined,\n        accessory1: undefined,\n        accessory2: undefined\n      },\n      punchingAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n        var leftPunch = this.state.leftPunchAnimation,\n          rightPunch = this.state.rightPunchAnimation;\n        if (leftPunch.active) {\n          leftPunch.run();\n        } else if (rightPunch.active) {\n          rightPunch.run();\n        }\n        if (!leftPunch.active && !rightPunch.active) (Math.random() < 0.5 ? leftPunch : rightPunch).active = true;\n      }, this, 0.01),\n      reloadTimeout: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLinearAnimation([function () {\n        if (this.state.equippedItems.mainTool) {\n          this.state.equippedItems.mainTool.reloadProgress = 0;\n          this.state.equippedItems.mainTool.loaded = true;\n          enableReloadDisplay();\n          updateAmmoDisplay();\n        } else {\n          enableReloadDisplay();\n        }\n      }], this, [0], function () {\n        enableReloadDisplay();\n      }),\n      fireAnimation: undefined,\n      recoilAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLinearAnimation([function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[1];\n      }, function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }], this, [0.05, 0.05], function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }, 0.5, true),\n      walkingAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLoopAnimation([function () {\n        this.state.position.body.texture = this.state.draw && this.state.melee ? this.state.equippedItems.mainTool.constructor._properties.useTextures[4] : 2;\n      }, function () {\n        this.state.position.body.texture = this.state.draw && this.state.melee ? this.state.equippedItems.mainTool.constructor._properties.useTextures[0] : 0;\n      }, function () {\n        this.state.position.body.texture = this.state.draw && this.state.melee ? this.state.equippedItems.mainTool.constructor._properties.useTextures[3] : 3;\n      }, function () {\n        this.state.position.body.texture = this.state.draw && this.state.melee ? this.state.equippedItems.mainTool.constructor._properties.useTextures[0] : 0;\n      }], this, [0.08, 0.08, 0.08, 0.08], function () {\n        this.state.position.body.texture = 0;\n      }, 0.5),\n      leftPunchAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLoopAnimation([function () {\n        this.state.position.body.texture = 0;\n      }, function () {\n        this.state.position.body.texture = 10;\n      }, function () {\n        this.state.position.body.texture = 11;\n        this.meleeAttack(this.state.strength, this.state.hitboxes.leftPunch);\n        $AUDIO.playSound(Math.random() < 0.5 ? \"swing-1\" : \"swing-2\");\n      }, function () {\n        this.state.position.body.texture = 0;\n      }], this, [0.08, 0.08, 0.08, 0.15], function () {\n        this.state.position.body.texture = 0;\n      }),\n      rightPunchAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLoopAnimation([function () {\n        this.state.position.body.texture = 0;\n      }, function () {\n        this.state.position.body.texture = 12;\n      }, function () {\n        this.state.position.body.texture = 13;\n        this.meleeAttack(this.state.strength, this.state.hitboxes.rightPunch);\n        $AUDIO.playSound(Math.random() < 0.5 ? \"swing-1\" : \"swing-2\");\n      }, function () {\n        this.state.position.body.texture = 0;\n      }], this, [0.08, 0.08, 0.08, 0.15], function () {\n        this.state.position.body.texture = 0;\n      }),\n      meleeAttackAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLoopAnimation([function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }, function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[2];\n        this.meleeAttack(this.state.equippedItems.mainTool.constructor._properties.damage + this.state.strength, this.state.hitboxes.knife);\n        $AUDIO.playSound(Math.random() < 0.5 ? \"knife-1\" : \"knife-2\");\n      }, function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[1];\n      }, function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }], this, [0.08, 0.08, 0.08, 0.15], function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }),\n      blinkingAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLoopAnimation([function () {\n        this.state.position.eyes.texture = 0;\n      }, function () {\n        this.state.position.eyes.texture = 1;\n      }, function () {\n        this.state.position.eyes.texture = 0;\n      }], this, [5 * Math.random(), 1, 1]),\n      position: {\n        body: {\n          texture: 0\n        },\n        eyes: {\n          texture: 0\n        },\n        accessory1: {\n          texture: 0\n        },\n        accessory2: {\n          texture: 0\n        }\n      }\n    };\n    ext.bindVertexArrayOES(this.vao);\n    this.buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 24, 0);\n    gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 24, 12);\n    gl.vertexAttribPointer(locations.textrUnit, 1, gl.FLOAT, false, 24, 20);\n    gl.enableVertexAttribArray(locations.coords);\n    gl.enableVertexAttribArray(locations.tcoords);\n    gl.enableVertexAttribArray(locations.textrUnit);\n    gl.disableVertexAttribArray(locations.offset);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([].concat(_toConsumableArray(this.vertices.body), _toConsumableArray(this.vertices.eyes))), gl.STATIC_DRAW);\n    gl.useProgram(program);\n  }\n  return _createClass(Avatar, [{\n    key: \"translate\",\n    value: function translate(x, y) {\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n      this.nameObj.translate(x, y);\n      gl.uniform2fv(locations.translation, [this.trans.offsetX, this.trans.offsetY]);\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(a) {\n      a = a * Math.PI / 180;\n      this.trans.rotation = a;\n      gl.uniform1f(locations.rotation, this.trans.rotation);\n    }\n  }, {\n    key: \"postLink\",\n    value: function postLink() {\n      this.state.leftPunchAnimation.animationMultFactor = this.state.agility;\n      this.state.rightPunchAnimation.animationMultFactor = this.state.agility;\n      this.state.meleeAttackAnimation.animationMultFactor = this.state.agility * 2;\n      this.state.fireAnimation = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n        var _this$state$equippedI;\n        this.state.recoilAnimation.start();\n        var bulletCombo = this.state.equippedItems.mainTool.shotgun ? this.state.equippedItems.mainTool.constructor._properties.bulletCombo : 1;\n        var map = $CURRENT_MAP;\n        for (var i = 0; i < bulletCombo; i++) {\n          var _rotate7 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(0, 1, this.trans.rotation * 180 / Math.PI),\n            _rotate8 = _slicedToArray(_rotate7, 2),\n            initialTrajectoryX = _rotate8[0],\n            initialTrajectoryY = _rotate8[1];\n          var randomBulletRotation = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(this.state.equippedItems.mainTool.constructor._properties.accuracy || 0);\n          randomBulletRotation = Math.random() < 0.5 ? -randomBulletRotation : randomBulletRotation;\n          var _rotate9 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(initialTrajectoryX, initialTrajectoryY, randomBulletRotation),\n            _rotate10 = _slicedToArray(_rotate9, 2),\n            finalTrajectoryX = _rotate10[0],\n            finalTrajectoryY = _rotate10[1];\n          var _rotate11 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(0, this.state.equippedItems.mainTool.constructor._properties.nozzelLength, this.trans.rotation * 180 / Math.PI),\n            _rotate12 = _slicedToArray(_rotate11, 2),\n            initialPointX = _rotate12[0],\n            initialPointY = _rotate12[1];\n          var bullet = new Bullet(initialPointX + this.trans.offsetX, initialPointY + this.trans.offsetY, this.trans.rotation * 180 / Math.PI + 90, finalTrajectoryX * this.state.equippedItems.mainTool.constructor._properties.bulletSpeed, finalTrajectoryY * this.state.equippedItems.mainTool.constructor._properties.bulletSpeed, this.state.equippedItems.mainTool.constructor._properties.damage, this);\n          if (this.state.equippedItems.mainTool.constructor._properties.explosive) bullet.explosive = true;\n          map.link(bullet);\n        }\n        var _rotate13 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(20, 0, this.trans.rotation * 180 / Math.PI),\n          _rotate14 = _slicedToArray(_rotate13, 2),\n          shellDirectionX = _rotate14[0],\n          shellDirectionY = _rotate14[1],\n          randomShellRotation = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(10);\n        var _rotate15 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(shellDirectionX, shellDirectionY, Math.random() < 0.5 ? -randomShellRotation : randomShellRotation),\n          _rotate16 = _slicedToArray(_rotate15, 2),\n          randomShellDirectionX = _rotate16[0],\n          randomShellDirectionY = _rotate16[1];\n        var _rotate17 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(0, 8, this.trans.rotation * 180 / Math.PI),\n          _rotate18 = _slicedToArray(_rotate17, 2),\n          shellInitialX = _rotate18[0],\n          shellInitialY = _rotate18[1];\n        map.link(new BulletShell(this.trans.offsetX + shellInitialX, this.trans.offsetY + shellInitialY, randomShellDirectionX, randomShellDirectionY));\n        this.inventory.weapons[this.state.equippedItems.mainTool.name].ammo--;\n        this.state.equippedItems.mainTool.reloadProgress++;\n        if (this.state.equippedItems.mainTool.reloadProgress === this.state.equippedItems.mainTool.constructor._properties.capacity) this.state.equippedItems.mainTool.loaded = false;\n        updateAmmoDisplay();\n        if (this.state.equippedItems.mainTool) $AUDIO.playSound((_this$state$equippedI = this.state.equippedItems.mainTool) === null || _this$state$equippedI === void 0 ? void 0 : _this$state$equippedI.constructor._properties.shotSoundEffect);\n        $AUDIO.playSound(\"bulletshell\");\n      }, this, 0);\n    }\n  }, {\n    key: \"hit\",\n    value: function hit(damage, owner, bullet) {\n      if (!this.state.invinsible) {\n        if (this.state.armour > 0) {\n          if (damage > this.state.armour) {\n            this.state.vitals.health = Math.max(0, this.state.vitals.health - Math.abs(this.state.armour - damage));\n          }\n          this.state.armour = Math.max(0, this.state.armour - damage);\n          if (this.state.equippedItems.armour) {\n            this.state.equippedItems.armour.integrity = Math.max(0, this.state.equippedItems.armour.integrity - damage);\n            updateArmourDisplay();\n          }\n          if (this.state.armour === 0) hideArmourDisplay();\n        } else {\n          this.state.vitals.health = Math.max(0, this.state.vitals.health - damage);\n        }\n        updateHealthBar();\n        if (this.state.vitals.health <= 0 && this.state.armour === 0) {\n          var attacker = $CURRENT_MAP.avatars[owner.id];\n          if (attacker) attacker.state.kills += 1;\n          this.die();\n        }\n      }\n    }\n  }, {\n    key: \"harm\",\n    value: function harm(damage) {\n      if (!this.state.invinsible) {\n        this.state.vitals.health = Math.max(this.state.vitals.health - damage, 0);\n        updateHealthBar();\n      }\n    }\n  }, {\n    key: \"die\",\n    value: function die() {\n      $AVATAR.state.deaths += 1;\n      this.purgeItems(5);\n      delete $CURRENT_MAP.avatars[this.id];\n      delete $CURRENT_MAP.obstacles[this.id];\n      endDialogue();\n      if (this.state.pickup.current) this.drop();\n      this.hidden = true;\n      noclip = true;\n      returnToTitleScreen();\n      return;\n    }\n  }, {\n    key: \"drawWeapon\",\n    value: function drawWeapon() {\n      if (this.state.equippedItems.mainTool && !this.state.stabbing && (this.state.armed || this.state.melee)) {\n        this.state.draw = true;\n        if (!(this.state.walking && this.state.melee)) this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }\n    }\n  }, {\n    key: \"holsterWeapon\",\n    value: function holsterWeapon() {\n      if (this.state.armed || this.state.melee) {\n        this.state.draw = false;\n        this.state.position.body.texture = 0;\n      }\n    }\n  }, {\n    key: \"reload\",\n    value: function reload() {\n      if (this.state.equippedItems.mainTool.reloadProgress) {\n        var _$AVATAR$state$equipp;\n        this.state.reloadTimeout.start();\n        disableReloadDisplay();\n        if (this.state.equippedItems.mainTool) $AUDIO.playSound(((_$AVATAR$state$equipp = $AVATAR.state.equippedItems.mainTool) === null || _$AVATAR$state$equipp === void 0 ? void 0 : _$AVATAR$state$equipp.constructor._properties.reloadSoundEffect) || \"pistol-reload\");\n      }\n    }\n  }, {\n    key: \"addItem\",\n    value: function addItem(item, slot) {\n      if (this.inventory.addItem(item, slot)) {\n        updateInventoryItem(item.slot, item.name);\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"dropItem\",\n    value: function dropItem(slot) {\n      var ring = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (!this.inventory.items[slot]) return false;\n      updateInventoryItem(this.inventory.items[slot].slot, this.inventory.items[slot].name, true);\n      this.unequipItem(slot);\n      var item = this.inventory.ejectItem(slot);\n      item.dropped = true;\n      if (ring) {\n        item.ring.trans.offsetX = item.trans.offsetX = this.trans.offsetX + (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(10, true);\n        item.ring.trans.offsetY = item.trans.offsetY = this.trans.offsetY + (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(10, true);\n        item.trans.rotation = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360);\n      } else {\n        delete item.ring;\n      }\n      $CURRENT_MAP.link(item);\n      $AUDIO.playSound(\"equip\");\n      return true;\n    }\n  }, {\n    key: \"purgeItems\",\n    value: function purgeItems(limit) {\n      var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var exclude = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n      for (var i = start; i < limit; i++) {\n        if (exclude.includes(i)) continue;\n        if (this.inventory.items[i]) this.dropItem(i);\n      }\n    }\n  }, {\n    key: \"equipItem\",\n    value: function equipItem(slot) {\n      if (this.state.pickup.current) return;\n      var item = this.inventory.items[slot],\n        accessoryChanged = false;\n      if (item) {\n        switch (item.type) {\n          case \"food\":\n            {\n              if (this.state.vitals.health < 100) this.state.vitals.health += item.regain;\n              if (this.state.vitals.hunger < 100) this.state.vitals.hunger += item.nutrition;\n              this.dropItem(slot);\n              item[\"delete\"]();\n              updateHungerDisplay();\n              updateHealthBar();\n            }\n            ;\n            break;\n          case \"cash\":\n            {\n              $AVATAR.inventory.cash += item.amount;\n              this.dropItem(slot);\n              item[\"delete\"]();\n              updateMoneyDisplay();\n            }\n            ;\n            break;\n          case \"detonator\":\n            {\n              item.activate();\n            }\n            ;\n            break;\n          case \"explosive\":\n            {\n              if (item.name === \"remote explosive\") {\n                item.arm();\n                $AVATAR.inventory.explosives.push(item.id);\n              } else {\n                item.activationTimeout.start();\n              }\n              this.dropItem(slot, false);\n            }\n            ;\n            break;\n          case \"armour\":\n            {\n              if (this.state.equippedItems.armour !== item) {\n                this.state.equippedItems.armour = item;\n                this.state.armour = item.integrity;\n                updateArmourDisplay();\n                showArmourDisplay();\n              }\n            }\n            ;\n            break;\n          case \"ammo\":\n            {\n              if (!item.used) {\n                var _this$state$equippedI2, _this$state$equippedI3;\n                if (item.name === \"ammo box\" && ((_this$state$equippedI2 = this.state.equippedItems.mainTool) === null || _this$state$equippedI2 === void 0 ? void 0 : _this$state$equippedI2.type) === \"gun\") {\n                  this.inventory.weapons[this.state.equippedItems.mainTool.name].ammo += this.state.equippedItems.mainTool.constructor._properties.capacity * item.constructor._properties.increase;\n                  item.used = true;\n                  this.dropItem(slot);\n                  updateAmmoDisplay();\n                } else if (item.name === \"multi ammo box\" && ((_this$state$equippedI3 = this.state.equippedItems.mainTool) === null || _this$state$equippedI3 === void 0 ? void 0 : _this$state$equippedI3.type) === \"gun\") {\n                  for (var w in this.inventory.weapons) {\n                    this.inventory.weapons[w].ammo += this.state.equippedItems.mainTool.constructor._properties.capacity * item.constructor._properties.increase;\n                  }\n                  item.used = true;\n                  this.dropItem(slot);\n                  updateAmmoDisplay();\n                }\n              }\n            }\n            break;\n          case \"medicine\":\n            {\n              this.state.armed = false;\n              if (!item.used && this.state.vitals.health < 100) {\n                this.state.vitals.health += Math.min(item.constructor._properties.regain, 100 - this.state.vitals.health);\n                item.used = true;\n                updateDescription();\n                this.dropItem(slot);\n                updateHealthBar();\n              }\n            }\n            break;\n          case \"gun\":\n            {\n              this.state.armed = true;\n              this.state.melee = false;\n              this.state.equippedItems.mainTool = item;\n              this.state.equippedItems.mainTool.reloadProgress = item.reloadProgress;\n              this.state.equippedItems.mainTool.loaded = item.loaded;\n              this.state.reloadTimeout.timingConfig[0] = this.state.equippedItems.mainTool.constructor._properties.reloadTime;\n              this.state.fireAnimation.rate = 0.5 / this.state.equippedItems.mainTool.constructor._properties.fireRate;\n              this.state.reloadTimeout.end();\n              updateAmmoDisplay();\n              showAmmoDisplay();\n            }\n            break;\n          case \"knife\":\n            {\n              this.state.armed = false;\n              this.state.melee = true;\n              this.state.equippedItems.mainTool = item;\n              this.state.reloadTimeout.end();\n            }\n            break;\n          case \"backpack\":\n            {\n              this.state.position.accessory1.texture = item.constructor._properties.useTexture;\n              this.state.equippedItems.accessory1 = item;\n              var obj;\n              if (15 + item.constructor._properties.capacity < this.inventory.slots) {\n                this.purgeItems(this.inventory.slots, 15 + item.constructor._properties.capacity, [slot]);\n                if (slot > 15 + item.constructor._properties.capacity) obj = this.inventory.ejectItem(slot);\n              }\n              setInventoryCapacity(15 + item.constructor._properties.capacity);\n              if (slot > 15 + item.constructor._properties.capacity && !this.addItem(obj)) {\n                this.dropItem(14);\n                this.inventory.addItem(obj, 14);\n              }\n              accessoryChanged = true;\n            }\n            break;\n        }\n        if (!this.state.equippedItems.mainTool || this.state.equippedItems.mainTool.type !== \"gun\") hideAmmoDisplay();\n        if (accessoryChanged) {\n          ext.bindVertexArrayOES(this.vao);\n          this.buffer = gl.createBuffer();\n          gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n          gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 24, 0);\n          gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 24, 12);\n          gl.vertexAttribPointer(locations.textrUnit, 1, gl.FLOAT, false, 24, 20);\n          gl.enableVertexAttribArray(locations.coords);\n          gl.enableVertexAttribArray(locations.tcoords);\n          gl.enableVertexAttribArray(locations.textrUnit);\n          gl.disableVertexAttribArray(locations.offset);\n          var buf = [].concat(_toConsumableArray(this.vertices.body), _toConsumableArray(this.vertices.eyes));\n          if (this.state.position.accessory1.texture) buf = buf.concat(this.vertices.accessory1);\n          if (this.state.position.accessory2.texture) buf = buf.concat(this.vertices.accessory2);\n          gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(buf), gl.STATIC_DRAW);\n        }\n        $AUDIO.playSound(\"equip\");\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"unequipItem\",\n    value: function unequipItem(slot) {\n      if (!this.inventory.items[slot] || this.inventory.items[slot] !== this.state.equippedItems.mainTool && this.inventory.items[slot] !== this.state.equippedItems.accessory1 && this.inventory.items[slot] !== this.state.equippedItems.accessory2 && this.inventory.items[slot] !== this.state.equippedItems.armour) return false;\n      var item = this.inventory.items[slot],\n        accessoryChanged = false;\n      switch (item.type) {\n        case \"armour\":\n          {\n            this.state.equippedItems.armour = undefined;\n            this.state.armour = 0;\n            hideArmourDisplay();\n          }\n          ;\n          break;\n        case \"gun\":\n          {\n            if (this.state.equippedItems.mainTool && item.slot === this.state.equippedItems.mainTool.slot) {\n              this.state.armed = false;\n              this.state.draw = false;\n              this.state.equippedItems.mainTool = undefined;\n              this.state.reloadTimeout.end();\n              hideAmmoDisplay();\n            }\n          }\n          ;\n          break;\n        case \"knife\":\n          {\n            this.state.melee = false;\n            this.state.draw = false;\n            this.state.stabbing = false;\n            this.state.equippedItems.mainTool = undefined;\n          }\n          ;\n          break;\n        case \"backpack\":\n          {\n            this.state.equippedItems.accessory1 = undefined;\n            this.state.position.accessory1.texture = 0;\n            this.purgeItems(this.inventory.slots, 15, [slot]);\n            var obj;\n            if (slot > 14) obj = this.inventory.ejectItem(slot);\n            setInventoryCapacity(15);\n            if (slot > 14 && !this.addItem(obj)) {\n              this.dropItem(14);\n              this.addItem(obj, 14);\n            }\n            accessoryChanged = true;\n          }\n          ;\n          break;\n      }\n      if (accessoryChanged) {\n        ext.bindVertexArrayOES(this.vao);\n        this.buffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n        gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 24, 0);\n        gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 24, 12);\n        gl.vertexAttribPointer(locations.textrUnit, 1, gl.FLOAT, false, 24, 20);\n        gl.enableVertexAttribArray(locations.coords);\n        gl.enableVertexAttribArray(locations.tcoords);\n        gl.enableVertexAttribArray(locations.textrUnit);\n        gl.disableVertexAttribArray(locations.offset);\n        var buf = [].concat(_toConsumableArray(this.vertices.body), _toConsumableArray(this.vertices.eyes));\n        if (this.state.position.accessory1.texture) buf = buf.concat(this.vertices.accessory1);\n        if (this.state.position.accessory2.texture) buf = buf.concat(this.vertices.accessory2);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(buf), gl.STATIC_DRAW);\n      }\n      return true;\n    }\n  }, {\n    key: \"preRender\",\n    value: function preRender() {\n      var _this$state$equippedI4;\n      // run animations\n\n      this.state.blinkingAnimation.run();\n      if (this.state.walking && !(this.state.armed && this.state.draw) && !this.state.punching && !this.state.stabbing) {\n        this.state.walkingAnimation.run();\n      } else if (!this.state.punching && !this.state.stabbing) {\n        this.state.walkingAnimation.end();\n      }\n      if (this.state.punching && !this.state.armed && !this.state.melee) {\n        this.state.punchingAnimation.run();\n      }\n      if ((this.state.armed || this.state.melee && !this.state.walking) && this.state.draw && !this.state.stabbing) {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }\n      if (this.state.stabbing && this.state.melee && !this.state.armed) {\n        this.state.meleeAttackAnimation.run();\n      }\n      if (this.state.fire && this.state.armed && (_this$state$equippedI4 = this.state.equippedItems.mainTool) !== null && _this$state$equippedI4 !== void 0 && _this$state$equippedI4.loaded && !this.state.reloadTimeout.reset && this.inventory.weapons[this.state.equippedItems.mainTool.name].ammo) {\n        this.state.fireAnimation.run();\n      }\n      if (this.state.armed && this.state.equippedItems.mainTool) this.state.recoilAnimation.run();\n      if (this.state.reloadTimeout.reset) this.state.reloadTimeout.run();\n      if (this.state.pickup.current) this.state.position.body.texture = 24;\n      if (this.state.equippedItems.mainTool && !$IS_MOBILE) this.state.draw = true;\n      this.movePickup();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      gl.uniform2fv(locations.translation, [this.trans.offsetX, this.trans.offsetY]);\n      gl.uniform1f(locations.rotation, this.trans.rotation);\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, textures.skins.index[this.state.position.body.texture]);\n      gl.activeTexture(gl.TEXTURE1);\n      gl.bindTexture(gl.TEXTURE_2D, textures.skins.index[this.state.position.eyes.texture]);\n      gl.activeTexture(gl.TEXTURE2);\n      gl.bindTexture(gl.TEXTURE_2D, textures.skins.index[this.state.position.accessory1.texture]);\n      gl.activeTexture(gl.TEXTURE3);\n      gl.bindTexture(gl.TEXTURE_2D, textures.skins.index[this.state.position.accessory2.texture]);\n      gl.useProgram(program);\n      gl.drawArrays(gl.TRIANGLES, 0, 24);\n      this.nameObj.render();\n    }\n  }, {\n    key: \"meleeAttack\",\n    value: function meleeAttack(damage, hitbox) {\n      var _rotate19 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(hitbox.x, hitbox.y, this.trans.rotation * 180 / Math.PI),\n        _rotate20 = _slicedToArray(_rotate19, 2),\n        x = _rotate20[0],\n        y = _rotate20[1],\n        map = $CURRENT_MAP;\n      x += this.trans.offsetX;\n      y += this.trans.offsetY;\n      var width = hitbox.width,\n        height = hitbox.height;\n      for (var i in map.avatars) {\n        var avatar = map.avatars[i];\n        if (Math.abs(x - avatar.trans.offsetX) < avatar.width / 2 + width / 2 && Math.abs(y - avatar.trans.offsetY) < avatar.height / 2 + height / 2) {\n          var _this$state$equippedI5;\n          avatar.hit(damage, this);\n          $AUDIO.playSound(\"punch\");\n          if (((_this$state$equippedI5 = this.state.equippedItems.mainTool) === null || _this$state$equippedI5 === void 0 ? void 0 : _this$state$equippedI5.type) === \"knife\") this.state.equippedItems.mainTool.degrade();\n        }\n      }\n    }\n  }, {\n    key: \"grab\",\n    value: function grab() {\n      if (this.state.pickup.current) return;\n      var _rotate21 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(0, this.state.pickup.reachDistance, this.trans.rotation * 180 / Math.PI),\n        _rotate22 = _slicedToArray(_rotate21, 2),\n        x = _rotate22[0],\n        y = _rotate22[1];\n      var _this$state$hitboxes$ = this.state.hitboxes.pickup,\n        width = _this$state$hitboxes$.width,\n        height = _this$state$hitboxes$.height;\n      for (var i in $CURRENT_MAP.moveables) {\n        var obj = $CURRENT_MAP.moveables[i];\n        if (Math.abs(x - obj.trans.offsetX) < obj.width / 2 + width / 2 && Math.abs(y - obj.trans.offsetY) < obj.height / 2 + height / 2) {\n          obj.moveToTop();\n          this.state.pickup.offset.x = obj.trans.offsetX;\n          this.state.pickup.offset.y = obj.trans.offsetY;\n          this.state.pickup.offset.aRotation = this.trans.rotation * 180 / Math.PI;\n          this.state.pickup.offset.bRotation = obj.trans.rotation;\n          this.state.pickup.current = obj;\n          $AUDIO.playSound(\"equip\");\n          return true;\n        }\n      }\n    }\n  }, {\n    key: \"movePickup\",\n    value: function movePickup() {\n      if (this.state.pickup.current) {\n        var _this$state$pickup$cu = this.state.pickup.current.trans,\n          offsetX = _this$state$pickup$cu.offsetX,\n          offsetY = _this$state$pickup$cu.offsetY,\n          pickup = this.state.pickup.current,\n          rotation = this.trans.rotation * 180 / Math.PI;\n        var _rotate23 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(this.state.pickup.offset.x, this.state.pickup.offset.y, rotation - this.state.pickup.offset.aRotation),\n          _rotate24 = _slicedToArray(_rotate23, 2),\n          x2 = _rotate24[0],\n          y2 = _rotate24[1];\n        pickup.translate(x2 - offsetX, y2 - offsetY, this.state.pickup.offset.bRotation + (this.state.pickup.offset.aRotation - rotation), true);\n      }\n    }\n  }, {\n    key: \"drop\",\n    value: function drop() {\n      if (this.state.pickup.current) {\n        this.state.pickup.current = undefined;\n        $AUDIO.playSound(\"equip\");\n      }\n    }\n  }, {\n    key: \"respawn\",\n    value: function respawn() {\n      requestTransition(function () {\n        $SPECTATING = false;\n        this.state.vitals.health = 100;\n        this.state.vitals.hunger = 100;\n        updateHealthBar();\n        updateHungerDisplay();\n        $CURRENT_MAP.avatars[this.id] = this;\n        $CURRENT_MAP.obstacles[this.id] = this;\n        var _$CURRENT_MAP$GRAPH$g = $CURRENT_MAP.GRAPH.getRandomPoint(),\n          x = _$CURRENT_MAP$GRAPH$g.x,\n          y = _$CURRENT_MAP$GRAPH$g.y;\n        var _$CURRENT_MAP = $CURRENT_MAP,\n          centerX = _$CURRENT_MAP.centerX,\n          centerY = _$CURRENT_MAP.centerY;\n        $CURRENT_MAP.move = true;\n        $CURRENT_MAP.translate(x - centerX, y - centerY);\n        noclip = false;\n        $MAP_DISPLAY.update();\n      }.bind(this));\n    }\n  }, {\n    key: \"clean\",\n    value: function clean() {\n      if (this.state[\"goto\"].reserve) this.map.GRAPH.reserved.splice(this.map.GRAPH.reserved.indexOf(this.state[\"goto\"].reserve), 1);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }]);\n}();\nvar Bot = /*#__PURE__*/function () {\n  function Bot() {\n    var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"Unnamed Human\";\n    var initialX = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var initialY = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var initialRotation = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    _classCallCheck(this, Bot);\n    this.character = name;\n    this.nameObj = new Text(name, 25);\n    this.nameObj.translate(initialX + 0, initialY + 10);\n    this.vao = ext.createVertexArrayOES();\n    ext.bindVertexArrayOES(this.vao);\n    this.vertices = {\n      body: [-7.0200000000000005, 21.4, 1, 0, 0, 0, 7.0200000000000005, 21.4, 1, 0.5484375, 0, 0, -7.0200000000000005, -21.4, 1, 0, 0.8359375, 0, 7.0200000000000005, 21.4, 1, 0.5484375, 0, 0, -7.0200000000000005, -21.4, 1, 0, 0.8359375, 0, 7.0200000000000005, -21.4, 1, 0.5484375, 0.8359375, 0],\n      eyes: [-3.1, 3.379999999999999, 1, 0.153125, 0.351953125, 1, 3.1000000000000005, 3.379999999999999, 1, 0.3953125, 0.351953125, 1, -3.1, 1.4800000000000004, 1, 0.153125, 0.3890625, 1, 3.1000000000000005, 3.379999999999999, 1, 0.3953125, 0.351953125, 1, -3.1, 1.4800000000000004, 1, 0.153125, 0.3890625, 1, 3.1000000000000005, 1.4800000000000004, 1, 0.3953125, 0.3890625, 1]\n    };\n    this.trans = {\n      offsetX: initialX || 0,\n      offsetY: initialY || 0,\n      rotation: initialRotation * Math.PI / 180 || 0\n    };\n    this.width = 8.56;\n    this.height = 8.56;\n    this.obstacle = true;\n    this.segments = [[-4.08, -4.08, 8.16, 8.16]];\n    this.bounds = {\n      width: this.height,\n      height: this.height\n    };\n    this.id = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)();\n    this.playerId = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)(20);\n    this.inventory = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.Inventory();\n    this.type = \"avatar\";\n    this.name = \"avatar\";\n    this.state = {\n      hostile: false,\n      baseSpeed: 1,\n      runningSpeed: 2,\n      speed: 1,\n      strength: 5,\n      armour: 0,\n      relationship: 0,\n      agreeableness: (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(50),\n      invinsible: false,\n      kills: 0,\n      passive: false,\n      aggressive: false,\n      hitboxes: {\n        leftPunch: {\n          x: -4,\n          y: 12,\n          width: 2,\n          height: 2\n        },\n        rightPunch: {\n          x: 4,\n          y: 12,\n          width: 2,\n          height: 2\n        },\n        knife: {\n          x: 5,\n          y: 14,\n          width: 4,\n          height: 4\n        }\n      },\n      vitals: {\n        health: 100\n      },\n      \"goto\": {\n        x: 0,\n        y: 0,\n        target: {\n          x: 0,\n          y: 0\n        },\n        engaged: false,\n        reserve: undefined\n      },\n      path: {\n        current: [],\n        index: 0,\n        engaged: false,\n        start: undefined,\n        end: undefined,\n        request: true\n      },\n      seat: {\n        ref: undefined,\n        id: undefined\n      },\n      targetId: undefined,\n      target: {\n        current: undefined,\n        id: [],\n        engaged: false,\n        shot: true\n      },\n      wander: {\n        active: false,\n        waiting: false,\n        rate: 0,\n        anchor: {\n          x: 0,\n          y: 0\n        },\n        radius: 50\n      },\n      follow: {\n        target: undefined,\n        rush: false,\n        run: false,\n        engageDistance: 100,\n        slowdownDistance: 50,\n        settleDistance: 30,\n        disengageDistance: 200\n      },\n      attack: {\n        openCarry: true,\n        meleeAttackSpeed: 0.5,\n        engageDistance: 100,\n        slowdownDistance: 50,\n        settleDistance: 30,\n        disengageDistance: 200,\n        attackSpeed: 1,\n        multiple: false,\n        forget: false,\n        invertTargets: false,\n        reactionTime: {\n          targetUpdateRate: 1,\n          shotCheckRate: 1\n        }\n      },\n      baseRotation: 0,\n      walking: false,\n      punching: false,\n      stabbing: false,\n      running: false,\n      sitting: false,\n      armed: false,\n      melee: false,\n      draw: false,\n      fire: false,\n      equippedItems: {\n        mainTool: undefined\n      },\n      rotationSpeed: 0.1,\n      rotationTarget: undefined,\n      wanderRateTimeout: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLinearAnimation([function () {\n        this.state.wander.waiting = false;\n        this.state.speed = this.state.baseSpeed;\n        var offsetX = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(this.state.wander.radius, true),\n          offsetY = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(this.state.wander.radius, true);\n        this.requestPath(this.state.wander.anchor.x + offsetX - this.map.centerX, this.state.wander.anchor.y + offsetY - this.map.centerY);\n      }], this, [0]),\n      rotationAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n        var rotation = this.trans.rotation * 180 / Math.PI;\n        if (Math.abs(rotation - this.state.rotationTarget) <= 0.1) {\n          this.rotate(this.state.rotationTarget);\n          this.state.rotationTarget = undefined;\n          return;\n        }\n        if (rotation !== this.state.rotationTarget) {\n          var difference = Math.max(this.state.rotationTarget, rotation) - Math.min(this.state.rotationTarget, rotation),\n            rotationFactor = Math.min(difference, 360 - difference) * this.state.rotationSpeed;\n          this.rotate((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.normalizeRotation)(rotation + (difference < 180 && this.state.rotationTarget > rotation || difference > 180 && rotation > this.state.rotationTarget ? rotationFactor : -rotationFactor)));\n        }\n      }, this, 0.01),\n      punchingAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n        var leftPunch = this.state.leftPunchAnimation,\n          rightPunch = this.state.rightPunchAnimation;\n        if (leftPunch.active) {\n          leftPunch.run();\n        } else if (rightPunch.active) {\n          rightPunch.run();\n        }\n        if (!leftPunch.active && !rightPunch.active) (Math.random() < 0.5 ? leftPunch : rightPunch).active = true;\n      }, this, 0.01),\n      shotCheckAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n        this.state.target.shot = true;\n        outer: for (var o in this.map.obstacles) {\n          var obstacle = this.map.obstacles[o];\n          if (obstacle.id === this.id || obstacle.id === this.state.target.current.id) continue;\n          var _iterator15 = _createForOfIteratorHelper(obstacle.segments),\n            _step15;\n          try {\n            for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n              var segment = _step15.value;\n              var _segment2 = _slicedToArray(segment, 4),\n                ox = _segment2[0],\n                oy = _segment2[1],\n                ow = _segment2[2],\n                oh = _segment2[3];\n              ox = ox + obstacle.trans.offsetX;\n              oy = oy + obstacle.trans.offsetY;\n              var p1 = this.trans.offsetX;\n              var p2 = this.trans.offsetY;\n              var p3 = this.state.target.current.trans.offsetX;\n              var p4 = this.state.target.current.trans.offsetY;\n              var result = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.lineIntersectsBox)(p1, p2, p3, p4, ox, oy, ow, oh);\n              if (result) {\n                this.state.target.shot = !result;\n                break outer;\n              }\n            }\n          } catch (err) {\n            _iterator15.e(err);\n          } finally {\n            _iterator15.f();\n          }\n        }\n      }, this, 1),\n      reloadTimeout: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLinearAnimation([function () {\n        this.state.equippedItems.mainTool.reloadProgress = 0;\n        this.state.equippedItems.mainTool.loaded = true;\n      }], this, [0]),\n      sittingTimeout: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLinearAnimation([function () {\n        this.stopSitting();\n      }], this, [0]),\n      pathRequestRateLimit: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLinearAnimation([function () {\n        this.state.path.request = true;\n      }], this, [1]),\n      targetUpdateAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n        var map = this.map;\n        if (this.state.attack.multiple) {\n          var targetDistance = this.state.attack.engageDistance,\n            target,\n            remember = [];\n          for (var i in map.avatars) {\n            if (map.avatars[i].id === this.id) continue;\n            var _map$avatars$i$trans = map.avatars[i].trans,\n              targetX = _map$avatars$i$trans.offsetX,\n              targetY = _map$avatars$i$trans.offsetY;\n            var dist = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX, this.trans.offsetY, targetX, targetY);\n            if (this.state.target.id.includes(map.avatars[i].state.targetId) && !this.state.attack.invertTargets || !this.state.target.id.includes(this.map.avatars[i].state.targetId) && this.state.attack.invertTargets) {\n              if (dist < targetDistance && map.avatars[i] !== this) {\n                targetDistance = dist;\n                target = map.avatars[i];\n              }\n              if (dist < this.state.attack.disengageDistance && this.state.attack.forget && !remember.includes(map.avatars[i].state.targetId)) {\n                remember.push(map.avatars[i].state.targetId);\n              }\n            }\n          }\n          if (this.state.attack.forget) {\n            this.state.target.id = remember;\n          }\n          if (target && this.state.target.current !== target) {\n            this.state.target.current = target;\n            this.state.target.engaged = true;\n            this.state.hostile = true;\n          } else if (!target && !this.state.target.current) {\n            this.state.target.engaged = false;\n            this.state.hostile = false;\n          }\n        } else if (map.avatars[this.state.target.id[0]]) {\n          var _map$avatars$this$sta = map.avatars[this.state.target.id[0]].trans,\n            _targetX = _map$avatars$this$sta.offsetX,\n            _targetY = _map$avatars$this$sta.offsetY;\n          var _dist = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX, this.trans.offsetY, _targetX, _targetY);\n          if (!this.state.target.engaged && _dist < this.state.attack.engageDistance && !this.state.attack.forget) this.killTarget([this.state.target.id[0]]);\n        }\n      }, this, 1),\n      gotoAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n        var tx = 0,\n          ty = 0;\n        this.state[\"goto\"].x = this.state[\"goto\"].target.x - this.map.centerX;\n        this.state[\"goto\"].y = this.state[\"goto\"].target.y - this.map.centerY;\n        if (this.state[\"goto\"].x !== this.trans.offsetX) {\n          tx = Math.abs(this.state[\"goto\"].x - this.trans.offsetX) < this.state.speed ? this.state[\"goto\"].x - this.trans.offsetX : this.trans.offsetX < this.state[\"goto\"].x ? this.state.speed : -this.state.speed;\n        }\n        if (this.state[\"goto\"].y !== this.trans.offsetY) {\n          ty = Math.abs(this.state[\"goto\"].y - this.trans.offsetY) < this.state.speed ? this.state[\"goto\"].y - this.trans.offsetY : this.trans.offsetY < this.state[\"goto\"].y ? this.state.speed : -this.state.speed;\n        }\n        this.translate(tx, ty);\n        if (this.state[\"goto\"].x === this.trans.offsetX && this.state[\"goto\"].y === this.trans.offsetY) {\n          this.disengageGoto();\n        }\n      }, this, 0.03),\n      fireAnimation: undefined,\n      recoilAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLinearAnimation([function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[1];\n      }, function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }], this, [0.05, 0.05], function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }, 0.5, true),\n      walkingAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLoopAnimation([function () {\n        this.state.position.body.texture = this.state.draw && this.state.melee ? this.state.equippedItems.mainTool.constructor._properties.useTextures[4] : 2;\n      }, function () {\n        this.state.position.body.texture = this.state.draw && this.state.melee ? this.state.equippedItems.mainTool.constructor._properties.useTextures[0] : 0;\n      }, function () {\n        this.state.position.body.texture = this.state.draw && this.state.melee ? this.state.equippedItems.mainTool.constructor._properties.useTextures[3] : 3;\n      }, function () {\n        this.state.position.body.texture = this.state.draw && this.state.melee ? this.state.equippedItems.mainTool.constructor._properties.useTextures[0] : 0;\n      }], this, [0.08, 0.08, 0.08, 0.08], function () {\n        this.state.position.body.texture = 0;\n      }, 0.5),\n      leftPunchAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLoopAnimation([function () {\n        this.state.position.body.texture = 0;\n      }, function () {\n        this.state.position.body.texture = 10;\n      }, function () {\n        this.state.position.body.texture = 11;\n        this.meleeAttack(this.state.strength, this.state.hitboxes.leftPunch);\n        if ((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX, this.trans.offsetY, $AVATAR.trans.offsetX, $AVATAR.trans.offsetY) < 200) $AUDIO.playSound(Math.random() < 0.5 ? \"swing-1\" : \"swing-2\");\n      }, function () {\n        this.state.position.body.texture = 0;\n      }], this, [0.08, 0.08, 0.08, 0.15], function () {\n        this.state.position.body.texture = 0;\n      }),\n      rightPunchAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLoopAnimation([function () {\n        this.state.position.body.texture = 0;\n      }, function () {\n        this.state.position.body.texture = 12;\n      }, function () {\n        this.state.position.body.texture = 13;\n        this.meleeAttack(this.state.strength, this.state.hitboxes.rightPunch);\n        if ((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX, this.trans.offsetY, $AVATAR.trans.offsetX, $AVATAR.trans.offsetY) < 200) $AUDIO.playSound(Math.random() < 0.5 ? \"swing-1\" : \"swing-2\");\n      }, function () {\n        this.state.position.body.texture = 0;\n      }], this, [0.08, 0.08, 0.08, 0.15], function () {\n        this.state.position.body.texture = 0;\n      }),\n      meleeAttackAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLoopAnimation([function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }, function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[2];\n        this.meleeAttack(this.state.equippedItems.mainTool.constructor._properties.damage + this.state.strength, this.state.hitboxes.knife);\n        if ((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX, this.trans.offsetY, $AVATAR.trans.offsetX, $AVATAR.trans.offsetY) < 200) $AUDIO.playSound(Math.random() < 0.5 ? \"knife-1\" : \"knife-2\");\n      }, function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[1];\n      }, function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }], this, [0.08, 0.08, 0.08, 0.15], function () {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }),\n      blinkingAnimation: new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.MultiFrameLoopAnimation([function () {\n        this.state.position.eyes.texture = 0;\n      }, function () {\n        this.state.position.eyes.texture = 1;\n      }, function () {\n        this.state.position.eyes.texture = 0;\n      }], this, [5 * Math.random(), 1, 1]),\n      position: {\n        body: {\n          texture: 0\n        },\n        eyes: {\n          texture: 0\n        }\n      }\n    };\n    ext.bindVertexArrayOES(this.vao);\n    this.buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 24, 0);\n    gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 24, 12);\n    gl.vertexAttribPointer(locations.textrUnit, 1, gl.FLOAT, false, 24, 20);\n    gl.enableVertexAttribArray(locations.coords);\n    gl.enableVertexAttribArray(locations.tcoords);\n    gl.enableVertexAttribArray(locations.textrUnit);\n    gl.disableVertexAttribArray(locations.offset);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([].concat(_toConsumableArray(this.vertices.body), _toConsumableArray(this.vertices.eyes))), gl.STATIC_DRAW);\n    gl.useProgram(program);\n  }\n  return _createClass(Bot, [{\n    key: \"translate\",\n    value: function translate(x, y) {\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n      this.nameObj.translate(x, y);\n      gl.uniform2fv(locations.translation, [this.trans.offsetX, this.trans.offsetY]);\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(a) {\n      a = a * Math.PI / 180;\n      this.trans.rotation = a;\n      gl.uniform1f(locations.rotation, this.trans.rotation);\n    }\n  }, {\n    key: \"postLink\",\n    value: function postLink() {\n      this.state.wanderRateTimeout.timingConfig[0] = this.state.wander.rate;\n      this.state.targetUpdateAnimation.rate = this.state.attack.reactionTime.targetUpdateRate;\n      this.state.shotCheckAnimation.rate = this.state.attack.reactionTime.shotCheckRate;\n      this.state.leftPunchAnimation.animationMultFactor = this.state.attack.meleeAttackSpeed;\n      this.state.rightPunchAnimation.animationMultFactor = this.state.attack.meleeAttackSpeed;\n      this.state.meleeAttackAnimation.animationMultFactor = this.state.attack.meleeAttackSpeed * 2;\n      this.state.fireAnimation = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n        this.state.recoilAnimation.start();\n        var map = this.map;\n        var bulletCombo = this.state.equippedItems.mainTool.shotgun ? this.state.equippedItems.mainTool.constructor._properties.bulletCombo : 1;\n        for (var i = 0; i < bulletCombo; i++) {\n          var _rotate25 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(0, 1, this.trans.rotation * 180 / Math.PI),\n            _rotate26 = _slicedToArray(_rotate25, 2),\n            initialTrajectoryX = _rotate26[0],\n            initialTrajectoryY = _rotate26[1];\n          var randomBulletRotation = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(this.state.equippedItems.mainTool.constructor._properties.accuracy || 0);\n          randomBulletRotation = Math.random() < 0.5 ? -randomBulletRotation : randomBulletRotation;\n          var _rotate27 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(initialTrajectoryX, initialTrajectoryY, randomBulletRotation),\n            _rotate28 = _slicedToArray(_rotate27, 2),\n            finalTrajectoryX = _rotate28[0],\n            finalTrajectoryY = _rotate28[1];\n          var _rotate29 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(0, this.state.equippedItems.mainTool.constructor._properties.nozzelLength, this.trans.rotation * 180 / Math.PI),\n            _rotate30 = _slicedToArray(_rotate29, 2),\n            initialPointX = _rotate30[0],\n            initialPointY = _rotate30[1];\n          var bullet = new Bullet(initialPointX + this.trans.offsetX, initialPointY + this.trans.offsetY, this.trans.rotation * 180 / Math.PI + 90, finalTrajectoryX * this.state.equippedItems.mainTool.constructor._properties.bulletSpeed, finalTrajectoryY * this.state.equippedItems.mainTool.constructor._properties.bulletSpeed, this.state.equippedItems.mainTool.constructor._properties.damage, this);\n          if (this.state.equippedItems.mainTool.constructor._properties.explosive) bullet.explosive = true;\n          map.link(bullet);\n        }\n        var _rotate31 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(20, 0, this.trans.rotation * 180 / Math.PI),\n          _rotate32 = _slicedToArray(_rotate31, 2),\n          shellDirectionX = _rotate32[0],\n          shellDirectionY = _rotate32[1],\n          randomShellRotation = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(10);\n        var _rotate33 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(shellDirectionX, shellDirectionY, Math.random() < 0.5 ? -randomShellRotation : randomShellRotation),\n          _rotate34 = _slicedToArray(_rotate33, 2),\n          randomShellDirectionX = _rotate34[0],\n          randomShellDirectionY = _rotate34[1];\n        var _rotate35 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(0, 8, this.trans.rotation * 180 / Math.PI),\n          _rotate36 = _slicedToArray(_rotate35, 2),\n          shellInitialX = _rotate36[0],\n          shellInitialY = _rotate36[1];\n        map.link(new BulletShell(this.trans.offsetX + shellInitialX, this.trans.offsetY + shellInitialY, randomShellDirectionX, randomShellDirectionY));\n        this.inventory.weapons[this.state.equippedItems.mainTool.name].ammo--;\n        this.state.equippedItems.mainTool.reloadProgress++;\n        if (this.state.equippedItems.mainTool.reloadProgress === this.state.equippedItems.mainTool.constructor._properties.capacity) this.state.equippedItems.mainTool.loaded = false;\n        if ((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX, this.trans.offsetY, $AVATAR.trans.offsetX, $AVATAR.trans.offsetY) < 200) {\n          var _this$state$equippedI6;\n          if (this.state.equippedItems.mainTool) $AUDIO.playSound((_this$state$equippedI6 = this.state.equippedItems.mainTool) === null || _this$state$equippedI6 === void 0 ? void 0 : _this$state$equippedI6.constructor._properties.shotSoundEffect);\n          $AUDIO.playSound(\"bulletshell\");\n        }\n      }, this, 0);\n    }\n  }, {\n    key: \"hit\",\n    value: function hit(damage, owner, bullet) {\n      if (!this.state.invinsible) {\n        this.state.armour > 0 ? this.state.armour -= damage : this.state.vitals.health -= damage;\n        if (this.state.vitals.health <= 0) {\n          var attacker = this.map.avatars[owner.id];\n          if (attacker) attacker.state.kills += 1;\n          if (attacker === $AVATAR) {\n            $SCORE += this.state.killValue;\n          }\n          this.purgeItems(5);\n          if (this === $ACTIVE_DIALOGUE_PARTY) endDialogue();\n          this[\"delete\"]();\n          return;\n        }\n      }\n\n      // run or attack\n\n      if ((this.state.passive || this.state.armed && this.inventory.weapons[this.state.equippedItems.mainTool.name].ammo <= 0) && !this.state.running && !this.state.follow.target && this !== $ACTIVE_DIALOGUE_PARTY) {\n        this.stopSitting();\n        this.run();\n      } else if (!this.state.target.id.includes(owner.state.targetId) && this.map.avatars[owner.id] && this.state.aggressive) {\n        this.stopSitting();\n        this.state.target.id.push(owner.state.targetId);\n        this.state.target.engaged = true;\n        this.state.attack.multiple = true;\n      }\n    }\n  }, {\n    key: \"drawWeapon\",\n    value: function drawWeapon() {\n      if (this.state.equippedItems.mainTool && !this.state.stabbing && (this.state.armed || this.state.melee)) {\n        this.state.draw = true;\n        if (!(this.state.walking && this.state.melee)) this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }\n    }\n  }, {\n    key: \"holsterWeapon\",\n    value: function holsterWeapon() {\n      if (this.state.armed || this.state.melee) {\n        this.state.draw = false;\n        this.state.position.body.texture = 0;\n      }\n    }\n  }, {\n    key: \"reload\",\n    value: function reload() {\n      var _this$state$equippedI7;\n      this.state.reloadTimeout.start();\n      if (this.state.equippedItems.mainTool && (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX, this.trans.offsetY, $AVATAR.trans.offsetX, $AVATAR.trans.offsetY) < 200) $AUDIO.playSound(((_this$state$equippedI7 = this.state.equippedItems.mainTool) === null || _this$state$equippedI7 === void 0 ? void 0 : _this$state$equippedI7.constructor._properties.reloadSoundEffect) || \"pistol-reload\");\n    }\n  }, {\n    key: \"wander\",\n    value: function wander(anchorX, anchorY) {\n      this.state.wander.anchor = {\n        x: this.state.wander.anchor.x || anchorX,\n        y: this.state.wander.anchor.y || anchorY\n      };\n      var _this$state$wander$an = this.state.wander.anchor,\n        x = _this$state$wander$an.x,\n        y = _this$state$wander$an.y;\n      if (x && y) this.state.wander.active = true;\n    }\n  }, {\n    key: \"stopWander\",\n    value: function stopWander() {\n      this.state.wander.active = false;\n      this.disengagePath();\n    }\n  }, {\n    key: \"follow\",\n    value: function follow(id) {\n      this.state.speed = this.state.follow.run ? this.state.runningSpeed : this.state.baseSpeed;\n      this.state.follow.target = this.map.avatars[id];\n    }\n  }, {\n    key: \"disengageFollow\",\n    value: function disengageFollow() {\n      this.state.follow.target = undefined;\n    }\n  }, {\n    key: \"sit\",\n    value: function sit(s) {\n      if (!this.state.seat.ref && !this.state.target.engaged && !this.state.running) {\n        var allSeats = Object.values(this.map.seats);\n        var seat = s || allSeats[(0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(allSeats.length)];\n        if (!seat) return false;\n        this.state.seat.ref = seat;\n      }\n    }\n  }, {\n    key: \"stopSitting\",\n    value: function stopSitting() {\n      if (this.state.seat.ref) {\n        if (this.state.sitting) {\n          var seat = this.state.seat.ref.seats[this.state.seat.id];\n          seat.occupied = false;\n          this.state.sitting = false;\n          var _this$map$GRAPH$getPo = this.map.GRAPH.getPoint(this.state.seat.ref.trans.offsetX + $MAP.centerX + seat.exit.x, this.state.seat.ref.trans.offsetY + $MAP.centerY + seat.exit.y),\n            x = _this$map$GRAPH$getPo.x,\n            y = _this$map$GRAPH$getPo.y;\n          this.translate(x - (this.trans.offsetX + $MAP.centerX) + 5, y - (this.trans.offsetY + $MAP.centerY) - 5);\n        }\n        this.state.sittingTimeout.end();\n        this.state.seat.ref = undefined;\n        this.state.seat.id = undefined;\n      }\n    }\n  }, {\n    key: \"addItem\",\n    value: function addItem(item, slot) {\n      return this.inventory.addItem(item, slot);\n    }\n  }, {\n    key: \"dropItem\",\n    value: function dropItem(slot) {\n      if (!this.inventory.items[slot]) return false;\n      this.unequipItem(slot);\n      var item = this.inventory.ejectItem(slot);\n      item.dropped = true;\n      item.ring.trans.offsetX = item.trans.offsetX = this.trans.offsetX + (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(10, true);\n      item.ring.trans.offsetY = item.trans.offsetY = this.trans.offsetY + (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(10, true);\n      item.trans.rotation = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360);\n      this.map.link(item);\n      return true;\n    }\n  }, {\n    key: \"purgeItems\",\n    value: function purgeItems(limit) {\n      for (var i = 0; i < limit; i++) {\n        if (this.inventory.items[i]) this.dropItem(i);\n      }\n    }\n  }, {\n    key: \"equipItem\",\n    value: function equipItem(slot) {\n      var item = this.inventory.items[slot];\n      if (item) {\n        switch (item.type) {\n          case \"gun\":\n            {\n              this.state.armed = true;\n              this.state.melee = false;\n              this.state.equippedItems.mainTool = item;\n              this.state.equippedItems.mainTool.reloadProgress = item.reloadProgress;\n              this.state.equippedItems.mainTool.loaded = item.loaded;\n              this.state.reloadTimeout.timingConfig[0] = this.state.equippedItems.mainTool.constructor._properties.reloadTime;\n              this.state.fireAnimation.rate = 0.5 / this.state.equippedItems.mainTool.constructor._properties.fireRate;\n            }\n            break;\n          case \"knife\":\n            {\n              this.state.armed = false;\n              this.state.melee = true;\n              this.state.equippedItems.mainTool = item;\n            }\n            break;\n        }\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"unequipItem\",\n    value: function unequipItem(slot) {\n      if (!this.inventory.items[slot]) return false;\n      var item = this.inventory.items[slot];\n      switch (item.type) {\n        case \"gun\":\n          {\n            if (this.state.equippedItems.mainTool && item.slot === this.state.equippedItems.mainTool.slot) {\n              this.state.armed = false;\n              this.state.draw = false;\n              this.state.equippedItems.mainTool = undefined;\n            }\n          }\n          ;\n          break;\n        case \"knife\":\n          {\n            this.state.melee = false;\n            this.state.draw = false;\n            this.state.stabbing = false;\n            this.state.equippedItems.mainTool = undefined;\n          }\n          ;\n          break;\n      }\n      return true;\n    }\n  }, {\n    key: \"preRender\",\n    value: function preRender() {\n      var _this$state$equippedI8, _this$state$equippedI9;\n      // run animations\n\n      this.state.blinkingAnimation.run();\n      if (typeof this.state.rotationTarget === \"number\") this.state.rotationAnimation.run();\n      if (this.state.walking && !(this.state.armed && this.state.draw) && !this.state.punching && !this.state.stabbing) {\n        this.state.walkingAnimation.run();\n      } else if (!this.state.punching && !(this.state.stabbing || this.state.meleeAttackAnimation.active)) {\n        this.state.walkingAnimation.end();\n      }\n      if (this.state.punching && !this.state.armed && !this.state.melee) {\n        this.state.punchingAnimation.run();\n      }\n      if ((this.state.armed || this.state.melee && !this.state.walking) && this.state.draw && !(this.state.stabbing || this.state.meleeAttackAnimation.active)) {\n        this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[0];\n      }\n      if ((this.state.stabbing || this.state.meleeAttackAnimation.active) && !this.state.armed && this.state.melee) {\n        this.state.meleeAttackAnimation.run();\n      }\n      if (this.state.fire && this.state.armed && this.state.target.shot && (_this$state$equippedI8 = this.state.equippedItems.mainTool) !== null && _this$state$equippedI8 !== void 0 && _this$state$equippedI8.loaded && this.inventory.weapons[this.state.equippedItems.mainTool.name].ammo) {\n        this.state.fireAnimation.run();\n      }\n      if (this.state.armed) this.state.recoilAnimation.run();\n      if (!((_this$state$equippedI9 = this.state.equippedItems.mainTool) !== null && _this$state$equippedI9 !== void 0 && _this$state$equippedI9.loaded)) this.state.reloadTimeout.run();\n      if (this.state[\"goto\"].engaged) this.state.gotoAnimation.run();\n      if (!this.state.path.request) this.state.pathRequestRateLimit.run();\n      if (this.state.sitting) this.state.sittingTimeout.run();\n\n      // walk to destination\n      walk: if (this.state.path.engaged && !this.state[\"goto\"].engaged) {\n        if (this.state.path.index === this.state.path.current.length) {\n          if (this.state.seat.ref && this.state.seat.id !== undefined) {\n            var seat = this.state.seat.ref.seats[this.state.seat.id];\n            if (seat.occupied) {\n              this.stopSitting();\n              break walk;\n            }\n            this.translate(this.state.seat.ref.trans.offsetX + seat.x - this.trans.offsetX, this.state.seat.ref.trans.offsetY + seat.y - this.trans.offsetY);\n            this.state.rotationTarget = undefined;\n            this.trans.rotation = seat.r * Math.PI / 180;\n            this.state.seat.ref.seats[seat.id].occupied = true;\n            this.state.sitting = true;\n            this.state.sittingTimeout.timingConfig[0] = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(10);\n            this.state.sittingTimeout.start();\n          }\n          this.disengagePath();\n          break walk;\n        }\n        var _this$state$path$curr = this.state.path.current[this.state.path.index],\n          x = _this$state$path$curr.x,\n          y = _this$state$path$curr.y;\n        var next = this.map.GRAPH.find(x, y).id;\n        if (!this.map.GRAPH.blocked.includes(next) && !this.map.GRAPH.reserved.includes(next)) {\n          this.state[\"goto\"].reserve = next;\n          this.map.GRAPH.reserved.push(next);\n          this[\"goto\"](x + 5, y - 5);\n          var rotation = Math.round(Math.atan2(this.state[\"goto\"].y - this.trans.offsetY, this.state[\"goto\"].x - this.trans.offsetX) * 180 / Math.PI / 45) * 45;\n          this.state.rotationTarget = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.normalizeRotation)(rotation - 90);\n        } else {\n          this.disengagePath();\n          if (this.state.path.request) this.requestPath(this.state.path.end.x - this.map.centerX, this.state.path.end.y - this.map.centerY);\n          break walk;\n        }\n        this.state.path.index++;\n      }\n\n      // attack target(s)\n\n      if (this.state.target.id.length > 0) this.state.targetUpdateAnimation.run();\n      attack: if (this.state.target.current && this.state.target.engaged) {\n        if (this.state.target.current && !this.map.avatars[this.state.target.current.id]) {\n          this.disengageTarget();\n          if (this.state.melee) this.state.position.body.texture = this.state.equippedItems.mainTool.constructor._properties.useTextures[2];\n          break attack;\n        }\n        var _this$state$target$cu = this.state.target.current.trans,\n          targetX = _this$state$target$cu.offsetX,\n          targetY = _this$state$target$cu.offsetY,\n          dist = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX, this.trans.offsetY, targetX, targetY),\n          m = this.map;\n        punch: if (!this.state.armed && !this.state.melee) {\n          if (dist > this.state.attack.disengageDistance && this.state.target.engaged) {\n            this.disengageTarget();\n          } else if (dist <= this.state.attack.engageDistance && !this.state.path.engaged && !this.state.follow.target && this.state.path.request) {\n            this.requestPath(targetX, targetY);\n          }\n          this.state.speed = this.state.baseSpeed * this.state.attack.attackSpeed;\n          if (dist <= 30) {\n            this.state.punching = true;\n            this.state.rotationTarget = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.normalizeRotation)(Math.atan2(targetY - m.centerY - (this.trans.offsetY - m.centerY), targetX - m.centerX - (this.trans.offsetX - m.centerX)) * 180 / Math.PI - 90);\n          } else {\n            this.state.punching = false;\n          }\n          break attack;\n        }\n        stab: if (!this.state.armed && this.state.melee) {\n          if (dist > this.state.attack.disengageDistance && this.state.target.engaged) {\n            this.disengageTarget();\n          } else if (dist <= this.state.attack.engageDistance) {\n            this.state.speed = this.state.baseSpeed * this.state.attack.attackSpeed;\n            if (this.state.attack.openCarry && !this.state.draw) this.drawWeapon();\n            if (!this.state.path.engaged && !this.state.follow.target && this.state.path.request) this.requestPath(targetX, targetY);\n          }\n          if (dist <= 30) {\n            this.state.stabbing = true;\n            if (!this.state.draw) this.drawWeapon();\n            this.state.rotationTarget = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.normalizeRotation)(Math.atan2(targetY - m.centerY - (this.trans.offsetY - m.centerY), targetX - m.centerX - (this.trans.offsetX - m.centerX)) * 180 / Math.PI - 70);\n          } else {\n            this.state.stabbing = false;\n            if (!this.state.attack.openCarry && this.state.draw) this.holsterWeapon();\n          }\n          break attack;\n        }\n        shoot: if (this.state.armed && this.inventory.weapons[this.state.equippedItems.mainTool.name].ammo > 0) {\n          var _this$state$equippedI10;\n          if (!((_this$state$equippedI10 = this.state.equippedItems.mainTool) !== null && _this$state$equippedI10 !== void 0 && _this$state$equippedI10.loaded) && !this.state.reloadTimeout.running) this.reload();\n          this.state.shotCheckAnimation.run();\n          if (dist > this.state.attack.disengageDistance && this.state.target.engaged) {\n            this.disengageTarget();\n          } else if (dist > this.state.attack.engageDistance) {\n            this.state.speed = this.state.baseSpeed * this.state.attack.attackSpeed;\n            this.state.fire = false;\n            if (!this.state.attack.openCarry && this.state.draw) this.holsterWeapon();\n            if (!this.state.path.engaged && !this.state.follow.target && this.state.path.request) this.requestPath(targetX, targetY);\n          } else if (dist < this.state.attack.settleDistance) {\n            if (this.state.target.shot && this.state.path.engaged && !this.state.follow.target && dist >= 30) {\n              this.disengagePath();\n            }\n            this.state.rotationTarget = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.normalizeRotation)(Math.atan2(targetY - m.centerY - (this.trans.offsetY - m.centerY), targetX - m.centerX - (this.trans.offsetX - m.centerX)) * 180 / Math.PI - 90);\n            if (!this.state.draw) this.drawWeapon();\n            if (this.state.target.shot) this.state.fire = true;\n          } else if (dist < this.state.attack.slowdownDistance) {\n            this.state.rotationTarget = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.normalizeRotation)(Math.atan2(targetY - m.centerY - (this.trans.offsetY - m.centerY), targetX - m.centerX - (this.trans.offsetX - m.centerX)) * 180 / Math.PI - 90);\n            if (!this.state.draw) this.drawWeapon();\n            if (this.state.target.shot) this.state.fire = true;\n            if (!this.state.follow.rush || !this.state.follow.target) this.state.speed = this.state.baseSpeed * (this.state.attack.attackSpeed / 3);\n          } else if (dist < this.state.attack.engageDistance) {\n            this.state.speed = this.state.baseSpeed * this.state.attack.attackSpeed;\n            this.state.rotationTarget = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.normalizeRotation)(Math.atan2(targetY - m.centerY - (this.trans.offsetY - m.centerY), targetX - m.centerX - (this.trans.offsetX - m.centerX)) * 180 / Math.PI - 90);\n            if (!this.state.draw) this.drawWeapon();\n            if (this.state.target.shot) this.state.fire = true;\n            if (!this.state.path.engaged && !this.state.follow.target && this.state.path.request) {\n              this.requestPath(targetX, targetY);\n            }\n          }\n          if (!this.state.target.shot && this.state.path.request && !this.state.path.engaged && !this.state.follow.target) this.requestPath(targetX, targetY);\n          if (dist < 30 && !this.state.follow.target) {\n            this.state.speed = this.state.baseSpeed * this.state.attack.attackSpeed;\n            if (this.state.path.request && !this.state.path.engaged) {\n              var _rotate37 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(targetX, targetY + 30, (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(360)),\n                _rotate38 = _slicedToArray(_rotate37, 2),\n                _x = _rotate38[0],\n                _y = _rotate38[1];\n              this.requestPath(_x, _y);\n            }\n          }\n          break attack;\n        }\n        this.disengageTarget();\n      }\n\n      // follow target\n\n      follow: if (this.state.follow.target && !this.state.seat.ref) {\n        var _this$state$follow$ta = this.state.follow.target.trans,\n          _targetX2 = _this$state$follow$ta.offsetX,\n          _targetY2 = _this$state$follow$ta.offsetY,\n          _dist2 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX, this.trans.offsetY, _targetX2, _targetY2),\n          speed = this.state.follow.run ? this.state.runningSpeed * this.state.baseSpeed : this.state.baseSpeed;\n        if (_dist2 > this.state.follow.settleDistance) {\n          this.state.speed = speed;\n          if (!this.state.path.engaged) {\n            if (this.state.path.request && !$AVATAR.state.seat.ref) this.requestPath(_targetX2, _targetY2);\n          }\n        }\n        if (_dist2 < this.state.follow.slowdownDistance && _dist2 > this.state.settleDistance) {\n          this.state.speed = speed / 3;\n        } else if (_dist2 < this.state.follow.settleDistance) {\n          if (this.state.path.engaged) this.disengagePath();\n        }\n      }\n      wander: if (this.state.wander.active && !this.state.running && !this.state.seat.ref) {\n        if (!this.state.target.engaged) this.state.wanderRateTimeout.run();\n        if (!this.state.path.engaged && this.state.path.request && !this.state.wander.waiting) {\n          this.state.wander.waiting = true;\n          this.state.wanderRateTimeout.start();\n        }\n      }\n      sit: if (this.state.seat.ref && !this.state.sitting && !this.state.path.engaged && this.state.path.request) {\n        var _seat, spot;\n        if (this.state.seat.id === undefined) {\n          _seat = this.state.seat.ref;\n          spot = _seat.getSeat(this);\n          if (!spot) {\n            this.stopSitting();\n            break sit;\n          }\n          this.state.seat.id = spot.id;\n        }\n        _seat = this.state.seat.ref;\n        spot = this.state.seat.ref.seats[this.state.seat.id];\n        this.requestPath(_seat.trans.offsetX + spot.exit.x, _seat.trans.offsetY + spot.exit.y);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      gl.uniform2fv(locations.translation, [this.trans.offsetX, this.trans.offsetY]);\n      gl.uniform1f(locations.rotation, this.trans.rotation);\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, textures.skins.index[this.state.position.body.texture]);\n      gl.activeTexture(gl.TEXTURE1);\n      gl.bindTexture(gl.TEXTURE_2D, textures.skins.index[this.state.position.eyes.texture]);\n      gl.useProgram(program);\n      gl.drawArrays(gl.TRIANGLES, 0, 12);\n      this.nameObj.render();\n    }\n  }, {\n    key: \"goto\",\n    value: function goto(x, y) {\n      this.state[\"goto\"].x = x - this.map.centerX;\n      this.state[\"goto\"].y = y - this.map.centerY;\n      this.state[\"goto\"].target = {\n        x: x,\n        y: y\n      };\n      this.state[\"goto\"].engaged = true;\n      this.state.walking = true;\n    }\n  }, {\n    key: \"disengageGoto\",\n    value: function disengageGoto() {\n      this.state[\"goto\"].engaged = false;\n      this.state.walking = false;\n      if (this.state[\"goto\"].reserve) this.map.GRAPH.reserved.splice(this.map.GRAPH.reserved.indexOf(this.state[\"goto\"].reserve), 1);\n    }\n  }, {\n    key: \"killTarget\",\n    value: function killTarget(ids, multiple, invert) {\n      var map = this.map;\n      var target = map.avatars[ids[0]];\n      this.state.attack.multiple = multiple;\n      this.state.attack.invertTargets = invert;\n      if (ids.includes($AVATAR.state.targetId) && !invert) this.state.hostile = true;\n      if (target && !this.state.attack.multiple) {\n        this.state.target.current = target;\n        this.state.target.id = ids;\n        this.state.target.engaged = true;\n        this.stopSitting();\n        return true;\n      } else if (this.state.attack.multiple) {\n        this.state.target.id = ids;\n        this.state.target.engaged = true;\n        this.stopSitting();\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"disengageTarget\",\n    value: function disengageTarget() {\n      this.state.target.engaged = false;\n      this.state.target.current = undefined;\n      this.state.fire = false;\n      this.state.stabbing = false;\n      this.state.punching = false;\n      this.state.hostile = false;\n      if (this.state.attack.openCarry) {\n        this.drawWeapon();\n        return;\n      }\n      this.holsterWeapon();\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      var point = {\n        x: (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(this.map.width / 2, true),\n        y: (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(this.map.height / 2, true)\n      };\n      if (point) {\n        this.state.speed = this.state.runningSpeed * this.state.baseSpeed;\n        if (this.state.path.request && this.requestPath(point.x - this.map.centerX, point.y - this.map.centerY)) this.state.running = true;\n      }\n    }\n  }, {\n    key: \"meleeAttack\",\n    value: function meleeAttack(damage, hitbox) {\n      var _rotate39 = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.rotate)(hitbox.x, hitbox.y, this.trans.rotation * 180 / Math.PI),\n        _rotate40 = _slicedToArray(_rotate39, 2),\n        x = _rotate40[0],\n        y = _rotate40[1],\n        map = this.map;\n      x += this.trans.offsetX;\n      y += this.trans.offsetY;\n      var width = hitbox.width,\n        height = hitbox.height;\n      for (var i in map.avatars) {\n        var avatar = map.avatars[i];\n        if (Math.abs(x - avatar.trans.offsetX) < avatar.width / 2 + width / 2 && Math.abs(y - avatar.trans.offsetY) < avatar.height / 2 + height / 2) {\n          avatar.hit(damage, this);\n          if ((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.trans.offsetX, this.trans.offsetY, $AVATAR.trans.offsetX, $AVATAR.trans.offsetY) < 200) $AUDIO.playSound(\"punch\");\n        }\n      }\n    }\n  }, {\n    key: \"requestPath\",\n    value: function requestPath(x, y) {\n      x += this.map.centerX;\n      y += this.map.centerY;\n      this.state.path.request = false;\n      this.state.pathRequestRateLimit.start();\n      var start = this.map.GRAPH.getPoint(this.trans.offsetX + this.map.centerX, this.trans.offsetY + this.map.centerY),\n        end = this.map.GRAPH.getPoint(x, y);\n      if (x >= -this.map.width / 2 && x < this.map.width / 2 && y <= this.map.height / 2 && y > -this.map.height / 2 && start && end) {\n        this.state.path.start = start;\n        this.state.path.end = end;\n        pathfinder.requestPath(this, this.state.path.start.unit, this.state.path.end.unit);\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"findPathTo\",\n    value: function findPathTo(path) {\n      if (path.result && this.state.path.start) {\n        this.state.path.current = path.path;\n        this.state.path.index = 0;\n        this.state.path.engaged = true;\n      }\n      if (this.state.seat.ref && this.state.seat.id !== undefined && (!path.result || this.map.GRAPH.blocked.includes(this.state.path.end.unit))) {\n        this.stopSitting();\n      }\n      return path;\n    }\n  }, {\n    key: \"disengagePath\",\n    value: function disengagePath() {\n      this.state.path.current = [];\n      this.state.path.index = 0;\n      this.state.path.engaged = false;\n      this.state.running = false;\n      this.disengageGoto();\n    }\n  }, {\n    key: \"clean\",\n    value: function clean() {\n      if (this.state[\"goto\"].reserve) this.map.GRAPH.reserved.splice(this.map.GRAPH.reserved.indexOf(this.state[\"goto\"].reserve), 1);\n      if (this.state.seat.ref && this.state.seat.id !== undefined) this.state.seat.ref.seats[this.state.seat.id].occupied = false;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }]);\n}();\nvar Floor = /*#__PURE__*/function (_Object_4) {\n  function Floor(initialX, initialY, width, height) {\n    var _this90;\n    var tileType = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    _classCallCheck(this, Floor);\n    _this90 = _callSuper(this, Floor, [[], function () {\n      var tile = Floor._tileTypes[tileType];\n      this.vertices = tile.vertices;\n      this.texture = tile.texture;\n      this.width = width;\n      this.height = height;\n      this.tileType = tileType;\n      this.renderDimensions = {\n        width: width / tile.width,\n        height: height / tile.height\n      };\n      this.buffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.STATIC_DRAW);\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 20, 0);\n      gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 20, 12);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.enableVertexAttribArray(locations.tcoords);\n      gl.disableVertexAttribArray(locations.textrUnit);\n      gl.useProgram(program);\n    }, function () {\n      ext.bindVertexArrayOES(this.vao);\n      gl.uniform2fv(locations.translation, [this.trans.offsetX, this.trans.offsetY]);\n      gl.uniform2fv(locations.size, [this.renderDimensions.width, this.renderDimensions.height]);\n      gl.uniform2fv(locations.textureRange, [this.renderDimensions.width, this.renderDimensions.height]);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, this.texture);\n      gl.useProgram(program);\n      gl.drawArrays(gl.TRIANGLES, 0, this.vertices.length / 5);\n      gl.uniform2fv(locations.size, [1, 1]);\n      gl.uniform2fv(locations.textureRange, [0, 0]);\n    }, width, height, initialX, initialY, 0]);\n    _this90.name = \"floor\";\n    _this90.type = \"floor\";\n    _this90.bottomLayer = true;\n    _this90.subLayer = 1;\n    return _this90;\n  }\n  _inherits(Floor, _Object_4);\n  return _createClass(Floor);\n}(_Object_);\n\n// Class for invisible barriers\n_defineProperty(Floor, \"_tileTypes\", {\n  0: {\n    vertices: [-6.390000000000001, 6.390000000000001, 1, 0, 0, 6.390000000000001, 6.390000000000001, 1, 0.9984375000000001, 0, -6.390000000000001, -6.390000000000001, 1, 0, 0.9984375000000001, 6.390000000000001, 6.390000000000001, 1, 0.9984375000000001, 0, -6.390000000000001, -6.390000000000001, 1, 0, 0.9984375000000001, 6.390000000000001, -6.390000000000001, 1, 0.9984375000000001, 0.9984375000000001],\n    width: 12.780000000000001,\n    height: 12.780000000000001,\n    texture: textures.objects.floortile\n  },\n  1: {\n    vertices: [-6.390000000000001, 6.390000000000001, 1, 0, 0, 6.390000000000001, 6.390000000000001, 1, 0.9984375000000001, 0, -6.390000000000001, -6.390000000000001, 1, 0, 0.9984375000000001, 6.390000000000001, 6.390000000000001, 1, 0.9984375000000001, 0, -6.390000000000001, -6.390000000000001, 1, 0, 0.9984375000000001, 6.390000000000001, -6.390000000000001, 1, 0.9984375000000001, 0.9984375000000001],\n    width: 12.780000000000001,\n    height: 12.780000000000001,\n    texture: textures.objects.woodfloortile\n  },\n  2: {\n    vertices: [-6.390000000000001, 6.390000000000001, 1, 0, 0, 6.390000000000001, 6.390000000000001, 1, 0.9984375000000001, 0, -6.390000000000001, -6.390000000000001, 1, 0, 0.9984375000000001, 6.390000000000001, 6.390000000000001, 1, 0.9984375000000001, 0, -6.390000000000001, -6.390000000000001, 1, 0, 0.9984375000000001, 6.390000000000001, -6.390000000000001, 1, 0.9984375000000001, 0.9984375000000001],\n    width: 25.6,\n    height: 25.6,\n    texture: textures.objects.crosstile\n  }\n});\nvar Barrier = /*#__PURE__*/function () {\n  function Barrier(x, y, width, height) {\n    _classCallCheck(this, Barrier);\n    this.segments = [[0, -height, width, height]];\n    this.trans = {\n      offsetX: 0,\n      offsetY: 0\n    };\n    this.width = width;\n    this.height = height;\n    this.obstacle = true;\n    this.isValid = true;\n    this.name = \"invisible barrier\";\n    this.type = \"barrier\";\n    this.id = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)();\n    this.hideFromMap = true;\n    this.translate = function (x, y) {\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n    };\n    this.translate(x, y);\n  }\n  return _createClass(Barrier, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }]);\n}();\n\n// export class for visible barriers\nvar VisibleBarrier = /*#__PURE__*/function (_Object_5) {\n  function VisibleBarrier(initialX, initialY, width, height) {\n    var _this91;\n    var color = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [40, 40, 40, 1.0];\n    _classCallCheck(this, VisibleBarrier);\n    _this91 = _callSuper(this, VisibleBarrier, [[], function () {\n      this.vertices = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.cut)([[-width / 2, -height / 2, width, height]], false, [1], true);\n      this.width = width;\n      this.height = height;\n      this.color = color;\n      this.buffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.STATIC_DRAW);\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 12, 0);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.disableVertexAttribArray(locations.tcoords);\n      gl.disableVertexAttribArray(locations.textrUnit);\n      gl.useProgram(program);\n    }, function () {\n      ext.bindVertexArrayOES(this.vao);\n      gl.uniform2fv(locations.translation, [this.trans.offsetX, this.trans.offsetY]);\n      gl.uniform1f(locations.rotation, this.trans.rotation);\n      gl.uniform4fv(locations.color, _toConsumableArray((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.fromRGB)(this.color)));\n      gl.uniform1i(locations.lines, 1);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.useProgram(program);\n      gl.drawArrays(gl.TRIANGLES, 0, this.vertices.length / 3);\n      gl.uniform1i(locations.lines, 0);\n      gl.uniform4fv(locations.color, [0, 0, 0, 0]);\n    }, width, height, initialX, initialY, 0]);\n    _this91.segments = [[-width / 2, -height / 2, width, height]];\n    _this91.obstacle = true;\n    _this91.name = \"visible barrier\";\n    _this91.type = \"barrier\";\n    return _this91;\n  }\n  _inherits(VisibleBarrier, _Object_5);\n  return _createClass(VisibleBarrier, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }]);\n}(_Object_);\n\n// Invisible sensor for event triggers\nvar Sensor = /*#__PURE__*/function (_Barrier) {\n  function Sensor(x, y, width, height, action) {\n    var _this92;\n    _classCallCheck(this, Sensor);\n    _this92 = _callSuper(this, Sensor, [x, y, width, height]);\n    _this92.action = action;\n    _this92.isValid = true;\n    _this92.name = \"sensor\";\n    _this92.type = \"sensor\";\n    _this92.id = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)();\n    return _this92;\n  }\n  _inherits(Sensor, _Barrier);\n  return _createClass(Sensor, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }]);\n}(Barrier);\n\n// Invisible trigger for doors, etc.\n\nvar Trigger = /*#__PURE__*/function () {\n  function Trigger(x, y, action) {\n    var managedMovement = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    _classCallCheck(this, Trigger);\n    this.segments = [[-2.5, -2.5, 2.5, 2.5]];\n    this.trans = {\n      offsetX: 0,\n      offsetY: 0\n    };\n    this.width = 5;\n    this.height = 5;\n    this.interactable = true;\n    this.minDistance = 10;\n    this.isValid = true;\n    this.managedMovement = managedMovement;\n    this.id = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)();\n    this.action = action.bind(this);\n    this.name = \"trigger\";\n    this.type = \"trigger\";\n    this.exclude = true;\n    this.translate = function (x, y) {\n      this.trans.offsetX += x;\n      this.trans.offsetY += y;\n    };\n    this.translate(x, y);\n  }\n  return _createClass(Trigger, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.map.unlink(this.id);\n    }\n  }]);\n}();\n\n// class for generating graphs for maps, used for pathfinding..\nvar _Graph_ = /*#__PURE__*/function () {\n  function _Graph_(width, height) {\n    var diagonal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    _classCallCheck(this, _Graph_);\n    this.width = width;\n    this.height = height;\n    this.nodeCount = width * height;\n    this.diagonal = diagonal;\n    this.blocked = [];\n    this.reserved = [];\n    this.grid = new Map();\n    this.find = function (col, row) {\n      return this.grid.get(\"\".concat(col, \",\").concat(row));\n    }.bind(this);\n    var Node = /*#__PURE__*/_createClass(function Node(x, y) {\n      var edges = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n      _classCallCheck(this, Node);\n      this.position = {\n        x: x,\n        y: y\n      };\n      this.f = 0;\n      this.g = 0;\n      this.h = 0;\n      this.id = undefined;\n      this.edges = edges;\n      this.parent = undefined;\n      this.fresh = true;\n    });\n    this.nodes = {};\n    var col = 0,\n      row = 0,\n      node;\n    for (var i = 1; i <= this.nodeCount; i++) {\n      node = new Node((col - width / 2) * 10, -((row - height / 2) * 10));\n      node.id = i;\n      this.nodes[i] = node;\n      this.grid.set(\"\".concat((col - width / 2) * 10, \",\").concat(-((row - height / 2) * 10)), node);\n      if (col > 0) node.edges.push(node.id - 1);\n      if (col < this.width - 1) node.edges.push(node.id + 1);\n      if (row > 0) node.edges.push(node.id - width);\n      if (row < this.height - 1) node.edges.push(node.id + width);\n      if (this.diagonal) {\n        if (col > 0 && row > 0) node.edges.push(node.id - width - 1);\n        if (col < width - 1 && row > 0) node.edges.push(node.id - width + 1);\n        if (row < height - 1 && col < width - 1) node.edges.push(node.id + width + 1);\n        if (row < height - 1 && col > 0) node.edges.push(node.id + width - 1);\n      }\n      if (col === width - 1) {\n        col = 0;\n        row++;\n      } else {\n        col++;\n      }\n    }\n  }\n  return _createClass(_Graph_, [{\n    key: \"getPath\",\n    value: function getPath(s, g) {\n      var _this93 = this;\n      function euclideanDistance(x1, y1, x2, y2) {\n        return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n      }\n      function manhattanDistance(x1, y1, x2, y2) {\n        return Math.abs(x1 - x2) + Math.abs(y1 - y2);\n      }\n      if (this.blocked.includes(g)) return false;\n      var start = s,\n        goal = g,\n        open = [s],\n        closed = [];\n      var current,\n        result = {\n          result: false,\n          path: []\n        };\n      while (open.length > 0) {\n        current = open.reduce(function (a, v) {\n          return _this93.nodes[v].f < a.f || _this93.nodes[v].f === a.f && _this93.nodes[v].h < a.h ? _this93.nodes[v] : a;\n        }, {\n          f: Infinity,\n          h: Infinity\n        });\n        open.splice(open.indexOf(current.id), 1);\n        closed.push(current.id);\n        if (current.id === goal) {\n          var n = current;\n          while (n.id !== start) {\n            n = this.nodes[n.parent];\n            if (n.id === start) break;\n            result.path.unshift(n.position);\n          }\n          result.path.push(current.position);\n          result.result = true;\n          break;\n        }\n        var _iterator16 = _createForOfIteratorHelper(current.edges),\n          _step16;\n        try {\n          for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n            var i = _step16.value;\n            var edge = this.nodes[i];\n            if (edge === undefined) continue;\n            var calc = {\n              g: current.g + euclideanDistance(edge.position.x, edge.position.y, current.position.x, current.position.y),\n              h: manhattanDistance(edge.position.x, edge.position.y, this.nodes[goal].position.x, this.nodes[goal].position.y)\n            };\n            calc.f = calc.g + calc.h;\n            if (this.blocked.includes(edge.id) || closed.includes(edge.id)) continue;\n            if (edge.parent === undefined || edge.fresh === true || calc.f < edge.f) {\n              edge.parent = current.id;\n              edge.f = calc.f;\n              edge.g = calc.g;\n              edge.h = calc.h;\n              if (!open.includes(edge.id)) open.push(edge.id);\n            }\n          }\n        } catch (err) {\n          _iterator16.e(err);\n        } finally {\n          _iterator16.f();\n        }\n        current.f = 0;\n        current.h = 0;\n        current.g = 0;\n        current.fresh = true;\n      }\n      return result;\n    }\n  }, {\n    key: \"getFixedCoordinate\",\n    value: function getFixedCoordinate(x, y) {\n      var coord = {\n        x: this.width % 2 === 0 ? Math.floor(x * 0.1) * 10 : Math.round(x * 0.1) * 10 - 5,\n        y: this.height % 2 === 0 ? Math.ceil(y * 0.1) * 10 : y % 5 === 0 && y % 2 !== 0 ? Math.round(y * 0.1) * 10 - 5 : Math.round(y * 0.1) * 10 + 5\n      };\n      return coord;\n    }\n  }, {\n    key: \"getPoint\",\n    value: function getPoint(x, y) {\n      var p = this.getFixedCoordinate(x, y),\n        unit = this.find(p.x, p.y);\n      return unit ? {\n        x: p.x,\n        y: p.y,\n        unit: unit.id\n      } : false;\n    }\n  }, {\n    key: \"getRandomPoint\",\n    value: function getRandomPoint() {\n      var p = false;\n      while (!p || this.blocked.includes(p.id) && this.blocked.length !== this.nodeCount) {\n        p = this.nodes[(0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)(this.nodeCount) || 1];\n      }\n      return p ? {\n        x: p.position.x,\n        y: p.position.y\n      } : p;\n    }\n  }, {\n    key: \"evalObstacle\",\n    value: function evalObstacle(x, y, width, height) {\n      x = Math.round(x);\n      y = Math.round(y);\n      var xAndWidth = x + width,\n        yAndHeight = y + height;\n      var cornerA = this.getFixedCoordinate(x, y);\n      var cornerB = this.getFixedCoordinate(xAndWidth, y);\n      var cornerC = this.getFixedCoordinate(xAndWidth, yAndHeight);\n      var inBounds = Math.abs(x + width / 2) < this.map.width / 2 + width / 2 && Math.abs(y + height / 2) < this.map.height / 2 + height / 2;\n      if (inBounds) {\n        for (var i = cornerA.x; i <= cornerB.x; i += 10) {\n          for (var j = cornerB.y; j <= cornerC.y; j += 10) {\n            var unit = this.find(i, j);\n            if (unit) this.blocked.push(unit.id);\n          }\n        }\n      } else {\n        return false;\n      }\n      return true;\n    }\n  }]);\n}(); // export class for map creation\nvar _Map_ = /*#__PURE__*/function () {\n  function _Map_() {\n    var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;\n    var root = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var name = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"Unnamed Area\";\n    _classCallCheck(this, _Map_);\n    this.width = width;\n    this.height = height;\n    this.name = name;\n    this.id = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.genObjectId)();\n    this.root = root;\n    this.objectCount = 0;\n    this.avatarCount = 0;\n    this.lighting = false;\n    this.spawnPoints = [];\n    this.centerX = 0;\n    this.centerY = 0;\n    this.groundColor = root ? [215, 215, 215, 1] : [255, 255, 255, 1];\n    this.show = true;\n    this.freeze = false;\n    this.move = true;\n    this.objectSearchStride = root ? 4 : 5;\n    this.darkness = 1;\n    this.units = {\n      width: width / 10,\n      height: height / 10,\n      total: width / 10 * (height / 10)\n    };\n    this.objects = {};\n    this.avatars = {};\n    this.obstacles = {};\n    this.moveables = {};\n    this.locations = {};\n    this.clusters = {};\n    this.seats = {};\n    this.subLayers = {\n      1: [],\n      2: [],\n      3: [],\n      4: [],\n      5: [],\n      6: []\n    };\n    this.interactables = {};\n    this.GRAPH = new _Graph_(this.units.width, this.units.height, true);\n    this.GRAPH.map = this;\n    this.SUB_MAP_COUNT = 0;\n    this.SUB_MAPS = {};\n    this.PARENT_MAP = undefined;\n    this.mapId = undefined;\n    this.pickups = {};\n    this.CARRY = undefined;\n    this.barriers = root ? [new Barrier(-(width / 2), height / 2 + 20, width, 20), new Barrier(-(width / 2), -(height / 2), width, 20), new Barrier(-(width / 2) - 20, height / 2, 20, height), new Barrier(width / 2, height / 2, 20, height)] : [new VisibleBarrier(-width / 2 - 125, 0, 250, height + 10), new VisibleBarrier(0, -(height / 2) - 125, width + 500, 250), new VisibleBarrier(width / 2 + 125, 0, 250, height + 10), new VisibleBarrier(0, height / 2 + 125, width + 500, 250), new VisibleBarrier(0, height / 2 + 12, width, 24, [70, 70, 70, 1.0])];\n    for (var i in this.barriers) {\n      this.barriers[i].exclude = true;\n      this.link(this.barriers[i]);\n    }\n    this.groundPlate = new VisibleBarrier(0, 0, 500, 500, this.groundColor);\n    _Map_._all[this.id] = this;\n    pathfinder.registerMap(this);\n  }\n  return _createClass(_Map_, [{\n    key: \"render\",\n    value: function render() {\n      gl.uniform1f(locations.scale, 1);\n      this.groundPlate.render();\n      gl.uniform1f(locations.scale, scale);\n      gl.uniform1f(locations.darkness, this.darkness + globalDarkness);\n      if (_Map_.spectating.active) {\n        if (!_Map_.spectating.avatar) _Map_.spectating.avatar = $CURRENT_MAP.avatars[(0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.random)($CURRENT_MAP.avatarCount)];\n        if (_Map_.spectating.avatar) {\n          var _Map_$spectating$avat = _Map_.spectating.avatar.trans,\n            x = _Map_$spectating$avat.x,\n            y = _Map_$spectating$avat.y;\n          for (var i in this.objects) {\n            if (this.objects[i] === _Map_.spectating.avatar) continue;\n            if (!this.objects[i].managedMovement) this.objects[i].translate(-x, -y);\n            updateCoordsDisplay();\n          }\n        }\n      }\n      if (_Map_._recording.isRecording) _Map_._recording.recording.push($CURRENT_MAP.centerX, $CURRENT_MAP.centerY, $AVATAR.trans.rotation * 180 / Math.PI, $AVATAR.state.walking);\n      this.updateGraph();\n      this.renderBottomLayer();\n      for (var _i2 in this.objects) {\n        var ob = this.objects[_i2];\n        if (ob.preRender && !this.freeze) ob.preRender();\n        if (!(ob instanceof Barrier || ob instanceof Trigger || ob instanceof Bot) && !ob.bottomLayer && !ob.topLayer && !ob.hasCluster && !ob.hidden && !ob.subLayer && this.show) {\n          ob.render();\n        }\n      }\n      if (this.show) this.renderSubLayers();\n      for (var _i3 in this.avatars) {\n        var av = this.avatars[_i3];\n        if (av.preRender && !this.freeze) av.preRender();\n        if (this.show) av.render();\n      }\n    }\n  }, {\n    key: \"renderTopLayer\",\n    value: function renderTopLayer() {\n      if (this.show) {\n        for (var i in this.objects) {\n          var ob = this.objects[i];\n          if (!(ob instanceof Barrier || ob instanceof Trigger || ob instanceof Bot) && !ob.bottomLayer && ob.topLayer && !ob.hasCluster && !ob.hidden && !ob.subLayer) {\n            ob.render();\n          }\n        }\n        this.renderSubLayers(\"topLayer\");\n        if (!this._lineMatrix.hidden) this._lineMatrix.render();\n      }\n    }\n  }, {\n    key: \"renderBottomLayer\",\n    value: function renderBottomLayer() {\n      if (this.show) {\n        this.renderSubLayers(\"bottomLayer\");\n        for (var i in this.objects) {\n          var ob = this.objects[i];\n          if (!(ob instanceof Barrier || ob instanceof Trigger || ob instanceof Bot) && !ob.topLayer && ob.bottomLayer && !ob.hasCluster && !ob.hidden && !ob.subLayer) {\n            ob.render();\n          }\n        }\n      }\n    }\n  }, {\n    key: \"renderSubLayers\",\n    value: function renderSubLayers(layer) {\n      for (var l in this.subLayers) {\n        var _iterator17 = _createForOfIteratorHelper(this.subLayers[l]),\n          _step17;\n        try {\n          for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n            var ob = _step17.value;\n            if (!(ob instanceof Barrier || ob instanceof Trigger || ob instanceof Bot) && (ob[layer] || !layer && !ob.bottomLayer && !ob.topLayer) && !ob.hasCluster && !ob.hidden) {\n              ob.render();\n            }\n          }\n        } catch (err) {\n          _iterator17.e(err);\n        } finally {\n          _iterator17.f();\n        }\n      }\n    }\n  }, {\n    key: \"link\",\n    value: function link(obj) {\n      if (obj.render || obj.hasCluster || obj.isValid) {\n        if (obj.hasCluster) {\n          switch (obj.clusterType) {\n            case _StaticCluster_:\n              {\n                if (!this.clusters[obj.clusterName]) {\n                  var cluster = new obj.clusterType(obj.texture, obj.topLayer);\n                  cluster.bottomLayer = obj.bottomLayer;\n                  cluster.topLayer = obj.topLayer;\n                  cluster.subLayer = obj.subLayer;\n                  this.registerCluster(obj.clusterName, cluster);\n                }\n                obj.cluster = this.clusters[obj.clusterName];\n                obj.clusterIndex = this.clusters[obj.clusterName].link(obj.constructor._defaultVertices, -this.clusters[obj.clusterName].trans.offsetX + obj.trans.offsetX, -this.clusters[obj.clusterName].trans.offsetY + obj.trans.offsetY, obj.trans.rotation);\n              }\n              ;\n              break;\n            case _InstancedCluster_:\n              {\n                if (!this.clusters[obj.clusterName]) {\n                  var _cluster = new obj.clusterType(obj.constructor._defaultVertices, obj.texture, obj.type === \"light\");\n                  _cluster.bottomLayer = obj.bottomLayer;\n                  _cluster.topLayer = obj.topLayer;\n                  _cluster.subLayer = obj.subLayer;\n                  this.registerCluster(obj.clusterName, _cluster);\n                }\n                obj.cluster = this.clusters[obj.clusterName];\n                obj.clusterIndex = this.clusters[obj.clusterName].link(-this.clusters[obj.clusterName].trans.offsetX + obj.trans.offsetX, -this.clusters[obj.clusterName].trans.offsetY + obj.trans.offsetY, obj.trans.rotation);\n              }\n              ;\n              break;\n            case _MixedStaticCluster_:\n              {\n                if (!this.clusters[obj.clusterName]) {\n                  var _cluster2 = new obj.clusterType(_MixedStaticCluster_.groupings[obj.grouping]);\n                  _cluster2.bottomLayer = obj.bottomLayer;\n                  _cluster2.topLayer = obj.topLayer;\n                  _cluster2.subLayer = obj.subLayer;\n                  this.registerCluster(obj.clusterName, _cluster2);\n                }\n                obj.cluster = this.clusters[obj.clusterName];\n                obj.clusterIndex = this.clusters[obj.clusterName].link(obj.constructor._defaultVertices, -this.clusters[obj.clusterName].trans.offsetX + obj.trans.offsetX, -this.clusters[obj.clusterName].trans.offsetY + obj.trans.offsetY, obj.trans.rotation);\n              }\n              ;\n              break;\n          }\n        }\n        if (obj.preLink) obj.preLink();\n        obj.map = this;\n        obj.index = this.objectCount;\n        this.objects[obj.id] = obj;\n        if (obj.obstacle) {\n          this.obstacles[obj.id] = obj;\n          if ($MAP_DISPLAY && obj.type !== \"avatar\" && !obj.hideFromMap && $CURRENT_MAP === this) $MAP_DISPLAY.addObject(obj);\n        }\n        if (obj.pickup) this.pickups[obj.id] = obj;\n        if (obj.moveable) this.moveables[obj.id] = obj;\n        if (obj.type === \"seat\") this.seats[obj.id] = obj;\n        if (obj.interactable) this.interactables[obj.id] = obj;\n        if (obj.type === \"avatar\") {\n          this.avatars[obj.id] = obj;\n          this.avatarCount++;\n        }\n        if (obj.subLayer && !obj.hasCluster) this.subLayers[obj.subLayer].push(obj);\n        obj.linked = true;\n        if (obj.postLink) obj.postLink();\n        if (obj.obstacle) {\n          var _iterator18 = _createForOfIteratorHelper(obj.segments),\n            _step18;\n          try {\n            for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n              var i = _step18.value;\n              this.GRAPH.evalObstacle(i[0] + obj.trans.offsetX + this.centerX, i[1] + obj.trans.offsetY + this.centerY, i[2], i[3]);\n            }\n          } catch (err) {\n            _iterator18.e(err);\n          } finally {\n            _iterator18.f();\n          }\n        }\n        this.objectCount++;\n        if (obj.type !== \"avatar\" && !obj instanceof PickupRing && AUDIO.themePlaying) $AUDIO.playSound(\"equip\");\n      } else {\n        return \"invalid object.\";\n      }\n    }\n  }, {\n    key: \"unlink\",\n    value: function unlink(id) {\n      if (this.objects[id]) {\n        var obj = this.objects[id];\n        obj.linked = false;\n        if (this.objects[id].clean) this.objects[id].clean();\n        if (this.objects[id].hasCluster && !this.objects[id].preserveCluster) {\n          this.objects[id].cluster.unlink(this.objects[id].clusterIndex);\n          this.objects[id].cluster = undefined;\n        }\n        if (!this.objects[id].pickup) this.objects[id].map = undefined;\n        if (this.objects[id].type === \"avatar\") this.avatarCount--;\n        if (obj.subLayer && !obj.hasCluster) {\n          var objSubLayer = this.subLayers[obj.subLayer];\n          objSubLayer.splice(objSubLayer.indexOf(obj), 1);\n        }\n        delete this.interactables[id];\n        delete this.objects[id];\n        delete this.pickups[id];\n        delete this.avatars[id];\n        delete this.seats[id];\n        if (this.obstacles[id]) {\n          var _obj = this.obstacles[id];\n          delete this.obstacles[id];\n          if (!_obj.hideFromMap && $CURRENT_MAP === this) $MAP_DISPLAY.update();\n        }\n        this.objectCount--;\n      } else {\n        return \"that object dosen't exist.\";\n      }\n    }\n  }, {\n    key: \"locateObject\",\n    value: function locateObject(name) {\n      var closest = 1000,\n        result,\n        currentDistance;\n      for (var i in this.objects) {\n        i = this.objects[i];\n        if (i.constructor.name !== name) continue;\n        currentDistance = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(i.trans.offsetX, i.trans.offsetY, 0, 0);\n        if (currentDistance < closest) {\n          closest = currentDistance;\n          result = i;\n        }\n      }\n      return result;\n    }\n  }, {\n    key: \"updateGraph\",\n    value: function updateGraph() {\n      this.GRAPH.blocked = [];\n      for (var o in this.obstacles) {\n        var obj = this.obstacles[o];\n        if (obj.passable) continue;\n        var _iterator19 = _createForOfIteratorHelper(obj.segments),\n          _step19;\n        try {\n          for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n            var i = _step19.value;\n            this.GRAPH.evalObstacle(i[0] + obj.trans.offsetX + this.centerX, i[1] + obj.trans.offsetY + this.centerY, i[2], i[3]);\n          }\n        } catch (err) {\n          _iterator19.e(err);\n        } finally {\n          _iterator19.f();\n        }\n      }\n    }\n  }, {\n    key: \"getObject\",\n    value: function getObject(index) {\n      return Object.values(this.objects)[index + this.objectSearchStride];\n    }\n  }, {\n    key: \"translateCluster\",\n    value: function translateCluster(xoffset, yoffset, start, end) {\n      var exclude = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n      for (var i = start; i < Object.keys(this.objects).length - 1; i++) {\n        if (exclude.includes(i) || this.getObject(i).isCluster) continue;\n        this.getObject(i).translate(xoffset, yoffset, true);\n        if (i === end) break;\n      }\n      return \"cluster translated.\";\n    }\n  }, {\n    key: \"printLayoutScript\",\n    value: function printLayoutScript() {\n      var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var resetTranslation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var objs = {\n        layout: [],\n        settings: {\n          groundColor: this.groundColor,\n          lighting: this.lighting,\n          darkness: this.darkness\n        },\n        root: this.root,\n        nodes: this.SUB_MAP_COUNT,\n        children: []\n      };\n      var keys = Object.keys(this.objects);\n      for (var i = start; i < this.objectCount; i++) {\n        var ob = this.objects[keys[i]];\n        if (!(ob instanceof Barrier) && !ob.isCluster && !ob.exclude) {\n          var frame = [ob.constructor.name];\n          var translationX = ob.trans.offsetX + this.centerX,\n            translationY = ob.trans.offsetY + this.centerY;\n\n          // add special attributes for more complex objects...\n          switch (ob.name) {\n            case \"avatar\":\n              frame = frame.concat([ob.character, translationX, translationY, ob.trans.rotation * (180 / Math.PI)]);\n              break;\n            case \"text\":\n              frame = frame.concat([ob.text, ob.size, (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.toRGB)(ob._color), translationX, translationY, ob.trans.rotation * (180 / Math.PI), false]);\n              break;\n            case \"door\":\n              frame = frame.concat([ob.text, ob.roomIndex, translationX, translationY, ob.trans.rotation * (180 / Math.PI), ob.outPoint]);\n              break;\n            case \"visible barrier\":\n              frame = frame.concat([translationX, translationY, ob.width, ob.height, ob.color]);\n              break;\n            case \"street light\":\n              frame = frame.concat([translationX, translationY, ob.trans.rotation, ob._color]);\n              break;\n            case \"floor\":\n              frame = frame.concat([translationX, translationY, ob.width, ob.height, ob.tileType]);\n              break;\n            default:\n              frame = frame.concat([translationX, translationY, ob.trans.rotation]);\n              break;\n          }\n          objs.layout.push(frame);\n        }\n      }\n      for (var _i4 in this.SUB_MAPS) {\n        objs.children.push(this.SUB_MAPS[_i4].printLayoutScript(false));\n      }\n      return json ? JSON.stringify(objs) : objs;\n    }\n  }, {\n    key: \"parseLayoutScript\",\n    value: function parseLayoutScript(layout) {\n      var json = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (!layout) return;\n      var objects = json ? JSON.parse(layout) : layout;\n      var objs = objects.layout,\n        children = objects.children,\n        settings = objects.settings;\n      if (settings) {\n        this.lighting = settings.lighting;\n        this.groundColor = settings.groundColor;\n        this.groundPlate.color = this.groundColor;\n        this.darkness = settings.darkness;\n      }\n      var _iterator20 = _createForOfIteratorHelper(objs),\n        _step20;\n      try {\n        for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n          var _i5 = _step20.value;\n          var attribs = _i5.slice(1, _i5.length);\n          var ob = _construct(eval(\"\".concat(_i5[0])), _toConsumableArray(attribs));\n          this.link(ob);\n        }\n      } catch (err) {\n        _iterator20.e(err);\n      } finally {\n        _iterator20.f();\n      }\n      for (var i = 0; i < objects.nodes; i++) {\n        this.SUB_MAPS[i].parseLayoutScript(objects.children[i], false);\n      }\n      return \"parsed layout.\";\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      if (this.move) {\n        if (!noclip) {\n          for (var i in this.obstacles) {\n            if (this.obstacles[i] === $AVATAR.state.pickup.current || this.obstacles[i] === $AVATAR || this.obstacles[i].passable) continue;\n            var _iterator21 = _createForOfIteratorHelper(this.obstacles[i].segments),\n              _step21;\n            try {\n              for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n                var segment = _step21.value;\n                var _segment3 = _slicedToArray(segment, 4),\n                  ox = _segment3[0],\n                  oy = _segment3[1],\n                  ow = _segment3[2],\n                  oh = _segment3[3];\n                ox = ox + this.obstacles[i].trans.offsetX;\n                ox += ow / 2;\n                oy = oy + this.obstacles[i].trans.offsetY;\n                oy += oh / 2;\n                if (Math.round(Math.abs($AVATAR.trans.offsetY - oy)) < Math.round($AVATAR.bounds.height / 2 + oh / 2) && Math.abs($AVATAR.trans.offsetX - (ox - x)) < $AVATAR.bounds.width / 2 + ow / 2) {\n                  if (!(this.obstacles[i] instanceof Sensor)) {\n                    var negative = x < 0;\n                    x += Math.abs($AVATAR.trans.offsetX - ox) - ($AVATAR.bounds.width / 2 + ow / 2 + x);\n                    x = negative ? -x : x;\n                  } else {\n                    this.obstacles[i].action();\n                  }\n                }\n                if (Math.round(Math.abs($AVATAR.trans.offsetX - ox)) < Math.round($AVATAR.bounds.width / 2 + ow / 2) && Math.abs($AVATAR.trans.offsetY - (oy - y)) < $AVATAR.bounds.height / 2 + oh / 2) {\n                  if (!(this.obstacles[i] instanceof Sensor)) {\n                    var _negative = y < 0;\n                    y += Math.abs($AVATAR.trans.offsetY - oy) - ($AVATAR.bounds.height / 2 + oh / 2 + y);\n                    y = _negative ? -y : y;\n                  } else {\n                    this.obstacles[i].action();\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator21.e(err);\n            } finally {\n              _iterator21.f();\n            }\n          }\n        }\n        this.centerX += x;\n        this.centerY += y;\n        if (this.CARRY) {\n          this.CARRY.translate(x, y, 0, true);\n        }\n        for (var _i6 in this.objects) {\n          if (!this.objects[_i6].managedMovement) this.objects[_i6].translate(-x, -y);\n        }\n        this._lineMatrix.translate(-x, -y);\n        this.updateInteractable();\n        updateCoordsDisplay();\n      }\n    }\n  }, {\n    key: \"record\",\n    value: function record() {\n      if (!_Map_._recording.isRecording) {\n        _Map_._recording.isRecording = true;\n        return \"recording...\";\n      } else {\n        var result = _Map_._recording.recording;\n        _Map_._recording.isRecording = false;\n        _Map_._recording.recording = [];\n        return JSON.stringify(result);\n      }\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      _Map_._recording.isRecording = false;\n    }\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      _Map_._recording.isRecording = true;\n    }\n  }, {\n    key: \"getRecording\",\n    value: function getRecording() {\n      var result = _Map_._recording.recording;\n      _Map_._recording.isRecording = false;\n      _Map_._recording.recording = [];\n      return JSON.stringify(result);\n    }\n  }, {\n    key: \"registerCluster\",\n    value: function registerCluster(name, cluster) {\n      this.clusters[name] = cluster;\n      this.link(cluster);\n      cluster.linked = true;\n    }\n  }, {\n    key: \"updateInteractable\",\n    value: function updateInteractable() {\n      this.currentInteractable = undefined;\n      for (var i in this.interactables) {\n        i = this.interactables[i];\n        if ((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)($AVATAR.trans.offsetX, $AVATAR.trans.offsetY, i.trans.offsetX, i.trans.offsetY) < i.minDistance) {\n          this.currentInteractable = i;\n        }\n      }\n      if (!this.currentInteractable) {\n        document.querySelector(\".action-button\").style.opacity = \"0.5\";\n      } else {\n        document.querySelector(\".action-button\").style.opacity = \"1\";\n      }\n    }\n  }, {\n    key: \"showGeometry\",\n    value: function showGeometry() {\n      this._lineMatrix.hidden = false;\n    }\n  }, {\n    key: \"hideGeometry\",\n    value: function hideGeometry() {\n      this._lineMatrix.hidden = true;\n    }\n  }, {\n    key: \"addSubMap\",\n    value: function addSubMap(m) {\n      m.PARENT_MAP = this;\n      m.mapId = this.SUB_MAP_COUNT++;\n      this.SUB_MAPS[String(m.mapId)] = m;\n    }\n  }, {\n    key: \"deleteSubMap\",\n    value: function deleteSubMap(id) {\n      delete this.SUB_MAPS[id];\n      this.SUB_MAP_COUNT--;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var spawns = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [[0, 0]];\n      var doorOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var exitPoint = arguments.length > 2 ? arguments[2] : undefined;\n      var buildingExit = arguments.length > 3 ? arguments[3] : undefined;\n      var label = arguments.length > 4 ? arguments[4] : undefined;\n      // attach any default objects or clusters for all maps, etc.\n      this._bulletMatrix = new _BulletCluster_([-0.9, 0.4, 1, 0, 0, 0.9, 0.4, 1, 0.5625, 0, -0.9, -0.4, 1, 0, 0.5, 0.9, 0.4, 1, 0.5625, 0, -0.9, -0.4, 1, 0, 0.5, 0.9, -0.4, 1, 0.5625, 0.5], textures.objects.bullet);\n      this.link(this._bulletMatrix);\n      this._lineMatrix = new _LineMatrix_();\n      this._lineMatrix.hidden = true;\n      this._lineMatrix.showShot([-this.width / 2, -this.height / 2], [this.width / 2, -this.height / 2]);\n      this._lineMatrix.showShot([-this.width / 2, -this.height / 2], [-this.width / 2, this.height / 2]);\n      this._lineMatrix.showShot([-this.width / 2, this.height / 2], [this.width / 2, this.height / 2]);\n      this._lineMatrix.showShot([this.width / 2, this.height / 2], [this.width / 2, -this.height / 2]);\n      this._lineMatrix.showShot([-5 / 2, -5 / 2], [5 / 2, -5 / 2]);\n      this._lineMatrix.showShot([-5 / 2, -5 / 2], [-5 / 2, 5 / 2]);\n      this._lineMatrix.showShot([-5 / 2, 5 / 2], [5 / 2, 5 / 2]);\n      this._lineMatrix.showShot([5 / 2, 5 / 2], [5 / 2, -5 / 2]);\n      for (var i = 10; i < this.width; i += 10) {\n        this._lineMatrix.showShot([-this.width / 2 + i, -this.height / 2], [-this.width / 2 + i, this.height / 2]);\n      }\n      for (var _i7 = 10; _i7 < this.height; _i7 += 10) {\n        this._lineMatrix.showShot([-this.width / 2, -this.height / 2 + _i7], [this.width / 2, -this.height / 2 + _i7]);\n      }\n      var _iterator22 = _createForOfIteratorHelper(spawns),\n        _step22;\n      try {\n        for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n          var _i8 = _step22.value;\n          this.spawnPoints.push(_i8);\n        }\n      } catch (err) {\n        _iterator22.e(err);\n      } finally {\n        _iterator22.f();\n      }\n      if (!this.root) {\n        var exit = new Door(label, -1, 0 + doorOffset, this.height / 2 + 9.2, 0, exitPoint, buildingExit);\n        var light = new LightSwitch(25 + doorOffset, this.height / 2 + 12);\n        light.exclude = true;\n        this.link(exit);\n        this.link(light);\n      }\n      return this;\n    }\n  }]);\n}();\n_defineProperty(_Map_, \"_recording\", {\n  isRecording: false,\n  recording: undefined\n});\n_defineProperty(_Map_, \"spectating\", {\n  active: true,\n  avatar: undefined\n});\n_defineProperty(_Map_, \"_all\", {});\nvar Text = /*#__PURE__*/function (_Object_6) {\n  function Text(text) {\n    var _this94;\n    var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 30;\n    var color = arguments.length > 2 ? arguments[2] : undefined;\n    var initialX = arguments.length > 3 ? arguments[3] : undefined;\n    var initialY = arguments.length > 4 ? arguments[4] : undefined;\n    var initialRotation = arguments.length > 5 ? arguments[5] : undefined;\n    var texture = arguments.length > 6 ? arguments[6] : undefined;\n    var segments = arguments.length > 7 ? arguments[7] : undefined;\n    _classCallCheck(this, Text);\n    _this94 = _callSuper(this, Text, [[], function () {\n      var textData = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.createText)(text, size);\n      this.vertices = textData.vertices;\n      this.text = text;\n      this.width = textData.width;\n      this.height = textData.height;\n      this.color = color || [0, 0, 0, 1];\n      this.size = size;\n      this.texture = texture || textures.misc.font;\n      this.buffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.STATIC_DRAW);\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 20, 0);\n      gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 20, 12);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.enableVertexAttribArray(locations.tcoords);\n      gl.disableVertexAttribArray(locations.offset);\n      gl.disableVertexAttribArray(locations.textrUnit);\n      gl.useProgram(program);\n    }, function () {\n      ext.bindVertexArrayOES(this.vao);\n      gl.uniform2fv(locations.translation, [this.trans.offsetX, this.trans.offsetY]);\n      gl.uniform1f(locations.rotation, this.trans.rotation);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, this.texture);\n      gl.useProgram(program);\n      gl.uniform4fv(locations.color, this._color);\n      gl.uniform1i(locations.textColor, 1);\n      gl.drawArrays(gl.TRIANGLES, 0, this.vertices.length / 5);\n      gl.uniform4fv(locations.color, [0, 0, 0, 0]);\n      gl.uniform1i(locations.textColor, 0);\n    }, undefined, undefined, initialX, initialY, initialRotation]);\n    _this94.segments = segments;\n    _this94.name = \"text\";\n    _this94.type = \"text\";\n    _this94.bottomLayer = true;\n    _this94.subLayer = 1;\n    return _this94;\n  }\n  _inherits(Text, _Object_6);\n  return _createClass(Text, [{\n    key: \"update\",\n    value: function update(text) {\n      var textData = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.createText)(text, this.size);\n      this.vertices = new Float32Array(textData.vertices);\n      this.width = textData.width;\n      this.height = textData.height;\n      ext.bindVertexArrayOES(this.vao);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.STATIC_DRAW);\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 20, 0);\n      gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 20, 12);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.enableVertexAttribArray(locations.tcoords);\n    }\n  }, {\n    key: \"color\",\n    set: function set(code) {\n      this._color = (0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.fromRGB)(code);\n    }\n  }]);\n}(_Object_);\n\n/* GAME CONTROL ELEMENTS */\n\nvar _Button_ = /*#__PURE__*/function (_Object_7) {\n  function _Button_(texture, textureActive, initialX, initialY, action, radius) {\n    var _this95;\n    var scale = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 1;\n    var toggle = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : false;\n    var vertices = arguments.length > 8 ? arguments[8] : undefined;\n    _classCallCheck(this, _Button_);\n    _this95 = _callSuper(this, _Button_, [vertices || [-8.571428571428571, 8.571428571428571, 1, 0, 0, 8.571428571428571, 8.571428571428571, 1, 1, 0, -8.571428571428571, -8.571428571428571, 1, 0, 1, 8.571428571428571, 8.571428571428571, 1, 1, 0, -8.571428571428571, -8.571428571428571, 1, 0, 1, 8.571428571428571, -8.571428571428571, 1, 1, 1], function () {\n      this.buffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.STATIC_DRAW);\n      this.texture = texture;\n      this.textureActive = textureActive;\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 20, 0);\n      gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 20, 12);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.enableVertexAttribArray(locations.tcoords);\n      gl.disableVertexAttribArray(locations.offset);\n      gl.disableVertexAttribArray(locations.textrUnit);\n      gl.useProgram(program);\n    }, function () {\n      ext.bindVertexArrayOES(this.vao);\n      gl.uniform2fv(locations.translation, [this.trans.offsetX * this.scale, this.trans.offsetY * this.scale]);\n      gl.uniform1f(locations.rotation, this.trans.rotation);\n      gl.uniform1f(locations.scale, this.scale);\n      this.enabled ? gl.uniform1f(locations.transparency, 1 / controlTransparency) : gl.uniform1f(locations.transparency, 0.5 / controlTransparency);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.activeTexture(gl.TEXTURE0);\n      if (this.active && !toggle || toggle && !this.on) {\n        gl.bindTexture(gl.TEXTURE_2D, this.textureActive);\n      } else if (!this.active && !toggle || toggle && this.on) {\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n      }\n      gl.useProgram(program);\n      gl.drawArrays(gl.TRIANGLES, 0, this.vertices.length / 5);\n      gl.uniform1f(locations.transparency, 1);\n    }, radius * 2, radius * 2, initialX, initialY, 0]);\n    _this95.type = \"button\";\n    _this95.scale = scale;\n    _this95.enabled = true;\n    _this95.active = false;\n    _this95.radius = radius / scale;\n    _this95.on = false;\n    _this95.action = action.bind(_this95);\n    return _this95;\n  }\n  _inherits(_Button_, _Object_7);\n  return _createClass(_Button_);\n}(_Object_);\nvar _Joystick_ = /*#__PURE__*/function (_Object_8) {\n  function _Joystick_(left) {\n    var _this96;\n    var scale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var fixed = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var position = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n      x: 0,\n      y: 0\n    };\n    _classCallCheck(this, _Joystick_);\n    _this96 = _callSuper(this, _Joystick_, [[-15, 15, 1, 0, 0, 15, 15, 1, 0.5859375, 0, -15, -15, 1, 0, 0.5859375, 15, 15, 1, 0.5859375, 0, -15, -15, 1, 0, 0.5859375, 15, -15, 1, 0.5859375, 0.5859375], function () {\n      this.buffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      this.texture = textures.controls.joystick_disc;\n      gl.vertexAttribPointer(locations.coords, 3, gl.FLOAT, false, 20, 0);\n      gl.vertexAttribPointer(locations.tcoords, 2, gl.FLOAT, false, 20, 12);\n      gl.enableVertexAttribArray(locations.coords);\n      gl.enableVertexAttribArray(locations.tcoords);\n      gl.disableVertexAttribArray(locations.offset);\n      gl.disableVertexAttribArray(locations.textrUnit);\n    }, function () {\n      if (this.desktopMovementAnimation.active) this.desktopMovementAnimation.run();\n      if (!this.base.anchored && !this.fixed) return;\n      ext.bindVertexArrayOES(this.vao);\n      gl.uniform2fv(locations.translation, [this.base.x * scale, this.base.y * scale]);\n      gl.uniform1f(locations.rotation, 0);\n      gl.uniform1f(locations.scale, this.scale);\n      gl.uniform1f(locations.transparency, 1 / controlTransparency);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, this.vertices, gl.DYNAMIC_DRAW);\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, this.texture);\n      gl.useProgram(program);\n      gl.drawArrays(gl.TRIANGLES, 0, 6);\n      gl.uniform2fv(locations.translation, [this.thumb.x * scale, this.thumb.y * scale]);\n      gl.bufferData(gl.ARRAY_BUFFER, this.thumbVertices, gl.DYNAMIC_DRAW);\n      gl.drawArrays(gl.TRIANGLES, 0, 6);\n      gl.uniform1f(locations.transparency, 1);\n      if ($CURRENT_MAP.move) {\n        if (left && this.base.anchored) {\n          $CURRENT_MAP.translate(this.distance.x * this.scale * movementMultFactor, this.distance.y * this.scale * movementMultFactor);\n          if ($CURRENT_MAP.move) {\n            $AVATAR.state.walking = true;\n            if ($AVATAR.state.seat.ref) {\n              $AVATAR.state.seat.ref.seats[$AVATAR.state.seat.id].occupied = false;\n              $AVATAR.state.seat.ref = undefined;\n              $AVATAR.state.seat.id = undefined;\n            }\n          }\n        }\n        if (this.base.anchored && !$AVATAR.state.equippedItems.mainTool && !$AVATAR.state.punching) $AVATAR.trans.rotation = this.rotation;\n        if ($CURRENT_MAP.move && this.base.anchored && !left || !$IS_MOBILE) $AVATAR.drawWeapon();\n      }\n    }, 30, 30]);\n    _this96.position = position;\n    _this96.desktopMovementAnimation = new _src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.LoopAnimation(function () {\n      this.desktopMovementCallback();\n    }, _this96, 0.01);\n    _this96.base = {\n      x: position.x,\n      y: position.y,\n      width: 30 / scale,\n      height: 30 / scale,\n      anchored: false,\n      radius: 15 / scale\n    };\n    _this96.scale = scale;\n    _this96.fixed = fixed;\n    _this96.thumb = {\n      x: position.x,\n      y: position.y,\n      width: 15 / scale,\n      height: 15 / scale\n    };\n    _this96.thumbVertices = new Float32Array([-7.5, 7.5, 1, 0, 0, 7.5, 7.5, 1, 0.5859375, 0, -7.5, -7.5, 1, 0, 0.5859375, 7.5, 7.5, 1, 0.5859375, 0, -7.5, -7.5, 1, 0, 0.5859375, 7.5, -7.5, 1, 0.5859375, 0.5859375]);\n    _this96.distance = {\n      x: 0,\n      y: 0,\n      absolute: 0\n    };\n    _this96.rotation = undefined;\n    _this96.ratio = 0;\n    _this96.left = left;\n    _this96.id = undefined;\n    _this96.fix();\n    return _this96;\n  }\n  _inherits(_Joystick_, _Object_8);\n  return _createClass(_Joystick_, [{\n    key: \"unanchor\",\n    value: function unanchor() {\n      this.base.anchored = false;\n\n      // deactivate player firing when the left joystick is lifted \n      if (!this.left && $CURRENT_MAP.move) {\n        $AVATAR.state.fire = false;\n        $AVATAR.state.punching = false;\n        $AVATAR.state.stabbing = false;\n      }\n    }\n  }, {\n    key: \"fix\",\n    value: function fix() {\n      if (!this.fixed) return;\n      var _this$position = this.position,\n        x = _this$position.x,\n        y = _this$position.y;\n      this.base.x = x;\n      this.base.y = y;\n      this.thumb.x = x;\n      this.thumb.y = y;\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      if (!this.base.anchored) {\n        if (!this.fixed) {\n          this.base.x = x;\n          this.base.y = y;\n        }\n        this.base.anchored = true;\n      }\n      this.thumb.x = x;\n      this.thumb.y = y;\n      this.distance.absolute = Math.round((0,_src_scripts_lib_js__WEBPACK_IMPORTED_MODULE_0__.distance)(this.base.x, this.base.y, x, y));\n\n      // activate player firing state when the left joystick is at the edge, and viceversa\n      if (!this.left && $CURRENT_MAP.move) {\n        if (this.distance.absolute === this.base.radius && !$AVATAR.state.pickup.current) {\n          if ($AVATAR.state.armed) {\n            $AVATAR.state.fire = true;\n          } else if ($AVATAR.state.melee) {\n            $AVATAR.state.stabbing = true;\n          } else {\n            $AVATAR.state.punching = true;\n          }\n        } else {\n          $AVATAR.state.fire = false;\n          $AVATAR.state.punching = false;\n          $AVATAR.state.stabbing = false;\n        }\n      }\n      this.distance.x = this.thumb.x - this.base.x;\n      this.distance.y = this.thumb.y - this.base.y;\n      this.rotation = Math.atan2(this.thumb.y - this.base.y, this.thumb.x - this.base.x) - 1.5708;\n      this.ratio = this.distance.x / this.distance.y;\n    }\n  }]);\n}(_Object_);\n\n//# sourceURL=webpack://WTRW/./src/scripts/objects.js?");

/***/ })

}]);